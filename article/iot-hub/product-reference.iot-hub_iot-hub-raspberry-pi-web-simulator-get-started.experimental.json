{"Title":"连接到云的模拟 Raspberry Pi (Node.js) - 将 Raspberry Pi Web 模拟器连接到 Azure IoT 中心","Description":"将 Raspberry Pi Web 模拟器连接到 Azure IoT 中心，以供 Raspberry Pi 将数据发送到 Azure 云。","Content":"# <a name=\"connect-raspberry-pi-online-simulator-to-azure-iot-hub-nodejs\"></a>将 Raspberry Pi 联机模拟器连接到 Azure IoT 中心 (Node.js)\r\n\r\n[!INCLUDE [iot-hub-get-started-device-selector](../../includes/iot-hub-get-started-device-selector.md)]\r\n\r\n在本教程中，首先学习有关使用 Raspberry Pi 联机模拟器的基础知识。 然后将学习如何使用 [Azure IoT 中心](./iot-hub-what-is-iot-hub.md)将 Pi 模拟器无缝连接到云。 \r\n\r\n如有物理设备，请访问[将 Raspberry Pi 连接到 Azure IoT 中心](./iot-hub-raspberry-pi-kit-node-get-started.md)。 \r\n\r\n<p>\r\n<div id=\"diag\" style=\"width:100%; text-align:center\">\r\n<a href=\"https://azure-samples.github.io/raspberry-pi-web-simulator/#getstarted\">\r\n<img src=\"media/iot-hub-raspberry-pi-web-simulator/3_banner.png\" alt=\"Connect Raspberry Pi web simulator to Azure IoT Hub\" width=\"400\">\r\n</div>\r\n<p>\r\n<div id=\"button\" style=\"width:100%; text-align:center\">\r\n<a href=\"https://azure-samples.github.io/raspberry-pi-web-simulator/#Getstarted\">\r\n<img src=\"media/iot-hub-raspberry-pi-web-simulator/6_button_default.png\" alt=\"Start Raspberry Pi simulator\" width=\"400\" onmouseover=\"this.src='media/iot-hub-raspberry-pi-web-simulator/5_button_click.png';\" onmouseout=\"this.src='media/iot-hub-raspberry-pi-web-simulator/6_button_default.png';\">\r\n</div>\r\n\r\n## <a name=\"what-you-do\"></a>准备工作\r\n\r\n* 了解 Raspberry Pi 联机模拟器的基础知识。\r\n* 创建 IoT 中心。\r\n* 在 IoT 中心内为 Pi 注册设备。\r\n* 在 Pi 上运行示例应用程序，将模拟传感器数据发送到 IoT 中心。\r\n\r\n将模拟 Raspberry Pi 连接到所创建的 IoT 中心。 然后使用模拟器运行示例应用程序，生成传感器数据。 最后，将传感器数据发送到 IoT 中心。\r\n\r\n## <a name=\"what-you-learn\"></a>学习内容\r\n\r\n* 如何创建 Azure IoT 中心以及如何获取新的设备连接字符串。 如果没有 Azure 帐户，只需花费几分钟就能[创建一个 Azure 试用帐户](https://www.azure.cn/pricing/1rmb-trial/)。\r\n* 如何使用 Raspberry Pi 联机模拟器。\r\n* 如何将传感器数据发送到 IoT 中心。\r\n\r\n## <a name=\"overview-of-raspberry-pi-web-simulator\"></a>Raspberry Pi Web 模拟器概述\r\n\r\n单击按钮，启动 Raspberry Pi 联机模拟器。\r\n\r\n> [!div class=\"button\"]\r\n[启动 Raspberry Pi 模拟器](https://azure-samples.github.io/raspberry-pi-web-simulator/#GetStarted)\r\n\r\nWeb 模拟器中有三个区域。\r\n* 装配区 - 默认电路是 Pi 与 BME280 传感器和 LED 连接。 在预览版中该区域是锁定的，因此当前无法执行自定义操作。\r\n* 编码区 - 一个联机代码编辑器，用于使用 Raspberry Pi 进行编码。 默认示例应用程序有助于从 BME280 传感器收集传感器数据，并发送到 Azure IoT 中心。 应用程序与实际 Pi 设备是完全兼容的。 \r\n* 集成控制台窗口 - 会显示代码的输出。 此窗口顶部有三个按钮。\r\n   * 运行 - 在编码区中运行应用程序。\r\n   * 重置 - 将编码区重置为默认示例应用程序。\r\n   * 折叠/展开 - 按钮位于右侧，用于折叠/展开控制台窗口。\r\n\r\n> [!NOTE] \r\nRaspberry Pi Web 模拟器现于预览版中提供。 我们希望通过 [Gitter Chatroom](https://gitter.im/Microsoft/raspberry-pi-web-simulator) 听到你的建议。 [Github](https://github.com/Azure-Samples/raspberry-pi-web-simulator) 上公开了源代码。\r\n\r\n![Pi 联机模拟器概述](./media/iot-hub-raspberry-pi-web-simulator/0_overview.png)\r\n\r\n[!INCLUDE [iot-hub-get-started-create-hub-and-device](../../includes/iot-hub-get-started-create-hub-and-device.md)]\r\n\r\n\r\n## <a name=\"run-a-sample-application-on-pi-web-simulator\"></a>在 Pi Web 模拟器上运行示例应用程序\r\n\r\n1. 在编码区中，请确保正在使用默认示例应用程序。 将 15 行中的占位符替换为 Azure IoT 中心设备的连接字符串。\r\n   ![替换设备连接字符串](./media/iot-hub-raspberry-pi-web-simulator/1_connectionstring.png)\r\n\r\n2. 单击“运行”，或键入 `npm start`，即可运行应用程序。\r\n\r\n\r\n应看到以下输出，其中显示传感器数据以及发送至 IoT 中心的消息![输出 - 从 Raspberry Pi 发送到 IoT 中心的传感器数据](./media/iot-hub-raspberry-pi-web-simulator/2_run_application.png)\r\n\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n\r\n此时已运行示例应用程序，收集传感器数据并将其发送到 IoT 中心。\r\n\r\n[!INCLUDE [iot-hub-get-started-next-steps](../../includes/iot-hub-get-started-next-steps.md)]\r\n"}