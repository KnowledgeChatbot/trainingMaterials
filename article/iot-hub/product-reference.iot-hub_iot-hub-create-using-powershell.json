{"Title":"使用 PowerShell cmdlet 创建 Azure IoT 中心","Description":"如何使用 PowerShell cmdlet 创建 IoT 中心。","Content":"# <a name=\"create-an-iot-hub-using-the-new-azurermiothub-cmdlet\"></a>使用 New-AzureRmIotHub cmdlet 创建 IoT 中心\r\n\r\n[!INCLUDE [iot-hub-resource-manager-selector](../../includes/iot-hub-resource-manager-selector.md)]\r\n\r\n## <a name=\"introduction\"></a>介绍\r\n\r\n可以使用 Azure PowerShell cmdlet 创建和管理 Azure IoT 中心。 本教程介绍如何使用 PowerShell 创建 IoT 中心。\r\n\r\n> [!NOTE]\r\n> Azure 提供了用于创建和使用资源的两个不同部署模型：[Azure Resource Manager 模型和经典模型](../azure-resource-manager/resource-manager-deployment-model.md)。  本文介绍了如何使用 Azure Resource Manager 部署模型。\r\n\r\n要完成本教程，需要具备以下先决条件：\r\n\r\n* 有效的 Azure 帐户。 <br/>如果没有帐户，可以创建一个[试用帐户][lnk-free-trial]，只需几分钟即可完成。\r\n* [Azure PowerShell cmdlet][lnk-powershell-install]。\r\n\r\n## <a name=\"connect-to-your-azure-subscription\"></a>连接到 Azure 订阅\r\n在 PowerShell 命令提示符中，输入以下命令以登录 Azure 订阅：\r\n\r\n```powershell\r\nLogin-AzureRmAccount -Environment $(Get-AzureRmEnvironment -Name AzureChinaCloud)\r\n```\r\n\r\n如果有多个 Azure 订阅，则访问 Azure 即有权访问与凭据关联的所有 Azure 订阅。 使用以下命令，列出可供使用的 Azure 订阅：\r\n\r\n```powershell\r\nGet-AzureRMSubscription\r\n```\r\n\r\n使用以下命令，选择想要用于运行命令以创建 IoT 中心的订阅。 可使用上一命令输出中的订阅名称或 ID：\r\n\r\n```powershell\r\nSelect-AzureRMSubscription `\r\n    -SubscriptionName \"{your subscription name}\"\r\n```\r\n\r\n## <a name=\"create-resource-group\"></a>创建资源组\r\n\r\n需要一个资源组来部署 IoT 中心。 可以使用现有资源组，也可以创建新组。\r\n\r\n可以使用以下命令来搜索可以部署 IoT 中心的位置：\r\n\r\n```powershell\r\n((Get-AzureRmResourceProvider `\r\n  -ProviderNamespace Microsoft.Devices).ResourceTypes `\r\n  | Where-Object ResourceTypeName -eq IoTHubs).Locations\r\n```\r\n\r\n若要在 IoT 中心的其中一个支持位置中为 IoT 中心创建资源组，请使用以下命令。 此示例在“中国东部”区域中创建名为 **MyIoTRG1** 的资源组：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroup -Name MyIoTRG1 -Location \"China East\"\r\n```\r\n\r\n## <a name=\"create-an-iot-hub\"></a>创建 IoT 中心\r\n\r\n若要在上一步创建的资源组中创建 IoT 中心，请使用以下命令。 此示例在“中国东部”区域中创建名为 **MyTestIoTHub** 的 **S1** 中心：\r\n\r\n```powershell\r\nNew-AzureRmIotHub `\r\n    -ResourceGroupName MyIoTRG1 `\r\n    -Name MyTestIoTHub `\r\n    -SkuName S1 -Units 1 `\r\n    -Location \"China East\"\r\n```\r\n\r\nIoT 中心的名称必须是唯一的。\r\n\r\n[!INCLUDE [iot-hub-pii-note-naming-hub](../../includes/iot-hub-pii-note-naming-hub.md)]\r\n\r\n\r\n可以使用以下命令列出订阅中的所有 IoT 中心：\r\n\r\n```powershell\r\nGet-AzureRmIotHub\r\n```\r\n\r\n上一个示例添加向你计费的 S1 标准 IoT 中心。 可以使用以下命令删除 IoT 中心：\r\n\r\n```powershell\r\nRemove-AzureRmIotHub `\r\n    -ResourceGroupName MyIoTRG1 `\r\n    -Name MyTestIoTHub\r\n```\r\n\r\n或者，可以使用以下命令删除资源组及其包含的所有资源：\r\n\r\n```powershell\r\nRemove-AzureRmResourceGroup -Name MyIoTRG1\r\n```\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n\r\n现在，已使用 PowerShell cmdlet 部署了 IoT 中心，接下来可以进一步进行探索：\r\n\r\n* 发现其他[可用于 IoT 中心的 PowerShell cmdlet][lnk-iothub-cmdlets]。\r\n* 阅读了解 [IoT 中心资源提供程序 REST API][lnk-rest-api] 的相关功能。\r\n\r\n若要详细了解如何开发 IoT 中心，请参阅以下文章：\r\n\r\n* [C SDK 简介][lnk-c-sdk]\r\n* [Azure IoT SDK][lnk-sdks]\r\n\r\n若要进一步探索 IoT 中心的功能，请参阅：\r\n\r\n* [使用 Azure IoT Edge 将 AI 部署到边缘设备][lnk-iotedge]\r\n\r\n<!-- Links -->\r\n[lnk-free-trial]: https://www.azure.cn/pricing/1rmb-trial/\r\n[lnk-powershell-install]: ../powershell-install-configure.md\r\n[lnk-iothub-cmdlets]: https://docs.microsoft.com/powershell/module/azurerm.iothub/\r\n[lnk-rest-api]: https://docs.microsoft.com/rest/api/iothub/iothubresource\r\n\r\n[lnk-c-sdk]: ./iot-hub-device-sdk-c-intro.md\r\n[lnk-sdks]: ./iot-hub-devguide-sdks.md\r\n\r\n[lnk-iotedge]: ./iot-hub-linux-iot-edge-simulated-device.md\r\n\r\n<!--Update_Description: update meta data and wording-->\r\n"}