{"Title":"使用 Azure CLI (az.py) 创建 IoT 中心","Description":"如何使用跨平台的 Azure CLI 2.0 (az.py) 创建 Azure IoT 中心。","Content":"# <a name=\"create-an-iot-hub-using-the-azure-cli-20\"></a>使用 Azure CLI 2.0 创建 IoT 中心\r\n\r\n[!INCLUDE [iot-hub-resource-manager-selector](../../includes/iot-hub-resource-manager-selector.md)]\r\n\r\n## <a name=\"introduction\"></a>介绍\r\n\r\n可使用 Azure CLI 2.0 (az.py) 以编程方式创建和管理 Azure IoT 中心。 本文介绍如何使用 Azure CLI 2.0 (az.py) 创建 IoT 中心。\r\n\r\n可以使用以下 CLI 版本之一完成任务：\r\n\r\n* [Azure CLI (azure.js)](./iot-hub-create-using-cli-nodejs.md) - 适用于经典部署模型和资源管理部署模型的 CLI。\r\n* Azure CLI 2.0 (az.py) - 适用于本文中所述的资源管理部署模型的下一代 CLI。\r\n\r\n若要完成本教程，需要以下各项：\r\n\r\n* 有效的 Azure 帐户。 如果没有帐户，只需几分钟即可创建一个[试用帐户][lnk-free-trial]。\r\n* [Azure CLI 2.0][lnk-CLI-install]。\r\n\r\n## <a name=\"sign-in-and-set-your-azure-account\"></a>登录并设置 Azure 帐户\r\n\r\n登录到 Azure 帐户，并选择订阅。\r\n\r\n1. 在命令提示符中，运行 [login 命令][lnk-login-command]：\r\n    \r\n    ```azurecli\r\n    az login\r\n    ```\r\n\r\n    按照说明使用代码进行身份验证，并通过 Web 浏览器登录 Azure 帐户。\r\n    \r\n   > [!NOTE]\r\n   > 在 Azure 中国区使用 Azure CLI 2.0 之前，请先运行 `az cloud set -n AzureChinaCloud` 来改变云环境。如果想切回国际版 Azure，请再次运行 `az cloud set -n AzureCloud`。\r\n\r\n2. 如果有多个 Azure 订阅，登录 Azure 可获得与凭据关联的所有 Azure 帐户的访问权限。 使用以下 [命令，列出可供使用的 Azure 帐户][lnk-az-account-command] ：\r\n    \r\n    ```azurecli\r\n    az account list \r\n    ```\r\n\r\n    使用以下命令，选择想要用于运行命令以创建 IoT 中心的订阅。 可使用上一命令输出中的订阅名称或 ID：\r\n\r\n    ```azurecli\r\n    az account set --subscription {your subscription name or id}\r\n    ```\r\n\r\n## <a name=\"create-an-iot-hub\"></a>创建 IoT 中心\r\n\r\n使用 Azure CLI 创建资源组，并添加 IoT 中心。\r\n\r\n1. 创建 IoT 中心时，必须在资源组中创建它。 使用现有资源组，或运行以下[命令创建资源组][lnk-az-resource-command]：\r\n\r\n    ```azurecli\r\n     az group create --name {your resource group name} --location chinaeast\r\n    ```\r\n\r\n    > [!TIP]\r\n    > 上一示例在中国东部位置创建资源组。 可运行 `az account list-locations -o table`命令，查看可用位置的列表。\r\n    >\r\n    >\r\n\r\n2. 运行以下[命令，使用 IoT 中心的全局唯一名称在资源组中创建 IoT 中心][lnk-az-iot-command]：\r\n    \r\n    ```azurecli\r\n    az iot hub create --name {your iot hub name} --resource-group {your resource group name} --sku S1\r\n    ```\r\n\r\n   [!INCLUDE [iot-hub-pii-note-naming-hub](../../includes/iot-hub-pii-note-naming-hub.md)]\r\n\r\n\r\n> [!NOTE]\r\n> 上一命令在计费的 S1 定价层中创建 IoT 中心。 有关详细信息，请参阅 [Azure IoT 中心定价][lnk-iot-pricing]。\r\n>\r\n>\r\n\r\n## <a name=\"remove-an-iot-hub\"></a>删除 IoT 中心\r\n\r\n可使用 Azure CLI [删除单个资源][lnk-az-resource-command]（例如 IoT 中心），或删除资源组及其所有资源（包括任何 IoT 中心）。\r\n\r\n若要删除 IoT 中心，请运行以下命令：\r\n\r\n```azurecli\r\naz iot hub delete --name {your iot hub name} --resource-group {your resource group name}\r\n```\r\n\r\n若要删除资源组及其所有资源，请运行以下命令：\r\n\r\n```azurecli\r\naz group delete --name {your resource group name}\r\n```\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n若要详细了解如何开发 IoT 中心，请参阅以下文章：\r\n\r\n* [IoT 中心开发人员指南][lnk-devguide]\r\n\r\n若要进一步探索 IoT 中心的功能，请参阅：\r\n\r\n* [使用 Azure 门户管理 IoT 中心][lnk-portal]\r\n\r\n<!-- Links -->\r\n[lnk-free-trial]: https://www.azure.cn/pricing/1rmb-trial/\r\n[lnk-CLI-install]: https://docs.azure.cn/zh-cn/cli/install-azure-cli?view=azure-cli-lastest\r\n[lnk-login-command]: https://docs.azure.cn/zh-cn/cli/get-started-with-azure-cli?view=azure-cli-lastest\r\n[lnk-az-account-command]: https://docs.azure.cn/zh-cn/cli/account?view=azure-cli-latest\r\n[lnk-az-register-command]: https://docs.azure.cn/zh-cn/cli/provider?view=azure-cli-latest\r\n[lnk-az-addcomponent-command]: https://docs.azure.cn/zh-cn/cli/component?view=azure-cli-latest\r\n[lnk-az-resource-command]: https://docs.azure.cn/zh-cn/cli/resource?view=azure-cli-latest\r\n[lnk-az-iot-command]: https://docs.azure.cn/zh-cn/cli/iot?view=azure-cli-latest\r\n[lnk-iot-pricing]: https://www.azure.cn/pricing/details/iot-hub/\r\n[lnk-devguide]: ./iot-hub-devguide.md\r\n[lnk-portal]: ./iot-hub-create-through-portal.md\r\n\r\n<!--Update_Description: update meta data only-->"}