{"Title":"Visual Studio MVC 项目中的 Azure AD 入门","Description":"通过 Visual Studio 连接服务连接到或创建 Azure AD 之后，如何在 MVC 项目中开始使用 Azure Active Directory","Content":"\r\n# <a name=\"getting-started-with-azure-active-directory-and-visual-studio-connected-services-mvc-projects\"></a>开始使用 Azure Active Directory 和 Visual Studio 连接服务（MVC 项目）\r\n> [!div class=\"op_single_selector\"]\r\n>- [入门](./vs-active-directory-dotnet-getting-started.md)\r\n>- [发生了什么情况](./vs-active-directory-dotnet-what-happened.md)\r\n\r\n## <a name=\"requiring-authentication-to-access-controllers\"></a>访问控制器需要身份验证\r\n你项目中的所有控制器均带有 **Authorize** 属性。 此属性要求用户先进行身份验证，然后才能访问这些控制器。 若要允许匿名访问控制器，请从控制器删除此属性。 如果您想要更详细地设置这些权限，请将该属性应用到需要身份验证的每个方法，而不是将它应用到控制器类。\r\n\r\n## <a name=\"adding-signin--signout-controls\"></a>添加 SignIn/SignOut 控件\r\n若要将 SignIn/SignOut 控件添加到视图，可使用 **_LoginPartial.cshtml** 分部视图将该功能添加到某个视图。 下面是已添加到标准 **_Layout.cshtml** 视图的功能示例。 （注意带有 navbar-collapse 类的 div 中的最后一个元素）：\r\n\r\n<pre>\r\n    &lt;!DOCTYPE html&gt; \r\n     &lt;html&gt; \r\n     &lt;head&gt; \r\n         &lt;meta charset=\"utf-8\" /&gt; \r\n        &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; \r\n        &lt;title&gt;@ViewBag.Title - My ASP.NET Application&lt;/title&gt; \r\n        @Styles.Render(\"~/Content/css\") \r\n        @Scripts.Render(\"~/bundles/modernizr\") \r\n    &lt;/head&gt; \r\n    &lt;body&gt; \r\n        &lt;div class=\"navbar navbar-inverse navbar-fixed-top\"&gt; \r\n            &lt;div class=\"container\"&gt; \r\n                &lt;div class=\"navbar-header\"&gt; \r\n                    &lt;button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\".navbar-collapse\"&gt; \r\n                        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; \r\n                        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; \r\n                        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt; \r\n                    &lt;/button&gt; \r\n                    @Html.ActionLink(\"Application name\", \"Index\", \"Home\", new { area = \"\" }, new { @class = \"navbar-brand\" }) \r\n                &lt;/div&gt; \r\n                &lt;div class=\"navbar-collapse collapse\"&gt; \r\n                    &lt;ul class=\"nav navbar-nav\"&gt; \r\n                        &lt;li&gt;@Html.ActionLink(\"Home\", \"Index\", \"Home\")&lt;/li&gt; \r\n                        &lt;li&gt;@Html.ActionLink(\"About\", \"About\", \"Home\")&lt;/li&gt; \r\n                        &lt;li&gt;@Html.ActionLink(\"Contact\", \"Contact\", \"Home\")&lt;/li&gt; \r\n                    &lt;/ul&gt; \r\n                    <span style=\"background-color:yellow\">@Html.Partial(\"_LoginPartial\")</span> \r\n                &lt;/div&gt; \r\n            &lt;/div&gt; \r\n        &lt;/div&gt; \r\n        &lt;div class=\"container body-content\"&gt; \r\n            @RenderBody() \r\n            &lt;hr /&gt; \r\n            &lt;footer&gt; \r\n                &lt;p&gt;&amp;copy; @DateTime.Now.Year - My ASP.NET Application&lt;/p&gt; \r\n            &lt;/footer&gt; \r\n        &lt;/div&gt; \r\n        @Scripts.Render(\"~/bundles/jquery\") \r\n        @Scripts.Render(\"~/bundles/bootstrap\") \r\n        @RenderSection(\"scripts\", required: false) \r\n    &lt;/body&gt; \r\n    &lt;/html&gt;\r\n</pre>\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n- [详细了解 Azure Active Directory](https://www.azure.cn/home/features/identity/)\r\n"}