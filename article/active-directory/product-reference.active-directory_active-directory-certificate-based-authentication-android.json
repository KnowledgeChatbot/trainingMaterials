{"Title":"Android 上 Azure Active Directory 基于证书的身份验证","Description":"了解 Android 设备的解决方案中配置基于证书的身份验证的支持方案和要求","Content":"# <a name=\"azure-active-directory-certificate-based-authentication-on-android\"></a>Android 上 Azure Active Directory 基于证书的身份验证\r\n\r\n\r\n通过基于证书的身份验证 (CBA)，在 Windows、Android 或 iOS 设备上将 Exchange Online 帐户连接到以下对象时，可由 Azure Active Directory 使用客户端证书进行身份验证：\r\n\r\n- Office 移动应用程序，例如 Microsoft Outlook 和 Microsoft Word   \r\n- Exchange ActiveSync (EAS) 客户端\r\n\r\n如果配置了此功能，就无需在移动设备上的某些邮件和 Microsoft Office 应用程序中输入用户名和密码组合。\r\n\r\n本主题面向 Office 365 企业版、商业版、教育版、美国政府计划、中国计划和德国计划中的租户用户，提供在 iOS(Android) 设备上配置 CBA 时的要求和受支持方案。\r\n\r\n\r\n\r\n此功能在 Office 365 US Government Defense 和 Federal 计划中以预览形式提供。\r\n\r\n\r\n## <a name=\"microsoft-mobile-applications-support\"></a>Microsoft 移动应用程序支持\r\n| 应用 | 支持 |\r\n| --- | --- |\r\n| Azure 信息保护应用 |![勾选标记][1] |\r\n| Intune 公司门户 |![勾选标记][1] |\r\n| Microsoft Teams |![勾选标记][1] |\r\n| OneNote |![勾选标记][1] |\r\n| OneDrive |![勾选标记][1] |\r\n| Outlook |![勾选标记][1] |\r\n| Power BI |![勾选标记][1] |\r\n| Skype for Business |![勾选标记][1] |\r\n| Word/Excel/PowerPoint |![勾选标记][1] |\r\n| Yammer |![勾选标记][1] |\r\n\r\n\r\n### <a name=\"implementation-requirements\"></a>实现要求\r\n\r\n设备 OS 版本必须为 Android 5.0 (Lollipop) 及更高版本。\r\n\r\n必须配置联合服务器。  \r\n\r\n若要让 Azure Active Directory 吊销客户端证书，ADFS 令牌必须具有以下声明：  \r\n\r\n- `http://schemas.microsoft.com/ws/2008/06/identity/claims/<serialnumber>`  \r\n  （客户端证书的序列号）\r\n- `http://schemas.microsoft.com/2012/12/certificatecontext/field/<issuer>`  \r\n  （客户端证书颁发者的字符串）\r\n\r\n如果 ADFS 令牌（或任何其他 SAML 令牌）具有这些声明，Azure Active Directory 会将这些声明添加到刷新令牌中。 当需要验证刷新令牌时，此信息可用于检查吊销。\r\n\r\n作为最佳做法，应该使用有关如何获取用户证书的说明来更新 ADFS 错误页。  \r\n有关更多详细信息，请参阅[自定义 AD FS 登录页面](https://technet.microsoft.com/library/dn280950.aspx)。  \r\n\r\n某些 Office 应用（启用了新式身份验证）在请求中向 Azure AD 发送“*prompt=login*”。 默认情况下，Azure AD 会在请求中为 ADFS 将其转换为“*wauth=usernamepassworduri*”（要求 ADFS 执行 U/P 身份验证）和“*wfresh=0*”（要求 ADFS 忽略 SSO 状态并执行全新的身份验证）。 如果想要为这些应用启用基于证书的身份验证，需要修改默认 Azure AD 行为。 只需将联盟域设置中的“PromptLoginBehavior”设置为“已禁用”即可。\r\n可使用 [MSOLDomainFederationSettings](https://docs.microsoft.com/powershell/module/msonline/set-msoldomainfederationsettings?view=azureadps-1.0) cmdlet 执行此任务：\r\n\r\n`Set-MSOLDomainFederationSettings -domainname <domain> -PromptLoginBehavior Disabled`\r\n\r\n\r\n\r\n## <a name=\"exchange-activesync-clients-support\"></a>Exchange ActiveSync 客户端支持\r\n支持 Android 5.0 (Lollipop) 或更高版本上的某些 Exchange ActiveSync 应用程序。 要确定电子邮件应用程序是否支持此功能，请联系应用程序开发人员。\r\n\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n\r\n如果想要在环境中配置基于证书的身份验证，请参阅 [Android 上基于证书的身份验证入门](active-directory-certificate-based-authentication-get-started.md)了解相关说明。\r\n\r\n<!--Image references-->\r\n[1]: ./media/active-directory-certificate-based-authentication-android/ic195031.png\r\n\r\n<!--Update_Description: wording update -->\r\n"}