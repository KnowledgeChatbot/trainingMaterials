{"Title":"264 多比特率 4K 音频 5.1","Description":"本主题概述了 **264 多比特率 4K Audio 5.1** 任务预设。","Content":"# <a name=\"h264-multiple-bitrate-4k-audio-51\"></a>H264 多比特率 4K 音频 5.1\r\n`Media Encoder Standard` 定义一组可在创建编码作业时使用的编码预设。 可使用 `preset name` 指定要将媒体文件编码为哪种格式。 也可以创建自己的 JSON 或基于 XML 的预设（使用 UTF-8 或 UTF-16 编码）。 然后，将自定义预设传递到编码器。 有关此 `Media Encoder Standard` 编码器支持的所有预设名称的列表，请参阅 [Media Encoder Standard 的任务预设](media-services-mes-presets-overview.md)。  \r\n  \r\n 本主题演示 XML 和 JSON 格式的 `H264 Multiple Bitrate 4K Audio 5.1` 预设。  \r\n  \r\n 此预设生成一组 12 个 GOP 对齐的 MP4 文件，范围为 20000 kbps - 1000 kbps，以及 AAC 5.1 音频。 若要深入了解此预设的配置文件、比特率、采样率等，请检查下面定义的 XML 或 JSON。 有关每个元素的含义及其有效值的说明，请参阅 [Media Encoder Standard 架构](media-services-mes-schema.md)。  \r\n  \r\n> [!NOTE]\r\n>  应利用 4K 编码获取“高级版”保留单位类型。 有关详细信息，请参阅[如何缩放编码](/media-services/media-services-scale-media-processing-overview)。  \r\n\r\n> [!NOTE]\r\n>  跨层修改 `Width` 和 `Height` 值时，请确保纵横比保持一致。 例如：1920x1080、1280x720、1080x576、640x360。 不应使用混合纵横比，如 1280x720、720x480、640x360。  \r\n\r\n XML  \r\n  \r\n```  \r\n<?xml version=\"1.0\" encoding=\"utf-16\"?>  \r\n<Preset xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" Version=\"1.0\" xmlns=\"http://www.windowsazure.com/media/encoding/Preset/2014/03\">  \r\n  <Encoding>  \r\n    <H264Video>  \r\n      <KeyFrameInterval>00:00:02</KeyFrameInterval>  \r\n      <H264Layers>  \r\n        <H264Layer>  \r\n          <Bitrate>20000</Bitrate>  \r\n          <Width>4096</Width>  \r\n          <Height>2304</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>20000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>18000</Bitrate>  \r\n          <Width>3840</Width>  \r\n          <Height>2160</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>18000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>16000</Bitrate>  \r\n          <Width>3840</Width>  \r\n          <Height>2160</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>16000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>14000</Bitrate>  \r\n          <Width>3840</Width>  \r\n          <Height>2160</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>14000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>12000</Bitrate>  \r\n          <Width>2560</Width>  \r\n          <Height>1440</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>12000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>10000</Bitrate>  \r\n          <Width>2560</Width>  \r\n          <Height>1440</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>10000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>8000</Bitrate>  \r\n          <Width>2560</Width>  \r\n          <Height>1440</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>8000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>6000</Bitrate>  \r\n          <Width>1920</Width>  \r\n          <Height>1080</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>6000</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>4700</Bitrate>  \r\n          <Width>1920</Width>  \r\n          <Height>1080</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>4700</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>3400</Bitrate>  \r\n          <Width>1280</Width>  \r\n          <Height>720</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>3400</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>2250</Bitrate>  \r\n          <Width>960</Width>  \r\n          <Height>540</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>2250</MaxBitrate>  \r\n        </H264Layer>  \r\n        <H264Layer>  \r\n          <Bitrate>1000</Bitrate>  \r\n          <Width>640</Width>  \r\n          <Height>360</Height>  \r\n          <FrameRate>0/1</FrameRate>  \r\n          <Profile>Auto</Profile>  \r\n          <Level>auto</Level>  \r\n          <BFrames>3</BFrames>  \r\n          <ReferenceFrames>3</ReferenceFrames>  \r\n          <Slices>0</Slices>  \r\n          <AdaptiveBFrame>true</AdaptiveBFrame>  \r\n          <EntropyMode>Cabac</EntropyMode>  \r\n          <BufferWindow>00:00:05</BufferWindow>  \r\n          <MaxBitrate>1000</MaxBitrate>  \r\n        </H264Layer>  \r\n      </H264Layers>  \r\n      <Chapters />  \r\n    </H264Video>  \r\n    <AACAudio>  \r\n      <Profile>AACLC</Profile>  \r\n      <Channels>6</Channels>  \r\n      <SamplingRate>48000</SamplingRate>  \r\n      <Bitrate>384</Bitrate>  \r\n    </AACAudio>  \r\n  </Encoding>  \r\n  <Outputs>  \r\n    <Output FileName=\"{Basename}_{Width}x{Height}_{VideoBitrate}.mp4\">  \r\n      <MP4Format />  \r\n    </Output>  \r\n  </Outputs>  \r\n</Preset>  \r\n```  \r\n  \r\n JSON  \r\n  \r\n```  \r\n{  \r\n  \"Version\": 1.0,  \r\n  \"Codecs\": [  \r\n    {  \r\n      \"KeyFrameInterval\": \"00:00:02\",  \r\n      \"H264Layers\": [  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 20000,  \r\n          \"MaxBitrate\": 20000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 4096,  \r\n          \"Height\": 2304,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 18000,  \r\n          \"MaxBitrate\": 18000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 3840,  \r\n          \"Height\": 2160,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 16000,  \r\n          \"MaxBitrate\": 16000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 3840,  \r\n          \"Height\": 2160,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 14000,  \r\n          \"MaxBitrate\": 14000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 3840,  \r\n          \"Height\": 2160,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 12000,  \r\n          \"MaxBitrate\": 12000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 2560,  \r\n          \"Height\": 1440,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 10000,  \r\n          \"MaxBitrate\": 10000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 2560,  \r\n          \"Height\": 1440,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 8000,  \r\n          \"MaxBitrate\": 8000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 2560,  \r\n          \"Height\": 1440,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 6000,  \r\n          \"MaxBitrate\": 6000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 1920,  \r\n          \"Height\": 1080,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 4700,  \r\n          \"MaxBitrate\": 4700,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 1920,  \r\n          \"Height\": 1080,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 3400,  \r\n          \"MaxBitrate\": 3400,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 1280,  \r\n          \"Height\": 720,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 2250,  \r\n          \"MaxBitrate\": 2250,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 960,  \r\n          \"Height\": 540,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        },  \r\n        {  \r\n          \"Profile\": \"Auto\",  \r\n          \"Level\": \"auto\",  \r\n          \"Bitrate\": 1000,  \r\n          \"MaxBitrate\": 1000,  \r\n          \"BufferWindow\": \"00:00:05\",  \r\n          \"Width\": 640,  \r\n          \"Height\": 360,  \r\n          \"BFrames\": 3,  \r\n          \"ReferenceFrames\": 3,  \r\n          \"AdaptiveBFrame\": true,  \r\n          \"Type\": \"H264Layer\",  \r\n          \"FrameRate\": \"0/1\"  \r\n        }  \r\n      ],  \r\n      \"Type\": \"H264Video\"  \r\n    },  \r\n    {  \r\n      \"Profile\": \"AACLC\",  \r\n      \"Channels\": 6,  \r\n      \"SamplingRate\": 48000,  \r\n      \"Bitrate\": 384,  \r\n      \"Type\": \"AACAudio\"  \r\n    }  \r\n  ],  \r\n  \"Outputs\": [  \r\n    {  \r\n      \"FileName\": \"{Basename}_{Width}x{Height}_{VideoBitrate}.mp4\",  \r\n      \"Format\": {  \r\n        \"Type\": \"MP4Format\"  \r\n      }  \r\n    }  \r\n  ]  \r\n}  \r\n```\r\n"}