{"Title":"通过 Java 上传大文件到媒体服务账号报错","Description":"Java 通过分片的方式上传大文件到媒体服务账号中","Content":"\r\n# 通过 Java 上传大文件到媒体服务账号报错 #\r\n\r\n### 问题现象 ###\r\n\r\n通过 Java 代码上传文件到媒体服务账号中，若上传的文件过大，则会上传失败。\r\n\r\n### 解决方法 ###\r\n\r\n可以选择通过分片的方式进行上传，从而解决该问题，示例代码如下：\r\n\r\n```\r\n// The name of the file as it will exist in your Media Services account.\r\nString fileName = \"xxxxxxxx\";  \r\n// The local file that will be uploaded to your Media Services account.\r\nInputStream input = new FileInputStream(new File(\"D:/Test\" + fileName));\r\nString blobName = fileName;\r\n// Upload the local file to the asset.\r\nuploader.createBlockBlob(fileName, null);        \r\nString blockId;\r\nbyte[] buffer = new byte[1024000];\r\nBlockList blockList = new BlockList();\r\nint bytesRead;        \r\nByteArrayInputStream byteArrayInputStream;\r\nwhile ((bytesRead = input.read(buffer)) > 0) \r\n{\r\n        blockId = UUID.randomUUID().toString();\r\n        byteArrayInputStream = new ByteArrayInputStream(buffer, 0, bytesRead);\r\n        uploader.createBlobBlock(blobName, blockId, byteArrayInputStream);\r\n        blockList.addUncommittedEntry(blockId);\r\n}\r\nuploader.commitBlobBlocks(blobName, blockList);\r\n```"}