{"Title":"Azure 资源管理器模板函数 - 逻辑","Description":"介绍 Azure 资源管理器模板中用于确定逻辑值的函数。","Content":"# <a name=\"logical-functions-for-azure-resource-manager-templates\"></a>用于 Azure 资源管理器模板的逻辑函数\r\n\r\nResource Manager 提供了多个用于在模板中进行比较的函数。\r\n\r\n* [and](#and)\r\n* [bool](#bool)\r\n* [if](#if)\r\n* [not](#not)\r\n* [or](#or)\r\n\r\n## <a name=\"and\"></a>and\r\n`and(arg1, arg2)`\r\n\r\n检查两个参数值是否均为 true。\r\n\r\n### <a name=\"parameters\"></a>parameters\r\n\r\n| 参数 | 必选 | 类型 | 说明 |\r\n|:--- |:--- |:--- |:--- |\r\n| arg1 |是 |布尔值 |第一个值，需检查其是否为 true。 |\r\n| arg2 |是 |布尔值 |第二个值，需检查其是否为 true。 |\r\n\r\n### <a name=\"return-value\"></a>返回值\r\n\r\n如果两个值均为 true，则返回 True；否则返回 False。\r\n\r\n### <a name=\"examples\"></a>示例\r\n\r\n以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/andornot.json)演示如何使用逻辑函数。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"resources\": [ ],\r\n    \"outputs\": {\r\n        \"andExampleOutput\": {\r\n            \"value\": \"[and(bool('true'), bool('false'))]\",\r\n            \"type\": \"bool\"\r\n        },\r\n        \"orExampleOutput\": {\r\n            \"value\": \"[or(bool('true'), bool('false'))]\",\r\n            \"type\": \"bool\"\r\n        },\r\n        \"notExampleOutput\": {\r\n            \"value\": \"[not(bool('true'))]\",\r\n            \"type\": \"bool\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n前述示例的输出为：\r\n\r\n| Name | 类型 | 值 |\r\n| ---- | ---- | ----- |\r\n| andExampleOutput | Bool | False |\r\n| orExampleOutput | Bool | True |\r\n| notExampleOutput | Bool | False |\r\n\r\n要使用 Azure CLI 部署此示例模板，请使用：\r\n\r\n```azurecli\r\naz group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r\n```\r\n\r\n要使用 PowerShell 部署此示例模板，请使用：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r\n```\r\n\r\n## <a name=\"bool\"></a>bool\r\n`bool(arg1)`\r\n\r\n将参数转换为布尔值。\r\n\r\n### <a name=\"parameters\"></a>参数\r\n\r\n| 参数 | 必选 | 类型 | 说明 |\r\n|:--- |:--- |:--- |:--- |\r\n| arg1 |是 |字符串或整数 |要转换为布尔值的值。 |\r\n\r\n### <a name=\"return-value\"></a>返回值\r\n转换后的值的布尔值。\r\n\r\n### <a name=\"examples\"></a>示例\r\n\r\n以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/bool.json)演示如何对字符串或整数使用 bool。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"resources\": [],\r\n    \"outputs\": {\r\n        \"trueString\": {\r\n            \"value\": \"[bool('true')]\",\r\n            \"type\" : \"bool\"\r\n        },\r\n        \"falseString\": {\r\n            \"value\": \"[bool('false')]\",\r\n            \"type\" : \"bool\"\r\n        },\r\n        \"trueInt\": {\r\n            \"value\": \"[bool(1)]\",\r\n            \"type\" : \"bool\"\r\n        },\r\n        \"falseInt\": {\r\n            \"value\": \"[bool(0)]\",\r\n            \"type\" : \"bool\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n上述示例中使用默认值的输出为：\r\n\r\n| 名称 | 类型 | 值 |\r\n| ---- | ---- | ----- |\r\n| trueString | Bool | True |\r\n| falseString | Bool | False |\r\n| trueInt | Bool | True |\r\n| falseInt | Bool | False |\r\n\r\n要使用 Azure CLI 部署此示例模板，请使用：\r\n\r\n```azurecli\r\naz group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/bool.json\r\n```\r\n\r\n要使用 PowerShell 部署此示例模板，请使用：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/bool.json\r\n```\r\n\r\n## <a name=\"if\"></a>if\r\n`if(condition, trueValue, falseValue)`\r\n\r\n根据条件为 true 或 false 返回值。\r\n\r\n### <a name=\"parameters\"></a>Parameters\r\n\r\n| 参数 | 必选 | 类型 | 说明 |\r\n|:--- |:--- |:--- |:--- |\r\n| 条件 |是 |布尔值 |要检查是否为 true 的值。 |\r\n| trueValue |是 | 字符串、int、对象或数组 |条件为 true 时返回的值。 |\r\n| falseValue |是 | 字符串、int、对象或数组 |条件为 false 时返回的值。 |\r\n\r\n### <a name=\"return-value\"></a>返回值\r\n\r\n如果第一个参数为 True，则返回第二个参数；否则返回第三个参数。\r\n\r\n### <a name=\"remarks\"></a>备注\r\n\r\n此函数可用于有条件地设置资源属性。 下面的示例并不是完整的模板，但它显示了有条件地设置可用性集的相关部分。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"parameters\": {\r\n        ...\r\n        \"availabilitySet\": {\r\n            \"type\": \"string\",\r\n            \"allowedValues\": [\r\n                \"yes\",\r\n                \"no\"\r\n            ]\r\n        }\r\n    },\r\n    \"variables\": {\r\n        ...\r\n        \"availabilitySetName\": \"availabilitySet1\",\r\n        \"availabilitySet\": {\r\n            \"id\": \"[resourceId('Microsoft.Compute/availabilitySets',variables('availabilitySetName'))]\"\r\n        }\r\n    },\r\n    \"resources\": [\r\n        {\r\n            \"condition\": \"[equals(parameters('availabilitySet'),'yes')]\",\r\n            \"type\": \"Microsoft.Compute/availabilitySets\",\r\n            \"name\": \"[variables('availabilitySetName')]\",\r\n            ...\r\n        },\r\n        {\r\n            \"apiVersion\": \"2016-03-30\",\r\n            \"type\": \"Microsoft.Compute/virtualMachines\",\r\n            \"properties\": {\r\n                \"availabilitySet\": \"[if(equals(parameters('availabilitySet'),'yes'), variables('availabilitySet'), json('null'))]\",\r\n                ...\r\n            }\r\n        },\r\n        ...\r\n    ],\r\n    ...\r\n}\r\n```\r\n\r\n### <a name=\"examples\"></a>示例\r\n\r\n以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/if.json)演示如何使用 `if` 函数。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"resources\": [\r\n    ],\r\n    \"outputs\": {\r\n        \"yesOutput\": {\r\n            \"type\": \"string\",\r\n            \"value\": \"[if(equals('a', 'a'), 'yes', 'no')]\"\r\n        },\r\n        \"noOutput\": {\r\n            \"type\": \"string\",\r\n            \"value\": \"[if(equals('a', 'b'), 'yes', 'no')]\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n前述示例的输出为：\r\n\r\n| Name | 类型 | 值 |\r\n| ---- | ---- | ----- |\r\n| yesOutput | String | 是 |\r\n| noOutput | String | 否 |\r\n\r\n要使用 Azure CLI 部署此示例模板，请使用：\r\n\r\n```azurecli\r\naz group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/if.json\r\n```\r\n\r\n要使用 PowerShell 部署此示例模板，请使用：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/if.json\r\n```\r\n\r\n## <a name=\"not\"></a>not\r\n`not(arg1)`\r\n\r\n将布尔值转换为其相反值。\r\n\r\n### <a name=\"parameters\"></a>parameters\r\n\r\n| 参数 | 必选 | 类型 | 说明 |\r\n|:--- |:--- |:--- |:--- |\r\n| arg1 |是 |布尔值 |要转换的值。 |\r\n\r\n### <a name=\"return-value\"></a>返回值\r\n\r\n参数为 False 时返回 True。 参数为 True 时返回 False。\r\n\r\n### <a name=\"examples\"></a>示例\r\n\r\n以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/andornot.json)演示如何使用逻辑函数。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"resources\": [ ],\r\n    \"outputs\": {\r\n        \"andExampleOutput\": {\r\n            \"value\": \"[and(bool('true'), bool('false'))]\",\r\n            \"type\": \"bool\"\r\n        },\r\n        \"orExampleOutput\": {\r\n            \"value\": \"[or(bool('true'), bool('false'))]\",\r\n            \"type\": \"bool\"\r\n        },\r\n        \"notExampleOutput\": {\r\n            \"value\": \"[not(bool('true'))]\",\r\n            \"type\": \"bool\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n前述示例的输出为：\r\n\r\n| Name | 类型 | 值 |\r\n| ---- | ---- | ----- |\r\n| andExampleOutput | Bool | False |\r\n| orExampleOutput | Bool | True |\r\n| notExampleOutput | Bool | False |\r\n\r\n要使用 Azure CLI 部署此示例模板，请使用：\r\n\r\n```azurecli\r\naz group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r\n```\r\n\r\n要使用 PowerShell 部署此示例模板，请使用：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r\n```\r\n\r\n以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/not-equals.json)结合使用 not 和 [equals](resource-group-template-functions-comparison.md#equals)。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"resources\": [\r\n    ],\r\n    \"outputs\": {\r\n        \"checkNotEquals\": {\r\n            \"type\": \"bool\",\r\n            \"value\": \"[not(equals(1, 2))]\"\r\n        }\r\n    }\r\n```\r\n\r\n前述示例的输出为：\r\n\r\n| Name | 类型 | 值 |\r\n| ---- | ---- | ----- |\r\n| checkNotEquals | Bool | True |\r\n\r\n要使用 Azure CLI 部署此示例模板，请使用：\r\n\r\n```azurecli\r\naz group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/not-equals.json\r\n```\r\n\r\n要使用 PowerShell 部署此示例模板，请使用：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/not-equals.json\r\n```\r\n\r\n## <a name=\"or\"></a>或\r\n`or(arg1, arg2)`\r\n\r\n检查其中任一参数值是否为 true。\r\n\r\n### <a name=\"parameters\"></a>parameters\r\n\r\n| 参数 | 必选 | 类型 | 说明 |\r\n|:--- |:--- |:--- |:--- |\r\n| arg1 |是 |布尔值 |第一个值，需检查其是否为 true。 |\r\n| arg2 |是 |布尔值 |第二个值，需检查其是否为 true。 |\r\n\r\n### <a name=\"return-value\"></a>返回值\r\n\r\n如果任一值为 true，则返回 True；否则返回 False。\r\n\r\n### <a name=\"examples\"></a>示例\r\n\r\n以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/andornot.json)演示如何使用逻辑函数。\r\n\r\n```json\r\n{\r\n    \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r\n    \"contentVersion\": \"1.0.0.0\",\r\n    \"resources\": [ ],\r\n    \"outputs\": {\r\n        \"andExampleOutput\": {\r\n            \"value\": \"[and(bool('true'), bool('false'))]\",\r\n            \"type\": \"bool\"\r\n        },\r\n        \"orExampleOutput\": {\r\n            \"value\": \"[or(bool('true'), bool('false'))]\",\r\n            \"type\": \"bool\"\r\n        },\r\n        \"notExampleOutput\": {\r\n            \"value\": \"[not(bool('true'))]\",\r\n            \"type\": \"bool\"\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n前述示例的输出为：\r\n\r\n| Name | 类型 | 值 |\r\n| ---- | ---- | ----- |\r\n| andExampleOutput | Bool | False |\r\n| orExampleOutput | Bool | True |\r\n| notExampleOutput | Bool | False |\r\n\r\n要使用 Azure CLI 部署此示例模板，请使用：\r\n\r\n```azurecli\r\naz group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r\n```\r\n\r\n要使用 PowerShell 部署此示例模板，请使用：\r\n\r\n```powershell\r\nNew-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r\n```\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n* 有关 Azure Resource Manager 模板中各部分的说明，请参阅 [Authoring Azure Resource Manager templates](resource-group-authoring-templates.md)（创作 Azure Resource Manager 模板）。\r\n* 若要合并多个模板，请参阅[将链接的模板与 Azure Resource Manager 配合使用](resource-group-linked-templates.md)。\r\n* 若要在创建资源类型时迭代指定的次数，请参阅[在 Azure Resource Manager 中创建多个资源实例](resource-group-create-multiple.md)。\r\n* 若要查看如何部署已创建的模板，请参阅[使用 Azure Resource Manager 模板部署应用程序](resource-group-template-deploy.md)。\r\n\r\n<!--Update_Description: update meta properties, add azure cli and powershell command example block-->"}