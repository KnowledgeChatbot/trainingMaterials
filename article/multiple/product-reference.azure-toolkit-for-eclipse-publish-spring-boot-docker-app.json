{"Title":"使用用于 Eclipse 的 Azure 工具包将 Spring Boot 应用作为 Docker 容器发布","Description":"了解如何使用用于 Eclipse 的 Azure 工具包将 Web 应用作为 Docker 容器发布到 Azure。","Content":"# <a name=\"publish-a-spring-boot-app-as-a-docker-container-by-using-the-azure-toolkit-for-eclipse\"></a>使用用于 Eclipse 的 Azure 工具包将 Spring Boot 应用作为 Docker 容器发布\r\n\r\n[Spring Framework] 是一种开放源代码解决方案，可帮助 Java 开发人员创建企业级应用程序。 基于该平台构建的其中一个更常用的项目是 [Spring Boot]，该项目提供了简化的方法来创建独立的 Java 应用程序。\r\n\r\n[Docker] 是一种开放源代码解决方案，可帮助开发人员自动部署、扩展和管理在容器中运行的应用程序。\r\n\r\n本教程介绍使用用于 Eclipse 的 Azure 工具包将 Spring Boot 应用程序作为 Docker 容器部署到 Azure 的步骤。\r\n\r\n[!INCLUDE [azure-toolkit-for-eclipse-prerequisites](../includes/azure-toolkit-for-eclipse-prerequisites.md)]\r\n\r\n## <a name=\"clone-the-default-spring-boot-docker-repository\"></a>克隆默认 Spring Boot Docker 存储库\r\n\r\n### <a name=\"import-the-public-repository\"></a>导入公共存储库\r\n\r\n以下步骤介绍如何使用 IntelliJ 将 Spring Boot Docker 存储库克隆到本地计算机。\r\n\r\n1. 打开 Eclipse。\r\n\r\n1. 单击“文件” > “导入”。\r\n\r\n   ![文件导入菜单][CL01]\r\n\r\n1. “导入”对话框打开后：\r\n\r\n   a. 展开 Git。\r\n\r\n   b. 选择“来自 Git 的项目”。\r\n   \r\n   c. 单击“下一步”。\r\n\r\n   ![“导入”对话框][CL02]\r\n\r\n1. 在“选择存储库源”页上：\r\n\r\n   a. 选择“克隆 URI”。\r\n   \r\n   b. 单击“下一步”。\r\n\r\n   ![选择\"存储库源\"页][CL03]\r\n\r\n1. 在“源 Git 存储库”页上：\r\n\r\n   a. 对于“URI”，请输入 `https://github.com/spring-guides/gs-spring-boot-docker.git`。 此步骤应该会为“主机”和“存储库路径”字段自动填充正确的值。\r\n   \r\n   b. Spring Boot 存储库是公开的，因此不必输入 Git 用户名和密码。\r\n   \r\n   c. 单击“下一步”。\r\n\r\n   ![“源 Git 存储库”页][CL04]\r\n\r\n1. 在“分支选择”页上，单击“下一步”。\r\n\r\n   ![“分支选择”页][CL05]\r\n\r\n1. 在“本地目标”页上：\r\n\r\n   a. 指定放置本地存储库的本地文件夹。\r\n   \r\n   b. 单击“下一步”。\r\n\r\n   ![“本地目标”页][CL06]\r\n\r\n1. 在“选择用于导入项目的向导”页上：\r\n\r\n   a. 选择“作为常规项目导入”。\r\n   \r\n   b. 单击“下一步”。\r\n\r\n   ![“选择用于导入项目的向导”页][CL07]\r\n\r\n1. 在“导入项目”页上：\r\n\r\n   a. 指定项目名称。\r\n   \r\n   b. 单击“完成” 。\r\n\r\n   ![“导入项目”页][CL08]\r\n\r\n1. 当存储库成功克隆时，可以看到 Eclipse 中列出的所有文件。\r\n\r\n   ![本地存储库][CL09]\r\n\r\n### <a name=\"create-a-maven-project-from-your-local-repository\"></a>从本地存储库创建 Maven 项目\r\n\r\nSpring Boot Docker 存储库包含一个已完成的 Maven 项目，可用于本教程。 \r\n\r\n1. 单击“文件” > “导入”。\r\n\r\n   ![“文件”菜单上的“导入”命令][CL01]\r\n\r\n1. “导入”对话框打开后：\r\n\r\n   a. 展开 Maven。\r\n   \r\n   b. 选择“现有 Maven 项目”。\r\n   \r\n   c. 单击“下一步”。\r\n\r\n   ![“导入”对话框][MV01]\r\n\r\n1. 在“Maven 项目”页上：\r\n\r\n   a. 对于“根目录”，在本地存储库中指定“complete”文件夹。\r\n   \r\n   b. 展开“高级”部分，并为“名称模板”输入自定义名称。\r\n   \r\n   c. 选择项目中 pom.xml 文件对应的框。\r\n   \r\n   d.单击“下一步”。 单击“完成” 。\r\n\r\n   ![“Maven 项目”页][MV02]\r\n\r\n1. 当 Maven 项目成功打开后，可以看到 Eclipse 中列出了第二个项目。\r\n\r\n   ![本地 Maven 项目][MV03]\r\n\r\n## <a name=\"build-your-spring-boot-app-by-using-maven\"></a>使用 Maven 生成 Spring Boot 应用程序\r\n\r\n1. 在 Eclipse 项目资源管理器中，选择“Maven 项目”。\r\n\r\n1. 单击“运行” > “运行方式” > “Maven 生成”。\r\n\r\n   ![以 Maven 生成方式运行的命令][BU01]\r\n\r\n1. 成功生成应用程序后，控制台窗口会显示状态。\r\n\r\n   ![Maven 生成成功][BU02]\r\n\r\n## <a name=\"publish-your-web-app-to-azure-by-using-a-docker-container\"></a>使用 Docker 容器将 Web 应用发布到 Azure\r\n\r\n1. 在 Eclipse 项目资源管理器中，选择“Maven 项目”。\r\n\r\n1. 单击 Azure 的“发布”菜单，然后单击“发布为 Docker 容器”。\r\n\r\n   ![“发布为 Docker 容器”命令][PU01]\r\n\r\n1. 出现“在 Azure 上部署 Docker 容器”对话框时：\r\n\r\n   a. 输入自定义的 Docker 映像名称。\r\n   \r\n   b. 对于“要部署的项目”，指定刚生成的 gs-spring-boot-docker-0.1.0.jar 文件的路径。\r\n\r\n   ![指定 Docker 选项][PU02]\r\n\r\n   现在显示所有现有的 Docker 主机。 \r\n\r\n1. 如果选择部署到现有主机，可以跳到步骤 5。 否则，使用以下步骤创建主机：\r\n\r\n   a. 单击“添加” 。\r\n\r\n      ![添加新的 Docker 主机][PU03]\r\n\r\n   b. 当显示“创建 Docker 主机”对话框时，可以选择接受默认设置，也可以为新的 Docker 主机指定任何自定义设置。 （有关各种设置的详细说明，请参阅[使用用于 IntelliJ 的 Azure 工具包将 Web 应用发布为 Docker 容器][Publish Container with Azure Toolkit]。）在指定了要使用的设置后，单击“下一步”。\r\n\r\n      ![指定 Docker 主机选项][PU04]\r\n\r\n   c. 可以选择使用 Azure Key Vault 中的现有登录凭据，也可以选择输入新的 Docker 登录凭据。 在指定了选项后单击“完成”。\r\n\r\n      ![指定 Docker 主机凭据][PU05]\r\n\r\n1. 选择 Docker 主机，然后单击“下一步”。\r\n\r\n   ![选择要使用的 Docker 主机][PU06]\r\n\r\n1. 在“在 Azure 上部署 Docker 容器”对话框的最后一页上，指定以下选项：\r\n\r\n   a. 可以选择为要托管 Docker 容器的容器指定一个自定义名称，也可以接受默认设置。\r\n\r\n   b. 使用以下语法输入 Docker 主机的 TCP 端口：[外部端口]:[内部端口]。 例如，“80:8080”指定外部端口为“80”，默认的内部 Spring Boot 端口为“8080”。\r\n   \r\n      如果已自定义内部端口（例如通过编辑 application.yml 文件进行自定义），则需指定端口号，以便在 Azure 中进行正确路由。\r\n\r\n   c. 在配置这些选项后，单击“完成”。\r\n\r\n   ![在 Azure 上部署 Docker 容器][PU07]\r\n\r\n1. Azure 工具包完成发布后，Azure 活动日志显示状态为“已发布”。\r\n\r\n   ![已成功部署 Docker 主机][PU08]\r\n\r\n## <a name=\"next-steps\"></a>后续步骤\r\n\r\n[!INCLUDE [azure-toolkit-additional-resources](../includes/azure-toolkit-additional-resources.md)]\r\n\r\n<!-- URL List -->\r\n\r\n[Azure Management Portal]: https://manage.windowsazure.cn\r\n[Docker]: https://www.docker.com/\r\n[Publish Container with Azure Toolkit]: ./azure-toolkit-for-intellij-publish-as-docker-container.md\r\n[Spring Boot]: http://projects.spring.io/spring-boot/\r\n[Spring Framework]: https://spring.io/\r\n\r\n<!-- IMG List -->\r\n\r\n[CL01]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL01.png\r\n[CL02]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL02.png\r\n[CL03]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL03.png\r\n[CL04]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL04.png\r\n[CL05]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL05.png\r\n[CL06]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL06.png\r\n[CL07]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL07.png\r\n[CL08]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL08.png\r\n[CL09]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/CL09.png\r\n\r\n[MV01]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/MV01.png\r\n[MV02]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/MV02.png\r\n[MV03]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/MV03.png\r\n\r\n[BU01]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/BU01.png\r\n[BU02]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/BU02.png\r\n\r\n[PU01]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU01.png\r\n[PU02]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU02.png\r\n[PU03]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU03.png\r\n[PU04]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU04.png\r\n[PU05]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU05.png\r\n[PU06]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU06.png\r\n[PU07]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU07.png\r\n[PU08]: ./media/azure-toolkit-for-eclipse-publish-spring-boot-docker-app/PU08.png\r\n\r\n"}