{"Title":"VS2017 直接使用账户登录 Azure","Description":"VS2017 直接使用账户登录 Azure","Content":"\r\n# VS2017 直接使用账户登录 Azure\r\n\r\n## **问题描述**\r\n\r\n目前使用 Visual Studio 2017 时，无法使用世纪互联运营的 Azure 账户登录管理 VS 的资源管理器，也不能像 VS2015 Update3 那样修改注册表或者设置同步参数来修复。\r\n\r\n## **解决方案**\r\n\r\n以下两种方式均可实现在 VS2017 中登录中国区 Azure 账户。\r\n\r\n- 手动添加配置文件：\r\n\r\n    1. 首先，需要安装 Azure .NET SDK for VS 2017。\r\n\r\n    2. 安装成功后，关闭 Visual Studio 2017，然后到 `C:\\Users\\<user name>\\AppData\\Local\\.IdentityService\\AadConfigurations` 目录下，如果没有 AadConfigurations 目录，则新建该目录，之后将<a href=\"./media/aog-portal-management-qa-vs2017-login/AadProvider.Configuration.json\" download target=\"_blank\">此 Json 配置文件</a>下载到该文件夹下。\r\n\r\n    3. 之后开启 Visual Studio 2017，参考以下截图，管理账户和订阅。\r\n\r\n        ![manage-subscriptions](./media/aog-portal-management-qa-vs2017-login/manage-subscriptions.jpg)\r\n\r\n    4. 点开后，在第一个选项卡界面选择添加账户，之后就可以登录 Azure 账户了。\r\n\r\n        ![add-account](./media/aog-portal-management-qa-vs2017-login/add-account.jpg)\r\n\r\n    5. 要用回国际版的 Azure 账户，把 C:\\Users\\<user name>\\AppData\\Local\\.IdentityService\\AadConfigurations 目录删除即可。\r\n\r\n- 运行 extension 文件，自动添加配置文件：\r\n\r\n    1. 首先，需要安装 Azure .NET SDK for VS 2017。\r\n\r\n    2. 安装成功后，关闭 Visual Studio 2017，下载 <a href=\"./media/aog-portal-management-qa-vs2017-login/AzureEnvironmentSelector.vsix\" download target=\"_blank\"> extension </a>文件。\r\n\r\n    3. 双击运行下载好的 extension 文件。\r\n\r\n        ![Capture](./media/aog-portal-management-qa-vs2017-login/Capture.png)\r\n\r\n    4. 安装结束点击 Close。\r\n\r\n        ![Capture1](./media/aog-portal-management-qa-vs2017-login/Capture1.png)\r\n\r\n    5. 开启 Visual Studio 2017，点击工具，选择 Azure Environment Selector。\r\n\r\n        ![azure-environment-selector](./media/aog-portal-management-qa-vs2017-login/azure-environment-selector.png)\r\n\r\n    6. 选择 Azure China\r\n\r\n        ![azure-china](./media/aog-portal-management-qa-vs2017-login/azure-china.png)\r\n\r\n    7. 点击 Restart\r\n\r\n        ![restart](./media/aog-portal-management-qa-vs2017-login/restart.png)\r\n\r\n    8. 配置成功，即可以成功登录中国的订阅账号。\r\n\r\n        ![success](./media/aog-portal-management-qa-vs2017-login/success.png)\r\n\r\n## **参考文档**\r\n\r\n[中国区 Azure 应用程序开发说明](/articles/developerdifferences)\r\n"}