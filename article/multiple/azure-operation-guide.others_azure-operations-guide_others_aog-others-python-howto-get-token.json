{"Title":"如何通过 Python 获取 Token 操作资源","Description":"如何通过 Python 获取 Token 操作资源","Content":"# 如何通过 Python 获取 Token 操作资源\r\n\r\n在使用 Python SDK 操作 Azure 资源时，首先需要获取认证的 Token，然后才能对资源的做进一步的操作。本文分别介绍了基于 Azure AD 和 Azure 账户名和密码两种获取 Token 的方式，实现 managerClient 对象的创建，进而操作 Azure 资源。\r\n\r\n## Azure AD 方式\r\n\r\n```\r\nimport azure.mgmt.resource\r\nimport azure.mgmt.network\r\nfrom msrestazure.azure_active_directory import AADTokenCredentials, ServicePrincipalCredentials\r\n\r\nGROUP_NAME = 'yutaopythonresourcetest1'\r\nREGION = 'chinanorth' #option value: chinaeast, chinanorth\r\n\r\nclient_id = '16a94c84-c6ba-4f19-aa48-3353f8ffe18e'\r\nclient_secret = '123456'\r\ntenant_id = 'b388b808-0ec9-4a09-a414-a7cbbd8b711b'\r\nsubscription_id = 'e0fbea86-6cf2-4b2d-81e2-9c59f4f96b33'\r\n\r\ncredentials = ServicePrincipalCredentials(client_id,client_secret,tenant=tenant_id,china='true')\r\n\r\nresource_client = azure.mgmt.resource.ResourceManagementClient(credentials, subscription_id,base_url='https://management.chinacloudapi.cn')\r\n\r\nresource_group_params = {'location':REGION}\r\n\r\n# create a resource group\r\nresult = resource_client.resource_groups.create_or_update(\r\n    GROUP_NAME,\r\n    resource_group_params\r\n)\r\n```\r\n\r\n## 账户名--密码方式\r\n\r\n```\r\nfrom azure.common.credentials import UserPassCredentials\r\nfrom azure.mgmt.resource import ResourceManagementClient\r\n\r\ncredentials = UserPassCredentials('test@microsoftinternal.partner.onmschina.cn', '123456',china = 'true')\r\nsubscription_id = 'e0fbea86-6cf2-4b2d-81e2-9c59f4f96b33'\r\n\r\nresource_client = ResourceManagementClient(credentials, subscription_id,base_url='https://management.chinacloudapi.cn')\r\n\r\nresource_group_name = 'my_resource_group'\r\n\r\nresource_client.resource_groups.create_or_update(\r\n    resource_group_name,\r\n    {\r\n        'location':'chinanorth'\r\n    }\r\n)\r\n```\r\n\r\n## 更多信息参考链接\r\n\r\n- [Azure SDK for Python](http://azure-sdk-for-python.readthedocs.io/en/latest/)\r\n- [Azure SDK for Python - GitHub](https://github.com/Azure/azure-sdk-for-python)\r\n"}