如何向管理员组添加用户？\n\n下面是向管理员组添加用户的方法：\n\n1.  登录到 [Azure 门户](https://portal.azure.cn/)。\n2.  转到具有要更新的 API 管理实例的资源组。\n3.  在 API 管理中，将 API 管理参与者角色分配给该用户。\n\n现在，新添加的参与者可以使用 Azure PowerShell [cmdlet](https://msdn.microsoft.com/library/mt613507.aspx)。 下面是以管理员身份登录的方法：\n\n1.  使用 `Login-AzureRmAccount -Environment $(Get-AzureRmEnvironment -Name AzureChinaCloud)` cmdlet 登录。\n2.  使用 `` 将上下文设置为具有该服务的订阅。\n3.  使用 `` 获取单一登录 URL。\n4.  使用 URL 访问管理门户。\n\n### 想要添加的策略为何在策略编辑器中不可用？\n\n如果要添加的策略在策略管理器中显示为变暗或有阴影，请确保你处于该策略的正确范围内。 每个策略声明都设计为在特定范围和策略部分中使用。 若要查看策略部分和策略范围，请参阅 [API 管理策略](https://msdn.microsoft.com/library/azure/dn894080.aspx)中的策略的用法部分。\n\n### 如何在 API 管理中使用 API 版本控制？\n\n有几种选项可用于在 API 管理中使用 API 版本控制：\n\n*   在 API 管理中，可将 API 配置为表示不同版本。 例如，可具有两个不同的 API，MyAPIv1 和 MyAPIv2。 开发人员可选择其要使用的版本。\n*   还可使用不包含版本段的服务 URL 配置 API，例如 [https://my.api。](https://my.api。/) 然后，在每个操作的[重写 URL](https://msdn.microsoft.com/library/azure/dn894083.aspx#RewriteURL) 模板上配置版本段。 例如，可使操作带有名为 /resource 的 [URL 模板](https://docs.azure.cn/api-management/api-management-howto-add-operations#url-template)和名为 /v1/Resource 的[重写 URL](https://docs.azure.cn/api-management/api-management-howto-add-operations#rewrite-url-template) 模板。 可为每个操作单独更改版本段值。\n*   如果希望在 API 的服务 URL 中保留"默认"版本段，请在选定操作上设置使用[设置后端服务](https://msdn.microsoft.com/library/azure/dn894083.aspx#SetBackendService)策略的策略以更改后端请求路径。\n\n### 如何在单个 API 中设置多个环境？\n\n若要在单个 API 中设置多个环境（例如，一个测试环境和一个生产环境），则有两个选项。 可以：\n\n*   在同一租户上托管不同的 API。\n*   在不同租户上托管相同的 API。\n\n### 是否可将 SOAP 用于 API 管理？\n\n当前已提供 [SOAP 传递](http://blogs.msdn.microsoft.com/apimanagement/2016/10/13/soap-pass-through/)支持。 管理员可以导入其 SOAP 服务的 WSDL，以便 Azure API 管理创建一个 SOAP 前端。 开发人员门户文档、测试控制台、策略和分析都可用于 SOAP 服务。\n\n### API 管理网关 IP 地址是否不变？ 是否可以在防火墙规则中使用它？\n\n在标准层和高级层中，API 管理租户的公共 IP 地址 (VIP) 在租户生存期内是静态的，但有一些例外。 IP 地址在以下情况下更改：\n\n*   服务被删除并重新创建。\n*   服务订阅被[暂停](https://github.com/Azure/azure-resource-manager-rpc/blob/master/v1.0/subscription-lifecycle-api-reference.md#subscription-states)或[警告](https://github.com/Azure/azure-resource-manager-rpc/blob/master/v1.0/subscription-lifecycle-api-reference.md#subscription-states)（例如，由于未付款），然后被恢复。\n*   添加或删除 Azure 虚拟网络（只能在开发人员层和高级层使用虚拟网络）。\n\n对于多区域部署，仅当区域先空出然后恢复时，区域地址会更改（只能在高级层使用多区域部署）。\n\n对于为多区域部署配置的高级层租户，每个区域分配一个公共 IP 地址。\n\n可在 Azure 门户中的租户页面上获取一个 IP 地址（或者在多区域部署中获取多个 IP 地址）。\n\n### 是否可以使用 AD FS 安全配置 OAuth 2.0 授权服务器？\n\n若要了解如何使用 Active Directory 联合身份验证服务 (AD FS) 安全配置 OAuth 2.0 授权服务器，请参阅[在 API 管理中使用 ADFS](https://phvbaars.wordpress.com/2016/02/06/using-adfs-in-api-management/)。\n\n### 向多个地理位置进行部署时，API 管理使用何种路由方法？\n\n向多个地理位置进行部署时，API 管理使用[性能流量路由方法](https://docs.azure.cn/traffic-manager/traffic-manager-routing-methods#priority)。 传入流量将路由到最近的 API 网关。 如果一个区域处于脱机状态，则传入流量会自动路由到下一个最近的网关。 在[流量管理器路由方法](https://docs.azure.cn/traffic-manager/traffic-manager-routing-methods)中了解有关路由方法的详细信息。\n\n### 是否可以使用 Azure 资源管理器模板创建 API 管理服务实例？\n\n是的。 请参阅 [Azure API 管理服务](http://aka.ms/apimtemplate)快速入门模板。\n\n### 是否可以为后端使用自签名 SSL 证书？\n\n是的。 可以通过 PowerShell 或直接提交到 API 来完成此操作。 这将禁用证书链验证，并将允许在从 API 管理与后端服务进行通信时使用自签名或私人签名证书。\n\n#### Powershell 方法\n\n使用 [`New-AzureRmApiManagementBackend`](https://docs.microsoft.com/en-us/powershell/module/azurerm.apimanagement/new-azurermapimanagementbackend)（适用于新后端）或 [`Set-AzureRmApiManagementBackend`](https://docs.microsoft.com/en-us/powershell/module/azurerm.apimanagement/set-azurermapimanagementbackend)（适用于现有后端）PowerShell cmdlet 并将 `-SkipCertificateChainValidation` 参数设置设为 `True`。 \n\n`$context = New-AzureRmApiManagementContext -resourcegroup 'ContosoResourceGroup' -servicename 'ContosoAPIMService' New-AzureRmApiManagementBackend -Context $context -Url 'https://contoso.com/myapi' -Protocol http -SkipCertificateChainValidation $true `\n\n#### 直接 API 更新方法\n\n1.  使用 API 管理创建[后端](https://msdn.microsoft.com/library/azure/dn935030.aspx)实体。 \n2.  将"skipCertificateChainValidation"属性设置为"true"。 \n3.  如果不再希望允许自签名证书，请删除后端实体，或将"skipCertificateChainValidation"属性设置为"false"。\n\n### 为何在尝试克隆 Git 存储库时出现身份验证失败？\n\n如果使用 Git 凭据管理器，或者正在尝试使用 Visual Studio 克隆 Git 存储库，可能遇到"Windows 凭据"对话框的已知问题。 该对话框将密码长度限制为 127 个字符，并截断 Microsoft 生成的密码。 我们正致力于缩短密码。 目前请使用 Git Bash 克隆 Git 存储库。\n\n### API 管理是否适用于 Azure ExpressRoute？\n\n是的。 API 管理适用于 Azure ExpressRoute。\n\n### 为什么在资源管理器模式的 VNET 中部署 API 管理时需要专用子网？\n\nAPI 管理需要专用子网，因为它建立在经典（PAAS V1 层）部署模型之上。 虽然也可以在资源管理器 VNET（V2 层）中进行部署，但这样会导致后续问题。 Azure 中的经典部署模型与资源管理器模型结合不紧密，因此如果在 V2 层中创建资源，V1 层会毫不知情，这样会发生问题，例如 API 管理会尝试使用已经分配给 NIC（在 V2 上构建）的 IP。 若要深入了解 Azure 中经典模型和资源管理器模型的差异，请参阅[部署模型的差异](https://docs.azure.cn/azure-resource-manager/resource-manager-deployment-model)。\n\n### 在 VNET 中部署 API 管理时所需的最小子网大小是多少？\n\n部署 API 管理所需的最小子网大小为 [/29](https://docs.azure.cn/virtual-network/virtual-networks-faq#configuration)，这是 Azure 支持的最小子网大小。\n\n### 是否可将 API 管理服务从一个订阅移到另一个订阅？\n\n是的。 要了解操作方法，请参阅[将资源移动到新资源组或订阅](https://docs.azure.cn/azure-resource-manager/resource-group-move-resources)。\n\n### 导入 API 是否存在限制或已知问题？\n\n[Open API(Swagger)、WSDL 和 WADL 格式的已知问题和限制](https://docs.azure.cn/api-management/api-management-api-import-restrictions)。\n