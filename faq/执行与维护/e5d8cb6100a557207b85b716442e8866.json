{"Questions":["什么是可用性集？如何使用可用性集提高应用的可用性？","可用性集是什么？","什么是更新域和故障域？","怎样提高应用的可用性？","如何提高应用的可用性？"],"Answer":"这里有两个非常重要的概念：故障域(Fault Domain)和更新域(Update Domain)。[http://blogs.technet.com/b/yungchou/archive/2011/05/16/window-azure-fault-domain-and-update-domain-explained-for-it-pros.aspx](http://blogs.technet.com/b/yungchou/archive/2011/05/16/window-azure-fault-domain-and-update-domain-explained-for-it-pros.aspx)先说故障域。举个例子，我的书房有一个插线板，插线板上接了我的笔记本电脑，手机充电器，电视机等电器。如果这个插线板断电了，那这个插线板上的所有电器都会断电。这个插线板和上面的电器组成了一个故障域。Azure 数据中心基础设施由很多的 RACK 组成，每一个 RACK 都被称为故障域。当 RACK 出现硬件故障时候，在 RACK 上的服务，不管是 Azure 的计算服务、存储服务等等都会宕机 。当客户部署了2台 Azure Virtual Machine，但是没有设置可用性集的时候，Azure 可能会把这2个 Azure Virtual Machine 部署在同一个 RACK 上，这样就可能会出现单点故障。因为这 1个 RACK 宕机了，上面运行的2个 Azure Virtual Machine 都会宕机。两个 Azure Virtual Machine 宕机的概率和一个 Azure Virtual Machine 的概率是一样。而设置了可用性集的情况下，Azure 就会把这2台 Azure Virtual Machine 部署在2个不同的 RACK 上。从数据中心底层设计上，可以保证这2个不同的 RACK 不会同时宕机。然后来看更新域。比如我有2台 Azure Virtual Machine 做了负载均衡，名称为 VM1 和VM2，都部署了我的 Web Application，版本为1.0，他们部署在不同的更新域 Update Domain 中。 将来我的软件版本做了更新，升级到了2.0版本，有两种选择：*   用户同时更新这2台 Azure Virtual Machine 的软件版本。但是这样如果有客户端发起请求，会造成服务器端的无法响应。*   Azure Fabric Controller 监控这2台 Azure Virtual Machine。首先更新 Update Domain 0 中的虚拟机软件。更新完毕后再更新 Update Domain 1 中的虚拟机软件，一直到所有的 Azure Virtual Machine 中的 Web Application 更新完毕，这样保证在同一时刻至少有1台 Azure Virtual Machine 能够响应客户端的请求。"}