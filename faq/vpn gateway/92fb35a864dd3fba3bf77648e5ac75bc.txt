为什么使用 BGP？\n\nBGP 是可用于 Azure 基于路由的 VPN 网关的可选功能。在启用此功能之前，你还应确保本地 VPN 设备支持 BGP。你可以继续使用不带 BGP 的 Azure VPN 网关和本地 VPN 设备。它等效于在你的网络与 Azure 之间使用静态路由（不带 BGP）与使用带 BGP 的动态路由。\n\n使用 BGP 有几个优点和新功能：\n\n#### 支持自动和灵活的前缀更新\n\n使用 BGP，你只需通过 IPsec S2S VPN 隧道为特定 BGP 对等节点声明最小前缀。它最小可为本地 VPN 设备的 BGP 对等节点 IP 地址的主机前缀（/32）。你可以控制要将哪些本地网络前缀播发到 Azure 以允许 Azure 虚拟网络访问。\n\n你还可以播发更大的前缀，可以包括一些 VNet 地址前缀，如大型专用 IP 地址空间（例如，10.0.0.0/8）。但请注意，这些前缀不能与任一 VNet 前缀相同。与 VNet 前缀相同的这些路由将被拒绝。\n\n\nImportant\n\n目前，向 Azure VPN 网关播发默认路由 (0.0.0.0/0) 将被阻止。启用此功能后，将提供进一步更新。\n\n\n#### 支持 VNet 与本地站点之间的多个隧道基于 BGP 自动进行故障转移\n\n你可以在同一位置的 Azure VNet 和本地 VPN 设备之间建立多个连接。在主-主配置中，此功能在两个网络之间提供多个隧道（路径）。如果其中一个隧道断开连接，则将通过 BGP 撤消相应的路由，流量将会自动转移到其余隧道。\n\n下图显示了此高度可用设置的简单示例：\n\n#### 支持本地网络与多个 Azure VNet 之间的传输路由\n\nBGP 使多个网关可以从不同网络获知和传播前缀，而无论它们是直接还是间接连接。这可以为本地站点之间或跨多个 Azure 虚拟网络的 Azure VPN 网关启用传输路由。\n\n下图显示了多跃点拓扑的示例，其中的多个路径可以通过 Microsoft 网络中的 Azure VPN 网关在两个本地网络之间传输流量：\n\n## BGP 常见问题\n\n