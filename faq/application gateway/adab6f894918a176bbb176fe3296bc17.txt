问：应用程序网关支持哪些最新的加密套件？\n\n应用程序网关当前支持以下密码套件。 请访问[在应用程序网关上配置 SSL 策略版本和密码套件](https://docs.azure.cn/application-gateway/application-gateway-configure-ssl-policy-powershell)，了解如何自定义 SSL 选项。\n\n*   TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384\n*   TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\n*   TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA\n*   TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA\n*   TLS_DHE_RSA_WITH_AES_256_GCM_SHA384\n*   TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\n*   TLS_DHE_RSA_WITH_AES_256_CBC_SHA\n*   TLS_DHE_RSA_WITH_AES_128_CBC_SHA\n*   TLS_RSA_WITH_AES_256_GCM_SHA384\n*   TLS_RSA_WITH_AES_128_GCM_SHA256\n*   TLS_RSA_WITH_AES_256_CBC_SHA256\n*   TLS_RSA_WITH_AES_128_CBC_SHA256\n*   TLS_RSA_WITH_AES_256_CBC_SHA\n*   TLS_RSA_WITH_AES_128_CBC_SHA\n*   TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\n*   TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\n*   TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384\n*   TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256\n*   TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA\n*   TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA\n*   TLS_DHE_DSS_WITH_AES_256_CBC_SHA256\n*   TLS_DHE_DSS_WITH_AES_128_CBC_SHA256\n*   TLS_DHE_DSS_WITH_AES_256_CBC_SHA\n*   TLS_DHE_DSS_WITH_AES_128_CBC_SHA\n*   TLS_RSA_WITH_3DES_EDE_CBC_SHA\n*   TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA\n\n问：应用程序网关是否也支持重新加密发往后端的流量？\n\n是的，应用程序网关支持 SSL 卸载和端到端 SSL，因此支持重新加密发往后端的流量。\n\n问：是否可以配置 SSL 策略来控制 SSL 协议版本？\n\n是的，可将应用程序网关配置为拒绝 TLS1.0、TLS1.1 和 TLS1.2。 SSL 2.0 和 3.0 默认已禁用，并且不可配置。\n\n问：我是否可以配置密码套件和策略顺序？\n\n是，支持[配置密码套件](https://docs.azure.cn/application-gateway/application-gateway-ssl-policy-overview)。 定义自定义策略时，必须至少启用以下其中一个密码套件。 应用程序网关使用 SHA256 进行后端管理。\n\n*   TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 \n*   TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256\n*   TLS_DHE_RSA_WITH_AES_128_GCM_SHA256\n*   TLS_RSA_WITH_AES_128_GCM_SHA256\n*   TLS_RSA_WITH_AES_256_CBC_SHA256\n*   TLS_RSA_WITH_AES_128_CBC_SHA256\n\n问：支持多少个 SSL 证书？\n\n最多支持 20 个 SSL 证书。\n\n问：支持使用多少个身份验证证书进行后端重新加密？\n\n最多支持 10 个身份验证证书，默认为 5 个。\n\n问：应用程序网关是否原生与 Azure Key Vault 集成？\n\n不是，它没有与 Azure Key Vault 集成。\n\n## Web 应用程序防火墙 (WAF) 配置\n\n问：WAF SKU 是否提供标准 SKU 所提供的全部功能？\n\n是的，WAF 支持标准 SKU 中的所有功能。\n\n问：应用程序网关支持哪个 CRS 版本？\n\n应用程序网关支持 CRS [2.2.9](https://docs.azure.cn/application-gateway/application-gateway-crs-rulegroups-rules#owasp229) 和 CRS [3.0](https://docs.azure.cn/application-gateway/application-gateway-crs-rulegroups-rules#owasp30)。\n\n问：如何监视 WAF？\n\n可通过诊断日志记录监视 WAF。有关诊断日志记录的详细信息，请参阅 [Diagnostics Logging and Metrics for Application Gateway](https://docs.azure.cn/application-gateway/application-gateway-diagnostics)（应用程序网关的诊断日志记录和指标）\n\n问：检测模式是否会阻止流量？\n\n不会。检测模式仅记录触发了 WAF 规则的流量。\n\n问：如何自定义 WAF 规则？\n\n是的，WAF 规则可自定义，有关如何自定义这些规则的详细信息，请访问[自定义 WAF 规则组和规则](https://docs.azure.cn/application-gateway/application-gateway-customize-waf-rules-portal)\n\n问：目前支持哪些规则？\n\nWAF 目前支持 CRS [2.2.9](https://docs.azure.cn/application-gateway/application-gateway-crs-rulegroups-rules#owasp229) 和 CRS [3.0](https://docs.azure.cn/application-gateway/application-gateway-crs-rulegroups-rules#owasp30)，这些规则针对开放 Web 应用程序安全项目 (OWASP) 识别到的 10 大漏洞中的大多数漏洞提供基准安全要求，相关信息请参阅 [OWASP top 10 Vulnerabilities](https://www.owasp.org/index.php/Top10#OWASP_Top_10_for_2013)（OWASP 10 大漏洞）\n\n*   \n\nSQL 注入保护\n\n*   \n\n跨站点脚本保护\n\n*   \n\n常见 Web 攻击保护，例如命令注入、HTTP 请求走私、HTTP 响应拆分和远程文件包含攻击\n\n*   \n\n防止 HTTP 协议违反行为\n\n*   \n\n防止 HTTP 协议异常行为，例如缺少主机用户代理和接受标头\n\n*   \n\n防止自动程序、爬网程序和扫描程序\n\n*   \n\n检测常见应用程序错误配置（即 Apache、IIS 等）\n\n问：WAF 是否也支持 DDoS 防护？\n\n否，WAF 不提供 DDoS 防护。\n\n## 诊断和日志记录\n\n问：应用程序网关可以使用哪些类型的日志？\n\n应用程序网关可以使用三种日志。 有关这些日志和其他诊断功能的详细信息，请访问[应用程序网关的后端运行状况、诊断日志和指标](https://docs.azure.cn/application-gateway/application-gateway-diagnostics)。\n\n*   ApplicationGatewayAccessLog：访问日志包含提交到应用程序网关前端的每个请求。 数据包括调用方的 IP、请求的 URL、响应延迟、返回代码，以及传入和传出的字节数。每隔 300 秒会收集一次访问日志。 此日志包含每个应用程序网关实例的一条记录。\n*   ApplicationGatewayPerformanceLog：性能日志捕获每个实例的性能信息，包括提供的请求总数、吞吐量（以字节为单位）、失败的请求计数、正常和不正常的后端实例计数。\n*   ApplicationGatewayFirewallLog：防火墙日志包含通过应用程序网关（配置有 Web 应用程序防火墙）的检测或阻止模式记录的请求。\n\n问：如何知道后端池成员是否正常？\n\n可以使用 PowerShell cmdlet `Get-AzureRmApplicationGatewayBackendHealth`，或者在门户中访问[应用程序网关诊断](https://docs.azure.cn/application-gateway/application-gateway-diagnostics)来验证运行状况\n\n问：什么是诊断日志的保留策略？\n\n诊断日志发往客户存储帐户，客户可以根据偏好设置保留策略。 此外，可将诊断日志发送到事件中心或 Log Analytics。 有关详细信息，请访问 [Application Gateway Diagnostics](https://docs.azure.cn/application-gateway/application-gateway-diagnostics)（应用程序网关诊断）。\n\n问：如何获取应用程序网关的审核日志？\n\n应用程序网关有相应的审核日志。 在门户上的应用程序网关菜单边栏选项卡中单击"活动日志"即可访问审核日志。 \n\n问：是否可以使用应用程序网关设置警报？\n\n可以，应用程序网关确实支持警报。可以基于指标设置警报。 应用程序网关目前提供"吞吐量"指标，可以使用它来配置警报。 \n\n问：后端运行状况返回未知状态，什么原因导致此状态？\n\n最常见的原因是访问的后端被 NSG 或自定义 DNS 阻止。 有关详细信息，请访问 [Backend health, diagnostics logging, and metrics for Application Gateway](https://docs.azure.cn/application-gateway/application-gateway-diagnostics)（应用程序网关的后端运行状况、诊断日志记录和指标）。\n\n## 后续步骤\n\n若要了解有关应用程序网关的详细信息，请访问 [Introduction to Application Gateway](https://docs.azure.cn/application-gateway/application-gateway-introduction)（应用程序网关简介）。\n