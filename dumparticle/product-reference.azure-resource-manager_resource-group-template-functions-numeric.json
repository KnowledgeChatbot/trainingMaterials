{"Title":"Azure Resource Manager 模板函数 - 数值","Description":"介绍可在 Azure Resource Manager 模板中使用的用于处理数值的函数。","Content":"# <a name=\"numeric-functions-for-azure-resource-manager-templates\"></a>用于 Azure Resource Manager 模板的数值函数\r \r Resource Manager 提供以下用于处理整数的函数：\r \r * [添加](#add)\r * [copyIndex](#copyindex)\r * [div](#div)\r * [float](#float)\r * [int](#int)\r * [max](#max)\r * [min](#min)\r * [mod](#mod)\r * [mul](#mul)\r * [sub](#sub)\r \r <a id=\"add\" />\r \r ## <a name=\"add\"></a>add\r `add(operand1, operand2)`\r \r 返回提供的两个整数的总和。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- | \r |operand1 |是 |int |被加数。 |\r |operand2 |是 |int |加数。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 一个整数，包含参数的总和。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/add.json)将添加两个参数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"first\": {\r             \"type\": \"int\",\r             \"defaultValue\": 5,\r             \"metadata\": {\r                 \"description\": \"First integer to add\"\r             }\r         },\r         \"second\": {\r             \"type\": \"int\",\r             \"defaultValue\": 3,\r             \"metadata\": {\r                 \"description\": \"Second integer to add\"\r             }\r         }\r     },\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"addResult\": {\r             \"type\": \"int\",\r             \"value\": \"[add(parameters('first'), parameters('second'))]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | addResult | int | 8 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/add.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/add.json \r ```\r \r <a id=\"copyindex\" />\r \r ## <a name=\"copyindex\"></a>copyIndex\r `copyIndex(loopName, offset)`\r \r 返回迭代循环的索引。 \r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | loopName | 否 | 字符串 | 用于获取迭代的循环的名称。 |\r | offset |否 |int |要添加到的从零开始的迭代值的数字。 |\r \r ### <a name=\"remarks\"></a>备注\r \r 此函数始终用于 **copy** 对象。 如果没有提供任何值作为 **偏移量**，则返回当前迭代值。 迭代值从零开始。 定义资源或变量时，你可以使用迭代循环。\r \r **loopName** 属性可用于指定 copyIndex 是引用资源迭代还是引用属性迭代。 如果没有为 **loopName** 提供值，则将使用当前的资源类型迭代。 在属性上迭代时，请为 **loopName** 提供值。 \r \r 有关如何使用 **copyIndex** 的完整说明，请参阅 [Create multiple instances of resources in Azure Resource Manager](resource-group-create-multiple.md)（在 Azure Resource Manager 中创建多个资源实例）。\r \r 有关定义变量时使用“copyIndex”的示例，请参阅[变量](resource-group-authoring-templates.md#variables)。\r \r ### <a name=\"example\"></a>示例\r \r 以下示例显示名称中包含 copy 循环和索引值。 \r \r ```json\r \"resources\": [ \r   { \r     \"name\": \"[concat('examplecopy-', copyIndex())]\", \r     \"type\": \"Microsoft.Web/sites\", \r     \"copy\": { \r       \"name\": \"websitescopy\", \r       \"count\": \"[parameters('count')]\" \r     }, \r     ...\r   }\r ]\r ```\r \r ### <a name=\"return-value\"></a>返回值\r \r 一个表示迭代的当前索引的整数。\r \r <a id=\"div\" />\r \r ## <a name=\"div\"></a>div\r `div(operand1, operand2)`\r \r 返回提供的两个整数在整除后的商。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | operand1 |是 |int |被除数。 |\r | operand2 |是 |int |除数。 不能为 0。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 一个表示商的整数。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/div.json)将一个参数除以另一个参数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"first\": {\r             \"type\": \"int\",\r             \"defaultValue\": 8,\r             \"metadata\": {\r                 \"description\": \"Integer being divided\"\r             }\r         },\r         \"second\": {\r             \"type\": \"int\",\r             \"defaultValue\": 3,\r             \"metadata\": {\r                 \"description\": \"Integer used to divide\"\r             }\r         }\r     },\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"divResult\": {\r             \"type\": \"int\",\r             \"value\": \"[div(parameters('first'), parameters('second'))]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | divResult | int | 2 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/div.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/div.json \r ```\r \r <a id=\"float\" />\r \r ## <a name=\"float\"></a>float\r `float(arg1)`\r \r 将值转换为浮点数。 仅当将自定义参数传递给应用程序（例如，逻辑应用）时，才使用此函数。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |字符串或整数 |要转换为浮点数的值。 |\r \r ### <a name=\"return-value\"></a>返回值\r 一个浮点数。\r \r ### <a name=\"example\"></a>示例\r \r 以下示例演示如何使用 float 将参数传递给逻辑应用：\r \r ```json\r {\r     \"type\": \"Microsoft.Logic/workflows\",\r     \"properties\": {\r         ...\r         \"parameters\": {\r             \"custom1\": {\r                 \"value\": \"[float('3.0')]\"\r             },\r             \"custom2\": {\r                 \"value\": \"[float(3)]\"\r             },\r ```\r \r <a id=\"int\" />\r \r ## <a name=\"int\"></a>int\r `int(valueToConvert)`\r \r 将指定的值转换为整数。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | valueToConvert |是 |字符串或整数 |要转换为整数的值。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 转换后的值的整数。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/int.json)将用户提供的参数值转换为整数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"stringToConvert\": { \r             \"type\": \"string\",\r             \"defaultValue\": \"4\"\r         }\r     },\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"intResult\": {\r             \"type\": \"int\",\r             \"value\": \"[int(parameters('stringToConvert'))]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | intResult | int | 4 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/int.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/int.json\r ```\r \r <a id=\"max\" />\r \r ## <a name=\"max\"></a>max\r `max (arg1)`\r \r 返回整数数组或逗号分隔的整数列表中的最大值。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |整数数组或逗号分隔的整数列表 |要获取最大值的集合。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 一个整数，表示集合中的最大值。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/max.json)演示如何对整数数组和整数列表使用 max：\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"arrayToTest\": {\r             \"type\": \"array\",\r             \"defaultValue\": [0,3,2,5,4]\r         }\r     },\r     \"resources\": [],\r     \"outputs\": {\r         \"arrayOutput\": {\r             \"type\": \"int\",\r             \"value\": \"[max(parameters('arrayToTest'))]\"\r         },\r         \"intOutput\": {\r             \"type\": \"int\",\r             \"value\": \"[max(0,3,2,5,4)]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | arrayOutput | int | 5 |\r | intOutput | int | 5 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/max.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/max.json\r ```\r \r <a id=\"min\" />\r \r ## <a name=\"min\"></a>min\r `min (arg1)`\r \r 返回整数数组或逗号分隔的整数列表中的最小值。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |整数数组或逗号分隔的整数列表 |要获取最小值的集合。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 一个整数，表示集合中的最小值。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/min.json)演示如何对整数数组和整数列表使用 min：\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"arrayToTest\": {\r             \"type\": \"array\",\r             \"defaultValue\": [0,3,2,5,4]\r         }\r     },\r     \"resources\": [],\r     \"outputs\": {\r         \"arrayOutput\": {\r             \"type\": \"int\",\r             \"value\": \"[min(parameters('arrayToTest'))]\"\r         },\r         \"intOutput\": {\r             \"type\": \"int\",\r             \"value\": \"[min(0,3,2,5,4)]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | arrayOutput | int | 0 |\r | intOutput | int | 0 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/min.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/min.json\r ```\r \r <a id=\"mod\" />\r \r ## <a name=\"mod\"></a>mod\r `mod(operand1, operand2)`\r \r 返回使用提供的两个整数整除后的余数。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | operand1 |是 |int |被除数。 |\r | operand2 |是 |int |除数，不能为 0。 |\r \r ### <a name=\"return-value\"></a>返回值\r 一个表示余数的整数。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/mod.json)将返回一个参数除以另一个参数后所得的余数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"first\": {\r             \"type\": \"int\",\r             \"defaultValue\": 7,\r             \"metadata\": {\r                 \"description\": \"Integer being divided\"\r             }\r         },\r         \"second\": {\r             \"type\": \"int\",\r             \"defaultValue\": 3,\r             \"metadata\": {\r                 \"description\": \"Integer used to divide\"\r             }\r         }\r     },\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"modResult\": {\r             \"type\": \"int\",\r             \"value\": \"[mod(parameters('first'), parameters('second'))]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | modResult | int | 1 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/mod.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/mod.json\r ```\r \r <a id=\"mul\" />\r \r ## <a name=\"mul\"></a>mul\r `mul(operand1, operand2)`\r \r 返回提供的两个整数的积。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | operand1 |是 |int |被乘数。 |\r | operand2 |是 |int |乘数。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 一个表示积的整数。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/mul.json)将一个参数乘以另一个参数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"first\": {\r             \"type\": \"int\",\r             \"defaultValue\": 5,\r             \"metadata\": {\r                 \"description\": \"First integer to multiply\"\r             }\r         },\r         \"second\": {\r             \"type\": \"int\",\r             \"defaultValue\": 3,\r             \"metadata\": {\r                 \"description\": \"Second integer to multiply\"\r             }\r         }\r     },\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"mulResult\": {\r             \"type\": \"int\",\r             \"value\": \"[mul(parameters('first'), parameters('second'))]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | mulResult | int | 15 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/mul.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/mul.json\r ```\r \r <a id=\"sub\" />\r \r ## <a name=\"sub\"></a>sub\r `sub(operand1, operand2)`\r \r 返回提供的两个整数在相减后的结果。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | operand1 |是 |int |被减数。 |\r | operand2 |是 |int |减数。 |\r \r ### <a name=\"return-value\"></a>返回值\r 一个表示减后结果的整数。\r \r ### <a name=\"example\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/sub.json)将一个参数与另一个参数相减。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         \"first\": {\r             \"type\": \"int\",\r             \"defaultValue\": 7,\r             \"metadata\": {\r                 \"description\": \"Integer subtracted from\"\r             }\r         },\r         \"second\": {\r             \"type\": \"int\",\r             \"defaultValue\": 3,\r             \"metadata\": {\r                 \"description\": \"Integer to subtract\"\r             }\r         }\r     },\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"subResult\": {\r             \"type\": \"int\",\r             \"value\": \"[sub(parameters('first'), parameters('second'))]\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | subResult | int | 4 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/sub.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/sub.json\r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r * 有关 Azure 资源管理器模板中各部分的说明，请参阅[创作 Azure 资源管理器模板](resource-group-authoring-templates.md)。\r * 若要合并多个模板，请参阅[将链接的模板与 Azure Resource Manager 配合使用](resource-group-linked-templates.md)。\r * 若要在创建资源类型时迭代指定的次数，请参阅[在 Azure Resource Manager 中创建多个资源实例](resource-group-create-multiple.md)。\r * 若要查看如何部署已创建的模板，请参阅[使用 Azure Resource Manager 模板部署应用程序](resource-group-template-deploy.md)。\r \r <!--Update_Description: update meta properties, wording update -->"}