{"Title":"如何将 Azure Redis 缓存与 Node.js 配合使用","Description":"开始将 Azure Redis 缓存与 Node.js 和 node_redis 配合使用。","Content":"\r # 如何将 Azure Redis 缓存与 Node.js 配合使用\r > [!div class=\"op_single_selector\"]\r >- [.NET](./cache-dotnet-how-to-use-azure-redis-cache.md)\r >- [ASP.NET](./cache-web-app-howto.md)\r >- [Node.js](./cache-nodejs-get-started.md)\r >- [Java](./cache-java-get-started.md)\r >- [Python](./cache-python-get-started.md)\r \r [!INCLUDE [azure-sdk-developer-differences](../../includes/azure-sdk-developer-differences.md)]\r \r Azure Redis 缓存允许访问 Microsoft 管理的安全、专用的 Redis 缓存。可从 Azure 内部的任何应用程序访问缓存。\r \r 本主题说明如何将 Azure Redis 缓存与 Node.js 配合使用。有关将 Azure Redis 缓存与 Node.js 配合使用的另一个示例，请参阅[在 Azure 网站中使用 Socket.IO 生成 Node.js 聊天应用程序](../app-service-web/web-sites-nodejs-chat-app-socketio.md)。\r \r ## 先决条件\r 安装 [node\\_redis](https://github.com/mranney/node_redis)：\r \r ```\r npm install redis\r ```\r \r 本教程使用的是 [node\\_redis](https://github.com/mranney/node_redis)。有关使用其他 Node.js 客户端的示例，请使用与 [Node.js Redis 客户端](http://redis.io/clients#nodejs)中列出的 Node.js 客户端对应的各个文档。\r \r ## 在 Azure 上创建 Redis 缓存\r [!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]\r \r ## <a name=\"retrieve-the-host-name-and-access-keys\"></a> 检索主机名和访问密钥\r [!INCLUDE [redis-cache-create](../../includes/redis-cache-access-keys.md)]\r \r ## 使用 SSL 安全地连接到缓存\r 最新版本的 [node\\_redis](https://github.com/mranney/node_redis) 支持使用 SSL 连接到 Azure Redis 缓存。以下示例显示了如何使用 SSL 终结点 6380 连接到 Azure Redis 缓存。将 `<name>` 替换为缓存名称，将 `<key>` 替换为主密钥或辅助密钥，如前面的[检索主机名和访问密钥](#retrieve-the-host-name-and-access-keys)部分中所述。\r \r ```\r  var redis = require(\"redis\");\r \r   // Add your cache name and access key.\r var client = redis.createClient(6380,'<name>.redis.cache.chinacloudapi.cn', {auth_pass: '<key>', tls: {servername: '<name>.redis.cache.chinacloudapi.cn'}});\r ```\r \r > [!NOTE]\r > 为新的 Azure Redis 缓存实例禁用了非 SSL 端口。如果使用的是不支持 SSL 的不同客户端，请参阅[如何启用非 SSL 端口](./cache-configure.md#access-ports)。\r > \r > \r \r ## 在缓存中添加一些内容并检索此内容\r 以下示例显示了如何连接到 Azure Redis 缓存实例，以及如何在缓存中存储并检索项目。有关将 Redis 与 [node\\_redis](https://github.com/mranney/node_redis) 客户端一起使用的更多示例，请参阅 [http://redis.js.org/](http://redis.js.org/)。\r \r ```\r  var redis = require(\"redis\");\r \r   // Add your cache name and access key.\r var client = redis.createClient(6380,'<name>.redis.cache.chinacloudapi.cn', {auth_pass: '<key>', tls: {servername: '<name>.redis.cache.chinacloudapi.cn'}});\r \r client.set(\"key1\", \"value\", function(err, reply) {\r         console.log(reply);\r     });\r \r client.get(\"key1\",  function(err, reply) {\r         console.log(reply);\r     });\r ```\r \r 输出：\r \r ```\r OK\r value\r ```\r \r ## 后续步骤\r * [启用缓存诊断](./cache-how-to-monitor.md#enable-cache-diagnostics)，以便可以[监视](./cache-how-to-monitor.md)缓存的运行状况。\r * 阅读官方 [Redis 文档](http://redis.io/documentation)。\r \r <!---HONumber=Mooncake_0227_2017-->\r <!--Update_Description: add a note about none-ssl port-->"}