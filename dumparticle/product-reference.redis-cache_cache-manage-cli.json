{"Title":"使用 Azure CLI 管理 Azure Redis 缓存","Description":"了解如何在任何平台上安装 Azure CLI、如何使用它连接到你的 Azure 帐户，以及如何从 Azure CLI 创建和管理 Redis 缓存。","Content":"# <a name=\"how-to-create-and-manage-azure-redis-cache-using-the-azure-command-line-interface-azure-cli\"></a>如何使用 Azure 命令行界面 (Azure CLI) 创建和管理 Azure Redis 缓存\r > [!div class=\"op_single_selector\"]\r > * [PowerShell](cache-howto-manage-redis-cache-powershell.md)\r > * [Azure CLI](cache-manage-cli.md)\r >\r >\r \r Azure CLI 是从任何平台管理 Azure 基础结构的好办法。 本文演示了如何使用 Azure CLI 创建和管理 Azure Redis 缓存实例。\r \r > [!NOTE]\r > 本文适用于旧版 Azure CLI。 如需最新的 Azure CLI 2.0 示例脚本，请参阅 [Azure CLI Redis 缓存示例](cli-samples.md)。\r > \r > \r \r ## <a name=\"prerequisites\"></a>先决条件\r 若要使用 Azure CLI 创建和管理 Azure Redis 缓存实例，必须完成以下步骤。\r \r * 你必须具有 Azure 帐户。 如果没有帐户，只需几分钟就能创建一个[试用帐户](https://www.azure.cn/pricing/1rmb-trial/)。\r * [安装 Azure CLI](../cli-install-nodejs.md)。\r * 将 Azure CLI 安装与个人 Azure 帐户或者工作或学校 Azure 帐户关联，然后使用 `azure login -e AzureChinaCloud` 命令从 Azure CLI 登录。 若要了解差别并进行选择，请参阅[从 Azure 命令行界面 (Azure CLI) 连接到 Azure 订阅](../xplat-cli-connect.md)。\r * 在运行以下任何命令之前，通过运行 `azure config mode arm` 命令将 Azure CLI 切换到 Resource Manager 模式下。 有关更多详细信息，请参阅[使用 Azure CLI 管理 Azure 资源和资源组](../azure-resource-manager/xplat-cli-azure-resource-manager.md)。\r \r ## <a name=\"redis-cache-properties\"></a>Redis 缓存属性\r 在创建和更新 Redis 缓存实例时使用以下属性。\r \r | 属性 | 开关 | 说明 |\r | --- | --- | --- |\r | 名称 |-n, --name |Redis 缓存的名称。 |\r | 资源组 |-g, --resource-group |资源组的名称。 |\r | 位置 |-l, --location |要创建缓存的位置。 |\r | 大小 |-z, --size |Redis 缓存的大小。 有效的值：[C0、C1、C2、C3、C4、C5、C6、P1、P2、P3、P4] |\r | sku |-x, --sku |Redis SKU。 应为以下值之一：[Basic、Standard、Premium] |\r | EnableNonSslPort |-e, --enable-non-ssl-port |Redis 缓存的 EnableNonSslPort 属性。 如果要为你的缓存启用非 SSL 端口，请添加此标志 |\r | Redis 配置 |-c, --redis-configuration |Redis 配置。 在此处输入配置键和值的 JSON 格式字符串。 格式：\"{\"\":\"\",\"\":\"\"}\" |\r | Redis 配置 |-f, --redis-configuration-file |Redis 配置。 在此处输入包含配置键和值的文件的路径。 文件输入项的格式：{\"\":\"\",\"\":\"\"} |\r | 分片计数 |-r, --shard-count |要在启用群集的高级群集缓存上创建的分片数。 |\r | 虚拟网络 |-v, --virtual-network |在 VNET 中托管缓存时，指定要在其中部署 Redis 缓存的虚拟网络的确切 ARM 资源 ID。 格式示例：/subscriptions/{subid}/resourceGroups/{resourceGroupName}/Microsoft.ClassicNetwork/VirtualNetworks/vnet1 |\r | 密钥类型 |-t, --key-type |要续订的密钥类型。 有效值：[Primary、Secondary] |\r | StaticIP |-p, --static-ip <static-ip> |在 VNET 中托管缓存时，指定缓存在子网中的唯一 IP 地址。 如果未提供此值，系统将从子网中为你选择一个。 |\r | 子网 |t, --subnet <subnet> |在 VNET 中托管缓存时，指定要在其中部署缓存的子网。 |\r | VirtualNetwork |-v, --virtual-network <virtual-network> |在 VNET 中托管缓存时，指定要在其中部署 Redis 缓存的虚拟网络的确切 ARM 资源 ID。 格式示例：/subscriptions/{subid}/resourceGroups/{resourceGroupName}/Microsoft.ClassicNetwork/VirtualNetworks/vnet1 |\r | 订阅 |-s, --subscription |订阅标识符。 |\r \r ## <a name=\"see-all-redis-cache-commands\"></a>查看所有 Redis 缓存命令\r 若要查看所有 Redis 缓存命令及其参数，请使用 `azure rediscache -h` 命令。\r \r     C:\\>azure rediscache -h\r     help:    Commands to manage your Azure Redis Cache(s)\r     help:\r     help:    Create a Redis Cache\r     help:      rediscache create [--name <name> --resource-group <resource-group> --location <location> [options]]\r     help:\r     help:    Delete an existing Redis Cache\r     help:      rediscache delete [--name <name> --resource-group <resource-group> ]\r     help:\r     help:    List all Redis Caches within your Subscription or Resource Group\r     help:      rediscache list [options]\r     help:\r     help:    Show properties of an existing Redis Cache\r     help:      rediscache show [--name <name> --resource-group <resource-group>]\r     help:\r     help:    Change settings of an existing Redis Cache\r     help:      rediscache set [--name <name> --resource-group <resource-group> --redis-configuration <redis-configuration>/--redis-configuration-file <redisConfigurationFile>]\r     help:\r     help:    Renew the authentication key for an existing Redis Cache\r     help:      rediscache renew-key [--name <name> --resource-group <resource-group> ]\r     help:\r     help:    Lists Primary and Secondary key of an existing Redis Cache\r     help:      rediscache list-keys [--name <name> --resource-group <resource-group>]\r     help:\r     help:    Options:\r     help:      -h, --help  output usage information\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"create-a-redis-cache\"></a>创建 Redis 缓存\r 若要创建 Redis 缓存，请使用以下命令：\r \r     azure rediscache create [--name <name> --resource-group <resource-group> --location <location> [options]]\r \r 有关此命令的详细信息，请运行 `azure rediscache create -h` 命令。\r \r     C:\\>azure rediscache create -h\r     help:    Create a Redis Cache\r     help:\r     help:    Usage: rediscache create [--name <name> --resource-group <resource-group> --location <location> [options]]\r     help:\r     help:    Options:\r     help:      -h, --help                                               output usage information\r     help:      -v, --verbose                                            use verbose output\r     help:      -vv                                                      more verbose with debug output\r     help:      --json                                                   use json output\r     help:      -n, --name <name>                                        Name of the Redis Cache.\r     help:      -g, --resource-group <resource-group>                    Name of the Resource Group\r     help:      -l, --location <location>                                Location to create cache.\r     help:      -z, --size <size>                                        Size of the Redis Cache. Valid values: [C0, C1, C2, C3, C4, C5, C6, P1, P2, P3, P4]\r     help:      -x, --sku <sku>                                          Redis SKU. Should be one of : [Basic, Standard, Premium]\r     help:      -e, --enable-non-ssl-port                                EnableNonSslPort property of the Redis Cache. Add this flag if you want to enable the Non SSL Port for your cache\r     help:      -c, --redis-configuration <redis-configuration>          Redis Configuration. Enter a JSON formatted string of configuration keys and values here. Format:\"{\"<key1>\":\"<value1>\",\"<key2>\":\"<value2>\"}\"\r     help:      -f, --redis-configuration-file <redisConfigurationFile>  Redis Configuration. Enter the path of a file containing configuration keys and values here. Format for the file entry: {\"<key1>\":\"<value1>\",\"<key2>\":\"<value2>\"}\r     help:      -r, --shard-count <shard-count>                          Number of Shards to create on a Premium Cluster Cache\r     help:      -v, --virtual-network <virtual-network>                  The exact ARM resource ID of the virtual network to deploy the redis cache in. Example format: /subscriptions/{subid}/resourceGroups/{resourceGroupName}/Microsoft.ClassicNetwork/VirtualNetworks/vnet1\r     help:      -t, --subnet <subnet>                                    Required when deploying a redis cache inside an existing Azure Virtual Network\r     help:      -p, --static-ip <static-ip>                              Required when deploying a redis cache inside an existing Azure Virtual Network\r     help:      -s, --subscription <id>                                  the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"delete-an-existing-redis-cache\"></a>删除现有 Redis 缓存\r 若要删除 Redis 缓存，请使用以下命令：\r \r     azure rediscache delete [--name <name> --resource-group <resource-group> ]\r \r 有关此命令的详细信息，请运行 `azure rediscache delete -h` 命令。\r \r     C:\\>azure rediscache delete -h\r     help:    Delete an existing Redis Cache\r     help:\r     help:    Usage: rediscache delete [--name <name> --resource-group <resource-group> ]\r     help:\r     help:    Options:\r     help:      -h, --help                             output usage information\r     help:      -v, --verbose                          use verbose output\r     help:      -vv                                    more verbose with debug output\r     help:      --json                                 use json output\r     help:      -n, --name <name>                      Name of the Redis Cache.\r     help:      -g, --resource-group <resource-group>  Name of the Resource Group under which the cache exists\r     help:      -s, --subscription <subscription>      the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"list-all-redis-caches-within-your-subscription-or-resource-group\"></a>列出你的订阅或资源组中的所有 Redis 缓存\r 若要列出订阅或资源组中的所有 Redis 缓存，请使用以下命令：\r \r     azure rediscache list [options]\r \r 有关此命令的详细信息，请运行 `azure rediscache list -h` 命令。\r \r     C:\\>azure rediscache list -h\r     help:    List all Redis Caches within your Subscription or Resource Group\r     help:\r     help:    Usage: rediscache list [options]\r     help:\r     help:    Options:\r     help:      -h, --help                             output usage information\r     help:      -v, --verbose                          use verbose output\r     help:      -vv                                    more verbose with debug output\r     help:      --json                                 use json output\r     help:      -g, --resource-group <resource-group>  Name of the Resource Group\r     help:      -s, --subscription <subscription>      the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"show-properties-of-an-existing-redis-cache\"></a>显示现有 Redis 缓存的属性\r 若要显示现有 Redis 缓存的属性，请使用以下命令：\r \r     azure rediscache show [--name <name> --resource-group <resource-group>]\r \r 有关此命令的详细信息，请运行 `azure rediscache show -h` 命令。\r \r     C:\\>azure rediscache show -h\r     help:    Show properties of an existing Redis Cache\r     help:\r     help:    Usage: rediscache show [--name <name> --resource-group <resource-group>]\r     help:\r     help:    Options:\r     help:      -h, --help                             output usage information\r     help:      -v, --verbose                          use verbose output\r     help:      -vv                                    more verbose with debug output\r     help:      --json                                 use json output\r     help:      -n, --name <name>                      Name of the Redis Cache.\r     help:      -g, --resource-group <resource-group>  Name of the Resource Group\r     help:      -s, --subscription <subscription>      the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"scale\"></a> 更改现有 Redis 缓存的设置\r 若要更改现有 Redis 缓存的设置，请使用以下命令：\r \r     azure rediscache set [--name <name> --resource-group <resource-group> --redis-configuration <redis-configuration>/--redis-configuration-file <redisConfigurationFile>]\r \r 有关此命令的详细信息，请运行 `azure rediscache set -h` 命令。\r \r     C:\\>azure rediscache set -h\r     help:    Change settings of an existing Redis Cache\r     help:\r     help:    Usage: rediscache set [--name <name> --resource-group <resource-group> --redis-configuration <redis-configuration>/--redis-configuration-file <redisConfigurationFile>]\r     help:\r     help:    Options:\r     help:      -h, --help                                               output usage information\r     help:      -v, --verbose                                            use verbose output\r     help:      -vv                                                      more verbose with debug output\r     help:      --json                                                   use json output\r     help:      -n, --name <name>                                        Name of the Redis Cache.\r     help:      -g, --resource-group <resource-group>                    Name of the Resource Group\r     help:      -c, --redis-configuration <redis-configuration>          Redis Configuration. Enter a JSON formatted string of configuration keys and values here.\r     help:      -f, --redis-configuration-file <redisConfigurationFile>  Redis Configuration. Enter the path of a file containing configuration keys and values here.\r     help:      -s, --subscription <subscription>                        the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"renew-the-authentication-key-for-an-existing-redis-cache\"></a>为现有 Redis 缓存续订身份验证密钥\r 若要为现有 Redis 缓存续订身份验证密钥，请使用以下命令：\r \r     azure rediscache renew-key [--name <name> --resource-group <resource-group> --key-type <key-type>]\r \r 为 `key-type` 指定 `Primary` 或 `Secondary`。\r \r 有关此命令的详细信息，请运行 `azure rediscache renew-key -h` 命令。\r \r     C:\\>azure rediscache renew-key -h\r     help:    Renew the authentication key for an existing Redis Cache\r     help:\r     help:    Usage: rediscache renew-key [--name <name> --resource-group <resource-group> ]\r     help:\r     help:    Options:\r     help:      -h, --help                             output usage information\r     help:      -v, --verbose                          use verbose output\r     help:      -vv                                    more verbose with debug output\r     help:      --json                                 use json output\r     help:      -n, --name <name>                      Name of the Redis Cache.\r     help:      -g, --resource-group <resource-group>  Name of the Resource Group under which cache exists\r     help:      -t, --key-type <key-type>              type of key to renew. Valid values are: 'Primary', 'Secondary'.\r     help:      -s, --subscription <subscription>      the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r ## <a name=\"list-primary-and-secondary-keys-of-an-existing-redis-cache\"></a>列出现有 Redis 缓存的主密钥和辅助密钥\r 若要列出现有 Redis 缓存的主密钥和辅助密钥，请使用以下命令：\r \r     azure rediscache list-keys [--name <name> --resource-group <resource-group>]\r \r 有关此命令的详细信息，请运行 `azure rediscache list-keys -h` 命令。\r \r     C:\\>azure rediscache list-keys -h\r     help:    Lists Primary and Secondary key of an existing Redis Cache\r     help:\r     help:    Usage: rediscache list-keys [--name <name> --resource-group <resource-group>]\r     help:\r     help:    Options:\r     help:      -h, --help                             output usage information\r     help:      -v, --verbose                          use verbose output\r     help:      -vv                                    more verbose with debug output\r     help:      --json                                 use json output\r     help:      -n, --name <name>                      Name of the Redis Cache.\r     help:      -g, --resource-group <resource-group>  Name of the Resource Group under which Cache exists\r     help:      -s, --subscription <subscription>      the subscription identifier\r     help:\r     help:    Current Mode: arm (Azure Resource Management)\r \r "}