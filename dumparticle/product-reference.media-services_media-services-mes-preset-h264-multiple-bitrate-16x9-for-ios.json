{"Title":"适用于 iOS 的 H264 多比特率 16x9","Description":"本主题概述了“适用于 iOS 的 H264 多比特率 16x9”任务预设。","Content":"# <a name=\"h264-multiple-bitrate-16x9-for-ios\"></a>适用于 iOS 的 H264 多比特率 16x9\r `Media Encoder Standard` 定义一组可在创建编码作业时使用的编码预设。 可使用 `preset name` 指定要将媒体文件编码为哪种格式。 也可以创建自己的 JSON 或基于 XML 的预设（使用 UTF-8 或 UTF-16 编码）。 然后，将自定义预设传递到编码器。 有关此 `Media Encoder Standard` 编码器支持的所有预设名称的列表，请参阅 [Media Encoder Standard 的任务预设](media-services-mes-presets-overview.md)。  \r   \r  本主题演示 XML 和 JSON 格式的 `H264 Multiple Bitrate 16x9 for iOS` 预设。  \r   \r  此预设会生成一组 8 个 GOP 对齐的 MP4 文件，范围为 8500 kbps - 200 kbps，以及立体声 AAC 音频。 若要深入了解此预设的配置文件、比特率、采样率等，请检查下面定义的 XML 或 JSON。 有关这些预设中的每个元素的含义及其有效值的说明，请参阅 [Media Encoder Standard 架构](media-services-mes-schema.md)主题。  \r   \r > [!NOTE]\r >  跨层修改 `Width` 和 `Height` 值时，请确保纵横比保持一致。 例如：1920x1080、1280x720、1080x576、640x360。 不应使用混合纵横比，如 1280x720、720x480、640x360。  \r \r  XML  \r   \r ```  \r <?xml version=\"1.0\" encoding=\"utf-16\"?>  \r <Preset xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" Version=\"1.0\" xmlns=\"http://www.windowsazure.com/media/encoding/Preset/2014/03\">  \r   <Encoding>  \r     <H264Video>  \r       <KeyFrameInterval>00:00:03</KeyFrameInterval>  \r       <H264Layers>  \r         <H264Layer>  \r           <Bitrate>8500</Bitrate>  \r           <Width>1920</Width>  \r           <Height>1080</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>High</Profile>  \r           <Level>4</Level>  \r           <BFrames>3</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>true</AdaptiveBFrame>  \r           <EntropyMode>Cabac</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>8500</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>6500</Bitrate>  \r           <Width>1280</Width>  \r           <Height>720</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Main</Profile>  \r           <Level>3.1</Level>  \r           <BFrames>3</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>true</AdaptiveBFrame>  \r           <EntropyMode>Cabac</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>6500</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>5000</Bitrate>  \r           <Width>1280</Width>  \r           <Height>720</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Main</Profile>  \r           <Level>3.1</Level>  \r           <BFrames>3</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>true</AdaptiveBFrame>  \r           <EntropyMode>Cabac</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>5000</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>3500</Bitrate>  \r           <Width>960</Width>  \r           <Height>540</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Main</Profile>  \r           <Level>3.1</Level>  \r           <BFrames>3</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>true</AdaptiveBFrame>  \r           <EntropyMode>Cabac</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>3500</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>1200</Bitrate>  \r           <Width>640</Width>  \r           <Height>360</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Baseline</Profile>  \r           <Level>3.1</Level>  \r           <BFrames>0</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>false</AdaptiveBFrame>  \r           <EntropyMode>Cavlc</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>1200</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>600</Bitrate>  \r           <Width>640</Width>  \r           <Height>360</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Baseline</Profile>  \r           <Level>3</Level>  \r           <BFrames>0</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>false</AdaptiveBFrame>  \r           <EntropyMode>Cavlc</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>600</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>400</Bitrate>  \r           <Width>480</Width>  \r           <Height>270</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Baseline</Profile>  \r           <Level>3</Level>  \r           <BFrames>0</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>false</AdaptiveBFrame>  \r           <EntropyMode>Cavlc</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>400</MaxBitrate>  \r         </H264Layer>  \r         <H264Layer>  \r           <Bitrate>200</Bitrate>  \r           <Width>416</Width>  \r           <Height>214</Height>  \r           <FrameRate>0/1</FrameRate>  \r           <Profile>Baseline</Profile>  \r           <Level>3</Level>  \r           <BFrames>0</BFrames>  \r           <ReferenceFrames>3</ReferenceFrames>  \r           <Slices>0</Slices>  \r           <AdaptiveBFrame>false</AdaptiveBFrame>  \r           <EntropyMode>Cavlc</EntropyMode>  \r           <BufferWindow>00:00:05</BufferWindow>  \r           <MaxBitrate>200</MaxBitrate>  \r         </H264Layer>  \r       </H264Layers>  \r       <Chapters />  \r     </H264Video>  \r     <AACAudio>  \r       <Profile>HEAACV2</Profile>  \r       <Channels>2</Channels>  \r       <SamplingRate>48000</SamplingRate>  \r       <Bitrate>64</Bitrate>  \r     </AACAudio>  \r   </Encoding>  \r   <Outputs>  \r     <Output FileName=\"{Basename}_{Width}x{Height}_{VideoBitrate}.mp4\">  \r       <MP4Format />  \r     </Output>  \r   </Outputs>  \r </Preset>  \r ```  \r   \r  JSON  \r   \r ```  \r {  \r   \"Version\": 1.0,  \r   \"Codecs\": [  \r     {  \r       \"KeyFrameInterval\": \"00:00:03\",  \r       \"H264Layers\": [  \r         {  \r           \"Profile\": \"High\",  \r           \"Level\": \"4\",  \r           \"Bitrate\": 8500,  \r           \"MaxBitrate\": 8500,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 1920,  \r           \"Height\": 1080,  \r           \"BFrames\": 3,  \r           \"ReferenceFrames\": 3,  \r           \"AdaptiveBFrame\": true,  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Main\",  \r           \"Level\": \"3.1\",  \r           \"Bitrate\": 6500,  \r           \"MaxBitrate\": 6500,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 1280,  \r           \"Height\": 720,  \r           \"BFrames\": 3,  \r           \"ReferenceFrames\": 3,  \r           \"AdaptiveBFrame\": true,  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Main\",  \r           \"Level\": \"3.1\",  \r           \"Bitrate\": 5000,  \r           \"MaxBitrate\": 5000,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 1280,  \r           \"Height\": 720,  \r           \"BFrames\": 3,  \r           \"ReferenceFrames\": 3,  \r           \"AdaptiveBFrame\": true,  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Main\",  \r           \"Level\": \"3.1\",  \r           \"Bitrate\": 3500,  \r           \"MaxBitrate\": 3500,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 960,  \r           \"Height\": 540,  \r           \"BFrames\": 3,  \r           \"ReferenceFrames\": 3,  \r           \"AdaptiveBFrame\": true,  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Baseline\",  \r           \"Level\": \"3.1\",  \r           \"Bitrate\": 1200,  \r           \"MaxBitrate\": 1200,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 640,  \r           \"Height\": 360,  \r           \"ReferenceFrames\": 3,  \r           \"EntropyMode\": \"Cavlc\",  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Baseline\",  \r           \"Level\": \"3\",  \r           \"Bitrate\": 600,  \r           \"MaxBitrate\": 600,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 640,  \r           \"Height\": 360,  \r           \"ReferenceFrames\": 3,  \r           \"EntropyMode\": \"Cavlc\",  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Baseline\",  \r           \"Level\": \"3\",  \r           \"Bitrate\": 400,  \r           \"MaxBitrate\": 400,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 480,  \r           \"Height\": 270,  \r           \"ReferenceFrames\": 3,  \r           \"EntropyMode\": \"Cavlc\",  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         },  \r         {  \r           \"Profile\": \"Baseline\",  \r           \"Level\": \"3\",  \r           \"Bitrate\": 200,  \r           \"MaxBitrate\": 200,  \r           \"BufferWindow\": \"00:00:05\",  \r           \"Width\": 416,  \r           \"Height\": 214,  \r           \"ReferenceFrames\": 3,  \r           \"EntropyMode\": \"Cavlc\",  \r           \"Type\": \"H264Layer\",  \r           \"FrameRate\": \"0/1\"  \r         }  \r       ],  \r       \"Type\": \"H264Video\"  \r     },  \r     {  \r       \"Profile\": \"HEAACV2\",  \r       \"Channels\": 2,  \r       \"SamplingRate\": 48000,  \r       \"Bitrate\": 64,  \r       \"Type\": \"AACAudio\"  \r     }  \r   ],  \r   \"Outputs\": [  \r     {  \r       \"FileName\": \"{Basename}_{Width}x{Height}_{VideoBitrate}.mp4\",  \r       \"Format\": {  \r         \"Type\": \"MP4Format\"  \r       }  \r     }  \r   ]  \r }  \r ```\r "}