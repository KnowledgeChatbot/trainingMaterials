{"Title":"Azure China CDN API doc- create endpoint","Description":"Learn How to create Live Streaming acceleration type CDN on Azure Management Portal and default caching rules for Live Streaming CDN","Content":"\r # 节点管理-创建节点\r \r > [!div class=\"op_single_selector\"]\r > * [中文](https://docs.azure.cn/zh-cn/cdn/cdn-api-create-endpoint)\r > * [英文](https://docs.azure.cn/en-us/cdn/cdn-api-create-endpoint)\r \r 通过该API可以创建CDN节点。\r \r >注意 为终结点创建的配置将不能立即可用：\r \r >首先需要审核所提供的自定义域名和ICP编号是否匹配、有效。这个过程需要最多一个工作日的时间来完成。\r 如果ICP审核没有通过，您需要删除之前创建的这个CDN终结点，然后使用正确的自定义域名和ICP编号重新创建。\r 如果ICP审核通过，CDN服务最多需要 60 分钟时间进行注册以便通过 CDN 网络传播。与此同时，您还需要按照界面上的提示信息配置CNAME映射信息，这样才可以最终通过自定义域名访问CDN缓存内容。\r \r ## 请求\r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>方法</strong>\r     </td>\r   <th align=\"left\"><strong>请求 URI</strong>\r     </td>  \r   <tr>\r     <td>POST</td>\r     <td>https://restapi.cdn.azure.cn/subscriptions/{subscriptionId}/endpoints?apiVersion=1.0</td>\r   </tr>\r </table>\r \r ### URI参数\r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>参数名</strong>\r     </td>\r   <th align=\"left\"><strong>描述</strong>\r     </td>  \r   <tr>\r     <td>subscriptionId</td>\r     <td>订阅唯一标识</td>\r   </tr>\r </table>\r \r ### 请求 Headers\r \r | 请求包头 | 描述 |\r |:-----------|:-----------|\r | x-azurecdn-request-date | 必填。符合yyyy-MM-dd hh:mm:ss格式的UTC当前请求时间 |\r | Authorization | 必填。授权头请参考[CDN API签名机制](./cdn-api-signature.md) |\r | content-type | 必填。application/json |\r \r ### 请求 Body\r 创建CDN节点，需写明一下参数，JSON示例文件如下：\r ```\r {\r   \"CustomDomain\": \"www.example.com\",\r   \"Host\": \"www.example.com\",\r   \"ICP\": \"ICP123456\",\r   \"Origin\": {\r     \"Addresses\": [\r       \"www.origin.com\"\r     ]\r   },\r   \"ServiceType\": \"Web\"\r }\r ```\r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>参数名称</strong>\r   </th>\r   <th align=\"left\"><strong>描述</strong>\r   </th>\r   <tr>\r     <td>CustomDomain</td>\r     <td>加速域名</td>\r   </tr>\r   <tr>\r     <td>Host</td>\r     <td>回源主机标头</td>\r   </tr>\r   <tr>\r     <td>ICP</td>\r     <td>ICP备案号</td>\r   </tr>\r   <tr>\r     <td>Addresses</td>\r     <td>回源地址集合</td>\r   </tr>\r   <tr>\r     <td>ServiceType</td>\r     <td>加速类型。\r        <ul>\r          <li>Web: 网页加速</li>\r          <li>Download：下载加速</li>\r          <li>VOD：点播加速</li>\r          <li>LiveStreaming：直播加速</li>\r          <li>ImageProcessing：图片处理加速</li>\r       </ul>\r     </td>\r   </tr>\r </table>\r \r ## 响应\r \r 响应由状态码，响应 headers以及响应 body组成。\r ### 状态码\r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>状态码</strong>\r     </td>\r   <th align=\"left\"><strong>描述</strong>\r     </td>\r   <tr>\r     <td>202</td>\r     <td>表明服务器成功接受请求</td>\r   </tr>\r   <tr>\r     <td>其他</td>\r     <td>表示出错的通用回复</td>\r   </tr>\r </table>\r \r ### 响应 Headers\r \r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>响应包头</strong>\r     </th>\r   <th align=\"left\"><strong>描述</strong>\r     </th>\r \r   <tr>\r     <td>X-Correlation-Id</td>\r     <td>该请求唯一标识，用于追踪请求信息。</td>\r   </tr>\r </table>\r \r ### 响应 Body\r **请求已成功受理JSON示例文件如下**：\r ```\r {\r   \"EndpointID\": \"779bff4d-ef38-4fce-82d8-6b50cc4c183b\",\r   \"Setting\": {\r     \"CustomDomain\": \"www.example.com\",\r     \"Host\": \"string\",\r     \"ICP\": \"ICP123456\",\r     \"Origin\": {\r       \"Addresses\": [\r         \"www.origin.com\"\r       ]\r     },\r     \"ServiceType\": \"Web\"\r   },\r   \"Status\": {\r     \"Enabled\": \"false\",\r     \"IcpVerifyStatus\": \"IcpVerifying\",\r     \"LifetimeStatus\": \"Creating\",\r     \"CNameConfigured\": \"false\",\r     \"FreeTrialExpired\": \"false\",\r     \"TimeLastUpdated\": \"2017-04-28T07:34:54.849Z\"\r   }\r }\r ```\r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>参数名称</strong>\r     </td>\r   <th align=\"left\"><strong>描述</strong>\r     </td>\r \r   <tr>\r     <td>EndpointID</td>\r     <td>节点唯一标识</td>\r   </tr>\r   <tr>\r     <td>Enabled</td>\r     <td>任务状态。\r         <ul>\r           <li>NotSet: 状态未知</li>\r           <li>Processing: 正在处理</li>\r           <li>Succeeded: 成功</li>\r           <li>Failed: 失败</li>\r         </ul>\r   </tr>\r   <tr>\r     <td>IcpVerifyStatus</td>\r     <td>ICP备案验证信息。\r         <ul>\r          <li>IcpVerifying：正在验证</li>\r          <li>IcpVerifyFailed：验证失败</li>\r          <li>IcpVerified：验证成功</li>\r         </ul>\r     </td>\r   </tr>\r   <tr>\r     <td>LifetimeStatus</td>\r     <td>节点状况。\r         <ul>\r          <li>Normal：正常</li>\r          <li>Creating：正在创建</li>\r          <li>CreationFailed：创建失败</li>\r          <li>Deleting：正在删除</li>\r          <li>Deleted：已删除</li>\r          <li>Updating：正在更新</li>\r          <li>Enabling：正在激活</li>\r          <li>Disabling：正在禁用</li>\r     </td>\r   </tr>\r   <tr>\r     <td>CNameConfigured</td>\r     <td>加速域名CNAME记录是否已配置</td>\r   </tr>\r   <tr>\r     <td>FreeTrialExpired</td>\r     <td>是否已过试用期</td>\r   </tr>\r   <tr>\r     <td>TimeLastUpdated</td>\r     <td>最新更新时间</td>\r   </tr>\r </table>\r \r **请求失败的JSON示例**:\r ```\r {\r   \"Succeeded\": false,\r   \"ErrorInfo\": {\r     \"Type\": \"MissingAuthorizationHeader\",\r     \"Message\": \"Missing authorization header.\"\r   }\r }\r ```\r <table width=\"100%\" border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\r   <th align=\"left\"><strong>参数名称</strong>\r     </td>\r   <th align=\"left\"><strong>描述</strong>\r     </td>\r \r   <tr>\r     <td>Type</td>\r     <td>错误类型\r          <ul>\r             <li>CredentialInvalid:凭据不合法</li>\r             <li>ParameterMissing:缺少参数</li>\r             <li>ParameterInvalid：参数不合法</li>\r             <li>MissingAuthorizationHeader:缺少Authorization请求头</li>\r             <li>InvalidRequestDateHeader:请求时间不合法</li>\r             <li>MissingRequestDateHeader：缺少请求时间头</li>\r             <li>AuthorizationHeaderExpired:Authorization请求头已失效</li>\r             <li>InvalidAuthorizationHeader:Authorization请求头不合法</li>\r             <li>ApiKeyNotFound：API密钥不存在</li>\r             <li>InvalidApiKey:API密钥不合法</li>\r             <li>WrongSignature:签名不对</li>\r             <li>SubscriptionNotFound：订阅不存在</li>\r             <li>EndpointDoesNotBelongToSubscription：节点不属于订阅</li>\r             <li>EndpointNotInActiveState：节点不处于活跃状态</li>\r             <li>EndpointNotFound：节点不存在</li>\r             <li>MaliciousItemPathDetected：检查到恶意路径</li>\r             <li>PermissionDenied：权限不够</li>\r             <li>RequestThrottled：请求被限流</li>\r          </ul>    \r     </td>\r   </tr>\r   <tr>\r     <td>Message</td>\r     <td>错误信息</td>\r   </tr>\r </table>"}