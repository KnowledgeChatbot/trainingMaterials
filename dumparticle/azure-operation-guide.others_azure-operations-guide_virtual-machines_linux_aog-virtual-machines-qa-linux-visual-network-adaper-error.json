{"Title":"Linux 虚拟机虚拟网卡问题导致无法连接问题","Description":"Linux 虚拟机虚拟网卡问题导致无法连接问题。","Content":"\r # Linux 虚拟机虚拟网卡问题导致无法连接问题 #\r \r ### 问题描述 ###\r \r 当 Linux 虚拟机启动时,通过串口输出或者启动日志, 观察到虚拟网卡启动或者初始化故障, 导致虚拟机无法连接.\r \r ### 问题分析 ###\r \r 常见的超时报错范例如下:\r \r - **CentOS**\r \r     ```\r     Bringing up loopback interface:  [  OK  ]\r     Bringing up interface eth0:  Device eth0 has different MAC address than expected, ignoring.  [FAILED]\r     ```\r \r - **SUSE**\r \r     ```\r     Setting up (localfs) network interfaces:\r         lo        \r         lo        IP address: 127.0.0.1/8   \r                   IP address: 127.0.0.2/8   \r     done   \teth4      \t\t            No configuration found for eth4\r     unused Waiting for mandatory devices:  eth0 \r     29 28 27 26 25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0 \r \r     eth0                                No interface found\t\t\r     ```\r \r ### 解决方案 ###\r \r - **CentOS**\r \r     上述报错指向了 `/etc/sysconfig/network-scripts/ifcfg-eth0` 配置文件里针对 eth0 错误配置了虚拟网卡的硬件地址.解决方案为:\r \r     1. 删除虚拟机保留磁盘,并将系统盘作为数据盘挂载到临时虚拟机上.\r     2. 修改配置文件 `/etc/sysconfig/network-scripts/ifcfg-eth0`\r     3. 将虚拟网卡硬件地址改成正确的值,或者删除该行.\r     4. 保存并退出.\r     5. 分离该磁盘, 并基于该磁盘新建虚拟机.\r \r - **SUSE**\r \r     上述报错是由于硬件设备映射规则 `/etc/udev/rules.d` 中对 eth0 重命名为了 eth4.解决方案为:\r \r     1. 删除虚拟机保留磁盘,并将系统盘作为数据盘挂载到临时虚拟机上.\r     2. 删除 `/etc/udev/rules.d` 中针对 eth0 的命名规则.\r     3. 分离该磁盘, 并基于该磁盘新建虚拟机."}