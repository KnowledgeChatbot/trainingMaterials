{"Title":"Azure 服务总线基于请求-响应的操作中的 AMQP 1.0","Description":"Microsoft Azure 服务总线基于请求/响应的操作的列表。","Content":"# <a name=\"amqp-10-in-microsoft-azure-service-bus-request-response-based-operations\"></a>Microsoft Azure 服务总线中的 AMQP 1.0：基于请求/响应的操作\r \r 本主题定义 Azure 服务总线基于请求/响应的操作的列表。此信息基于 AMQP 管理版本 1.0 工作草案。\r \r 有关详细的线级 AMQP 1.0 协议指南（其中介绍了如何基于 OASIS AMQP 技术规范实现和建立服务总线），请参阅 [Azure 服务总线和事件中心的 AMQP 1.0 协议指南](./service-bus-amqp-protocol-guide.md)。\r \r ## <a name=\"concepts\"></a>概念  \r \r ### <a name=\"entity-description\"></a>实体描述  \r \r 实体说明是指服务总线的 [QueueDescription 类](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.queuedescription)、[TopicDescription 类](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.topicdescription)或 [SubscriptionDescription 类](https://docs.microsoft.com/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription)对象。  \r \r ### <a name=\"brokered-message\"></a>中转消息  \r \r 表示映射到 AMQP 消息的服务总线中的消息。 [服务总线 AMQP 协议指南](./service-bus-amqp-protocol-guide.md)中定义了映射。  \r   \r ## <a name=\"attach-to-entity-management-node\"></a>连接到实体管理节点  \r \r 本文档中所述的全部操作都遵循请求/响应模式，这些操作的范围限制到实体，并需要附加到实体管理节点。\r \r ### <a name=\"create-link-for-sending-requests\"></a>创建用于发送请求的链接  \r \r 创建用于发送请求的管理节点链接。\r \r ```\r     requestLink = session.attach( \t  \r     role: SENDER,   \r            target: { address: \"<entity address>/$management\" },   \r            source: { address: \"\"<my request link unique address>\" }   \r     )  \r ```\r \r ### <a name=\"create-link-for-receiving-responses\"></a>创建用于接收响应的链接  \r \r 创建用于从管理节点接收响应的链接。\r \r ```\r     responseLink = session.attach(\t  \r     role: RECEIVER,   \r         source: { address: \"<entity address>/$management\" }   \r            target: { address: \"<my response link unique address>\" }   \r     )  \r ```\r \r ### <a name=\"transfer-a-request-message\"></a>传输请求消息  \r \r 传输请求消息。\r \r ```\r     requestLink.sendTransfer(  \r             Message(  \r                     properties: {  \r                             message-id: <request id>,  \r                             reply-to: \"<my response link unique address>\"  \r                     },  \r                     application-properties: {  \r                             \"operation\" -> \"<operation>\",  \r                     },  \r             )  \r ```\r \r ### <a name=\"receive-a-response-message\"></a>接收响应消息  \r \r 从响应链接接收响应消息。\r \r ```\r     responseMessage = responseLink.receiveTransfer()  \r ```\r \r 响应消息采用以下形式：\r \r ```\r     Message(  \r     properties: {\t  \r             correlation-id: <request id>  \r         },  \r         application-properties: {  \r                 \"statusCode\" -> <status code>,  \r                 \"statusDescription\" -> <status description>,  \r                },\t\t  \r     )  \r ```\r \r ### <a name=\"service-bus-entity-address\"></a>服务总线实体地址  \r \r 必须如下所示处理服务总线实体：\r \r |实体类型|地址|示例|  \r |-----------------|-------------|-------------|  \r |queue| `<queue_name>` |`“myQueue”`<br /><br /> `“site1/myQueue”`|  \r |主题|`<topic_name>` |`“myTopic”`<br /><br /> `“site2/page1/myQueue”`|  \r |订阅|`<topic_name>/Subscriptions/<subscription_name>` |`“myTopic/Subscriptions/MySub”`  |  \r \r ## <a name=\"message-operations\"></a>消息操作  \r \r ### <a name=\"message-renew-lock\"></a>消息续订锁  \r \r 按实体描述中指定的时间延长消息锁。\r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:renew-lock`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r  请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |`lock-tokens`|uuid 的数组|是|要续订的消息锁令牌。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败。|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |expirations|时间戳的数组|是|对应于请求锁令牌的消息锁令牌新到期日。|  \r \r ### <a name=\"peek-message\"></a>速览消息  \r \r 在不锁定的情况下速览消息。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:peek-message`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |`from-sequence-number`|long|是|从其开始速览的序列号。|  \r |`message-count`|int|是|要速览的消息数量的上限。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200: 正常 – 有更多消息<br /><br /> 0xcc：无内容 - 没有其他消息|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |messages|映射列表|是|映射列表，其中的每个映射都代表一条消息。|  \r   \r 代表消息的映射必须包含以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |message|字节的数组|是|AMQP 1.0 连线编码消息。|  \r \r ### <a name=\"schedule-message\"></a>计划消息  \r \r 计划消息。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:schedule-message`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |messages|映射列表|是|映射列表，其中的每个映射都代表一条消息。|  \r   \r 代表消息的映射必须包含以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |message-id|字符串|是|`amqpMessage.Properties.MessageId` 为字符串|  \r |session-id|字符串|是|`amqpMessage.Properties.GroupId as string`|  \r |partition-key|字符串|是|`amqpMessage.MessageAnnotations.”x-opt-partition-key\"`|  \r |message|字节的数组|是|AMQP 1.0 连线编码消息。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败。|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |sequence-numbers|长整数的数组|是|计划消息的序列号。 序列号用于取消。|  \r \r ### <a name=\"cancel-scheduled-message\"></a>取消计划消息  \r \r 取消计划消息。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:cancel-scheduled-message`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |sequence-numbers|长整数的数组|是|要取消的计划消息的序列号。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败。|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |sequence-numbers|长整数的数组|是|计划消息的序列号。 序列号用于取消。|  \r \r ## <a name=\"session-operations\"></a>会话操作  \r \r ### <a name=\"session-renew-lock\"></a>会话续订锁  \r \r 按实体描述中指定的时间延长消息锁。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:renew-session-lock`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |session-id|字符串|是|会话 ID。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200: 正常 – 有更多消息<br /><br /> 0xcc：无内容 - 没有其他消息|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |expiration|timestamp|是|新到期日。|  \r \r ### <a name=\"peek-session-message\"></a>速览会话消息  \r \r 在不锁定的情况下速览会话消息。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:peek-message`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |from-sequence-number|long|是|从其开始速览的序列号。|  \r |message-count|int|是|要速览的消息数量的上限。|  \r |session-id|字符串|是|会话 ID。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200: 正常 – 有更多消息<br /><br /> 0xcc：无内容 - 没有其他消息|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |messages|映射列表|是|映射列表，其中的每个映射都代表一条消息。|  \r   \r  代表消息的映射必须包含以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |message|字节的数组|是|AMQP 1.0 连线编码消息。|  \r \r ### <a name=\"set-session-state\"></a>设置会话状态  \r \r 设置会话的状态。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:peek-message`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |session-id|字符串|是|会话 ID。|  \r |session-state|字节的数组|是|不透明的二进制数据。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败|  \r |statusDescription|字符串|否|状态的说明。|  \r \r ### <a name=\"get-session-state\"></a>获取会话状态  \r \r 获取会话的状态。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:get-session-state`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |session-id|字符串|是|会话 ID。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |session-state|字节的数组|是|不透明的二进制数据。|  \r \r ### <a name=\"enumerate-sessions\"></a>枚举会话  \r \r 消息传送实体上的枚举会话。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:get-message-sessions`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |last-updated-time|timestamp|是|筛选，以便仅包含在给定时间后更新的会话。|  \r |skip|int|是|跳过会话数量。|  \r |top|int|是|会话数量的上限。|  \r   \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200: 正常 – 有更多消息<br /><br /> 0xcc：无内容 - 没有其他消息|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |skip|int|是|状态代码为 200 时的已跳过会话的数量。|  \r |sessions-ids|字符串的数组|是|状态代码为 200 时的会话 ID 的数组。|  \r \r ## <a name=\"rule-operations\"></a>规则操作  \r \r ### <a name=\"add-rule\"></a>添加规则  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:add-rule`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |rule-name|字符串|是|规则名称，不包括订阅和主题名称。|  \r |rule-description|映射|是|规则说明，详见下一部分。|  \r   \r rule-description 映射必须包含以下条目，其中 sql-filter 和 correlation-filter 互斥：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |sql-filter|映射|是|`sql-filter`，如下一部分中所指定。|  \r |correlation-filter|映射|是|`correlation-filter`，如下一部分中所指定。|  \r |sql-rule-action|映射|是|`sql-rule-action`，详见下一部分。|  \r   \r sql-filter 映射必须包含以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |expression|字符串|是|Sql 筛选器表达式。|  \r   \r correlation-filter 映射至少必须包含以下条目之一：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |correlation-id|字符串|否||  \r |message-id|字符串|否||  \r |to|字符串|否||  \r |reply-to|字符串|否||  \r |label|字符串|否||  \r |session-id|字符串|否||  \r |reply-to-session-id|字符串|否||  \r |content-type|字符串|否||  \r |属性|映射|否|映射到服务总线 [BrokeredMessage.Properties](https://docs.microsoft.com/en-us/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Properties)。|  \r   \r sql-rule-action 映射必须包含以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |expression|字符串|是|Sql 操作表达式。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败|  \r |statusDescription|字符串|否|状态的说明。|  \r \r ### <a name=\"remove-rule\"></a>删除规则  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:remove-rule`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |rule-name|字符串|是|规则名称，不包括订阅和主题名称。|  \r   \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败|  \r |statusDescription|字符串|否|状态的说明。|  \r \r ## <a name=\"deferred-message-operations\"></a>延迟的消息操作  \r \r ### <a name=\"receive-by-sequence-number\"></a>按序列号接收  \r \r 按序列号接收延迟的消息。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:receive-by-sequence-number`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |sequence-numbers|长整数的数组|是|序列号。|  \r |receiver-settle-mode|ubyte|是|AMQP 核心 v1.0 中指定的“接收方结算”模式。|  \r   \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败|  \r |statusDescription|字符串|否|状态的说明。|  \r   \r 响应消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |messages|映射列表|是|映射列表，其中的每个映射都代表一条消息。|  \r   \r 代表消息的映射必须包含以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |lock-token|uuid|是|`receiver-settle-mode` 为 1 时的锁令牌。|  \r |message|字节的数组|是|AMQP 1.0 连线编码消息。|  \r \r ### <a name=\"update-disposition-status\"></a>更新处置状态  \r \r 更新延迟消息的处置状态。  \r \r #### <a name=\"request\"></a>请求  \r \r 请求消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |operation|字符串|是|`com.microsoft:update-disposition`|  \r |`com.microsoft:server-timeout`|uint|否|操作服务器超时以毫秒为单位。|  \r   \r 请求消息正文必须包含 amqp-value 部分，其中所含映射必须包括以下条目：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |disposition-status|字符串|是|已完成<br /><br /> 已放弃<br /><br /> 已挂起|  \r |lock-tokens|uuid 的数组|是|用于更新处置状态的消息锁令牌。|  \r |deadletter-reason|字符串|否|如果处置状态设置为 **已挂起**，可进行设置。|  \r |deadletter-description|字符串|否|如果处置状态设置为 **已挂起**，可进行设置。|  \r |properties-to-modify|映射|否|要修改的服务总线中转消息属性的列表。|  \r \r #### <a name=\"response\"></a>响应  \r \r 响应消息必须包含以下应用程序属性：  \r   \r |密钥|值类型|必须|值内容|  \r |---------|----------------|--------------|--------------------|  \r |statusCode|int|是|HTTP 响应代码 [RFC2616]<br /><br /> 200：确定 - 成功，否则失败|  \r |statusDescription|字符串|否|状态的说明。|\r \r ## <a name=\"next-steps\"></a>后续步骤\r 若要了解有关 AMQP 和服务总线的详细信息，请访问以下链接：\r \r * [服务总线 AMQP 概述]\r * [AMQP 1.0 协议指南]\r \r \r [服务总线 AMQP 概述]: ./service-bus-amqp-overview.md\r [AMQP 1.0 协议指南]: service-bus-amqp-protocol-guide.md\r \r \r \r <!--Update_Description:update meta properties and wording-->"}