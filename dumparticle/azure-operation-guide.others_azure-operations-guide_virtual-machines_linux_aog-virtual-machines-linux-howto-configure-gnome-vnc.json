{"Title":"Linux 虚拟机中配置 GNOME + VNC","Description":"以 CentOS 为例讲述 Linux 虚拟机中配置 GNOME + VNC","Content":"\r # Linux 虚拟机中配置 GNOME + VNC\r \r ## 需求描述\r \r 在特定的需求下，需要用到 Linux 的图形化界面，但是 Azure 平台提供的虚拟机默认没有开放远程图形化登陆的功能。以下解决方案，提供了市面上非常流行的 GNOME + VNC 的组合来远程图形化管理虚拟机。\r \r >[!NOTE]\r >以下步骤适用于 CentOS 6.x 版本，其他版本可能略微有区别。\r \r ## 解决方案\r \r 按照以下步骤完成 GNOME + VNC 的安装 :\r \r 1. 下载 GNOME :\r \r     由于 GNOME 组件中包括了 NetworkManager 的软件包，而该软件包已经包含在 WALinuxAgent 的软件包中，为了避免冲突，建议按照如下步骤进行GNOME的安装：\r \r     1. 登陆虚拟机，切换管理员身份。\r \r     2. 编辑 `/etc/yum.conf` 文件，在最后一行加入： `exclude=NetworkManager*`\r \r     3. 保存并退出\r \r     4. 执行命令：`# yum clean all`\r \r     5. 执行命令：`# yum groupinstall basic-desktop desktop-platform x11 fonts`\r \r 2. 配置GNOME :\r \r     1. 编辑文件 `~/.xinitrc`（如果不存在，则新建），加入：`exec gnome-session`\r \r     2. 保存并退出\r \r     3. 编辑文件 `~/.bashrc` (如果非 bash，则修改相对应的文件)，加入以下内容：\r \r         ```\r         if [ $TERM == \"xterm\" ]; then\r                    export TERM=xterm-color\r         fi\r         ```\r \r 3. 将图形化界面设置为默认 :\r \r     1. 编辑文件 `/etc/inittab` 将如下内容：\r \r         id:3:initdefault:\r \r     2. 替换成\r \r         id:5:initdefault:\r \r     3. 保存并退出\r \r 4. 安装 VNC :\r \r     1. 执行命令：`# yum install tigervnc-server`\r \r     2. 安装完毕以后，执行命令：`# vncserver`\r \r     3. 第一次执行时，需要设置密码，默认端口号为 `5901`，从 `:1`依次加 1\r \r 5. 在虚拟机上配置相应终结点，开放 VNC 端口。\r \r 6. 通过客户端 VNC Viewer 远程登录虚拟机。"}