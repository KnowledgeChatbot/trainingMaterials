{"Title":"使用 python 获取服务总线消息","Description":"通过更新解决 azure-servicebus v0.20.2 之前版本的问题","Content":"\r # 使用 python 获取服务总线消息\r \r ## 问题描述  \r \r 通过 python 获取服务总线（Azure Service Bus ）的消息时发生报错。\r \r **报错信息为：**  \r \r 报错信息为 : `could not convert string to float :'max-age=31536000'`。  \r \r ![error-message](./media/aog-service-bus-qa-python-queue-message/error-message.png)\r \r ## 解决方法\r \r 更换 python 引用的 Service Bus SDK，这个问题发生在 azure-servicebus V0.20.2 版本以前，现在最新版本为 V0.20.3 版本，引用最新即可。  \r \r ### 前提\r \r 1. 搭建 python 环境。\r \r 2. 在 CMD 中使用 `pip` 命令引用 `azure-servicebus V0.20.3`。\r \r 3. 下载 Python Tools for Visual Studio 插件并安装。\r   \r ### 代码如下\r \r ```Python\r from azure.servicebus import ServiceBusService, Message, Queue\r bus_service = ServiceBusService(\r     service_namespace='xhservicebus',\r     host_base='.servicebus.chinacloudapi.cn',\r     shared_access_key_name='RootManageSharedAccessKey',\r     shared_access_key_value='TWJwaQugbYZfu3qnbgXIGNWSGayn1tq9pIXeN3MLRZE=')\r bus_service.create_queue('xuhuaq1')\r msg = Message(b'Test Message')\r bus_service.send_queue_message('xuhuaq1', msg)\r msg = bus_service.receive_queue_message('xuhuaq1')\r print(msg.body)\r ```\r \r 就可以正常的获取 Azure 服务总线队列里的消息。"}