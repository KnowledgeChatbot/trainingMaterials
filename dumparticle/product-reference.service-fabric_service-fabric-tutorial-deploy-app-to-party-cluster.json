{"Title":"将 Azure Service Fabric 应用程序部署到合作群集","Description":"了解如何将应用程序部署到合作群集。","Content":"# <a name=\"deploy-an-application-to-a-party-cluster-in-azure\"></a>将应用程序部署到 Azure 中的合作群集\r 本教程是一个系列的第二部分，介绍如何将 Azure Service Fabric 应用程序部署到 Azure 中的合作群集。\r \r 在该系列教程的第二部分中，你会学习如何：\r > [!div class=\"checklist\"]\r > * 使用 Visual Studio 将应用程序部署到远程群集\r > * 使用 Service Fabric Explorer 从群集中删除应用程序\r \r 在此系列教程中，你会学习如何：\r > [!div class=\"checklist\"]\r > * [构建 .NET Service Fabric 应用程序](service-fabric-tutorial-create-dotnet-app.md)\r > * 将应用程序部署到远程群集\r > * [使用 Visual Studio Team Services 配置 CI/CD](service-fabric-tutorial-deploy-app-with-cicd-vsts.md)\r > * [设置监视和诊断应用程序](service-fabric-tutorial-monitoring-aspnet.md)\r \r ## <a name=\"prerequisites\"></a>先决条件\r 在开始学习本教程之前：\r - 如果还没有 Azure 订阅，请创建一个[试用帐户](https://www.azure.cn/pricing/1rmb-trial/?WT.mc_id=A261C142F)\r - [安装 Visual Studio 2017](https://www.visualstudio.com/)，并安装 **Azure 开发**以及 **ASP.NET 和 Web 开发**工作负荷。\r - [安装 Service Fabric SDK](service-fabric-get-started.md)\r \r ## <a name=\"download-the-voting-sample-application\"></a>下载投票示例应用程序\r 如果未生成[本系列教程的第一部分](service-fabric-tutorial-create-dotnet-app.md)中的投票示例应用程序，可以下载它。 在命令窗口中，运行以下命令，将示例应用存储库克隆到本地计算机。\r \r ```\r git clone https://github.com/Azure-Samples/service-fabric-dotnet-quickstart\r ```\r \r ## <a name=\"set-up-a-party-cluster\"></a>设置合作群集\r 合作群集是在 Azure 上托管的、由 Service Fabric 团队运行的免费限时 Service Fabric 群集，任何人都可以在其中部署应用程序及了解平台的情况。 免费！\r \r 若要获取合作群集的访问权限，请浏览到此站点：http://aka.ms/tryservicefabric，并遵照说明获取群集访问权限。 需要一个 Facebook 或 GitHub 帐户才能获取合作群集的访问权限。\r \r 如果需要，可以使用自己的群集而不是参与方群集。  ASP.NET Core Web 前端使用反向代理与有状态服务后端通信。  参与方群集和本地开发群集默认启用反向代理。  如果将投票示例应用程序部署到自己的群集，则必须[在群集中启用反向代理](service-fabric-reverseproxy.md#setup-and-configuration)。\r \r > [!NOTE]\r > 合作群集不受保护，因此，在其中放置的应用程序和任何数据可能会被其他人看到。 请勿部署不希望其他人看到的任何内容。 请务必仔细阅读我们的使用条款，了解所有详细信息。\r \r ## <a name=\"deploy-the-app-to-the-azure\"></a>将应用部署到 Azure\r 应用程序准备就绪后，可以直接从 Visual Studio 将其部署到合作群集。\r \r 1. 在解决方案资源管理器中，右键单击“投票”，再选择“发布”。\r \r     ![“发布”对话框](./media/service-fabric-tutorial-deploy-app-to-party-cluster/publish-app.png)\r \r 2. 在“连接终结点”字段中键入合作群集的连接终结点，单击“发布”。\r \r     完成发布后，应该可以通过浏览器向应用程序发送请求。\r \r 3. 打开首选的浏览器，键入群集地址（不带端口信息的连接终结点 - 例如 win1kw5649s.chinanorth.cloudapp.chinacloudapi.cn）。\r \r     现在，应会看到在本地运行该应用程序时所看到的相同结果。\r \r     ![来自群集的 API 响应](./media/service-fabric-tutorial-deploy-app-to-party-cluster/response-from-cluster.png)\r \r ## <a name=\"remove-the-application-from-a-cluster-using-service-fabric-explorer\"></a>使用 Service Fabric Explorer 从群集中删除应用程序\r Service Fabric Explorer 是用于浏览和管理 Service Fabric 群集中的应用程序的图形用户界面。\r \r 若要从合作群集删除应用程序，请执行以下操作：\r \r 1. 使用合作群集注册页提供的链接浏览到 Service Fabric Explorer。 例如，http://win1kw5649s.chinanorth.cloudapp.chinacloudapi.cn:19080/Explorer/index.html。\r \r 2. 在 Service Fabric Explorer 中，导航到左侧树视图中的“fabric://Voting”节点。\r \r 3. 在右侧的“概要”窗格中单击“操作”按钮，选择“删除应用程序”。 确认删除该应用程序实例，随即会删除群集中运行的应用程序实例。\r \r ![在 Service Fabric Explorer 中删除应用程序](./media/service-fabric-tutorial-deploy-app-to-party-cluster/delete-application.png)\r \r ## <a name=\"remove-the-application-type-from-a-cluster-using-service-fabric-explorer\"></a>使用 Service Fabric Explorer 从群集中删除应用程序类型\r 应用程序在 Service Fabric 群集中部署为应用程序类型，因此，我们可以在群集中运行该应用程序的多个实例和版本。 删除正在运行的应用程序实例后，还可以删除类型，以完成部署的清理。\r \r 有关 Service Fabric 中的应用程序模型的详细信息，请参阅[在 Service Fabric 中为应用程序建模](service-fabric-application-model.md)。\r \r 1. 在树视图中导航到“VotingType”节点。\r \r 2. 在右侧的“概要”窗格中单击“操作”按钮，选择“取消预配类型”。 确认取消预配应用程序类型。\r \r ![在 Service Fabric Explorer 中取消预配应用程序类型](./media/service-fabric-tutorial-deploy-app-to-party-cluster/unprovision-type.png)\r \r 本教程到此结束。\r \r ## <a name=\"next-steps\"></a>后续步骤\r 在本教程中，你已学习了如何执行以下操作：\r \r > [!div class=\"checklist\"]\r > * 使用 Visual Studio 将应用程序部署到远程群集\r > * 使用 Service Fabric Explorer 从群集中删除应用程序\r \r 转到下一教程：\r > [!div class=\"nextstepaction\"]\r > [使用 Visual Studio Team Services 设置持续集成](service-fabric-tutorial-deploy-app-with-cicd-vsts.md)\r \r <!--Update_Description: update meta properties， wording update -->"}