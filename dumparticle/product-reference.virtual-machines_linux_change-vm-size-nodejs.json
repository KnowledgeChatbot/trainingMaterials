{"Title":"使用 Azure CLI 1.0 调整 Linux VM 的大小","Description":"如何通过更改 VM 大小来增加或减少 Linux 虚拟机。","Content":"# <a name=\"resize-a-linux-vm-with-azure-cli-10\"></a>使用 Azure CLI 1.0 调整 Linux VM 的大小\r \r ## <a name=\"overview\"></a>概述\r \r 预配虚拟机 (VM) 后，可以通过更改 [VM 大小][vm-sizes]来扩展或缩减 VM。 在某些情况下，必须先解除分配 VM。 如果新大小在托管 VM 的硬件群集上不可用，则可能会出现这种情况。\r \r 本文介绍了如何使用 [Azure CLI][azure-cli]来调整 Linux VM 的大小。\r \r [!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-rm-include.md)]\r \r ## <a name=\"cli-versions-to-complete-the-task\"></a>用于完成任务的 CLI 版本\r 可使用以下 CLI 版本之一完成任务：\r \r - [Azure CLI 1.0](#resize-a-linux-vm) - 适用于经典部署模型和资源管理部署模型（本文）的 CLI\r - [Azure CLI 2.0](change-vm-size.md?toc=%2fvirtual-machines%2flinux%2ftoc.json) - 适用于资源管理部署模型的下一代 CLI\r \r ## <a name=\"resize-a-linux-vm\"></a>调整 Linux VM 的大小\r 若要调整 VM 的大小，请执行以下步骤。\r \r 1. 运行以下 CLI 命令。 此命令将列出托管 VM 的硬件群集上的可用 VM 大小。\r \r     ```azurecli\r     azure vm sizes -g myResourceGroup --vm-name myVM\r     ```\r 2. 如果列出了所需大小，请运行以下命令来调整 VM 的大小。\r \r     ```azurecli\r     azure vm set -g myResourceGroup --vm-size <new-vm-size> -n myVM  \\\r         --enable-boot-diagnostics\r         --boot-diagnostics-storage-uri https://mystorageaccount.blob.core.chinacloudapi.cn/ \r     ```\r \r     在此过程中，VM 将重新启动。 重新启动后，现有 OS 和数据磁盘将重新映射。 临时磁盘上的所有内容将会丢失。\r \r     使用 `--enable-boot-diagnostics` 选项启用 [启动诊断][boot-diagnostics]，以记录所有与启动相关的错误。\r 3. 如果未列出所需大小，请运行以下命令来解除分配 VM、调整其大小，然后将它重新启动。\r \r     ```azurecli\r     azure vm deallocate -g myResourceGroup myVM\r     azure vm set -g myResourceGroup --vm-size <new-vm-size> -n myVM \\\r         --enable-boot-diagnostics --boot-diagnostics-storage-uri \\\r         https://mystorageaccount.blob.core.chinacloudapi.cn/ \r     azure vm start -g myResourceGroup myVM\r     ```\r \r    > [!WARNING]\r    > 解除分配 VM 也会释放分配给该 VM 的所有动态 IP 地址。 OS 和数据磁盘不受影响。\r    > \r    > \r \r ## <a name=\"next-steps\"></a>后续步骤\r 若要提高可伸缩性，请运行多个 VM 实例并进行横向扩展。 \r \r <!-- links -->\r \r [azure-cli]:../../cli-install-nodejs.md\r [boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/\r [vm-sizes]:sizes.md\r "}