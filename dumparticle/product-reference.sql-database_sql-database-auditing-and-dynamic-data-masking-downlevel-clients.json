{"Title":"Azure SQL 数据库的表审核、TDS 重定向和 IP 终结点","Description":"了解在 Azure SQL 数据库中实现表审核时，审核、TDS 重定向和 IP 终结点的变化。","Content":"# <a name=\"sql-database----downlevel-clients-support-and-ip-endpoint-changes-for-table-auditing\"></a>SQL 数据库 - 针对表审核的下层客户端支持和 IP 终结点更改\r \r > [!IMPORTANT]\r > 本文档仅适用于**现已弃用**的表审核。<br>\r > 请使用新的 [Blob 审核](sql-database-auditing.md)方法，该方法**不**需要修改下层客户端的连接字符串。 有关 Blob 审核的其他信息可在 [SQL 数据库审核入门](sql-database-auditing.md)中找到。\r \r 对于支持 TDS 重定向的 SQL 客户端，可以自动使用[数据库审核](sql-database-auditing.md)。 请注意，使用 Blob 审核方法时，重定向不适用。\r \r ## <a id=\"subheading-1\"></a>下层客户端支持\r 任何实现了 TDS 7.4 的客户端同样应当支持重定向。 例外情况包括不完全支持重定向功能的 JDBC 4.0 以及未实现重定向的 Tedious（适用于 Node.JS）。\r \r 对于“下层客户端”，即支持 TDS 7.3 版和更低版本的客户端 — 应修改连接字符串中的服务器 FQDN：\r \r 连接字符串中的原始服务器 FQDN：<服务器名称>.database.chinacloudapi.cn\r \r 连接字符串中修改后的服务器 FQDN：<服务器名称>.database.secure.chinacloudapi.cn\r \r “下层客户端”的部分列表包括：\r \r * .NET 4.0 和更低版本，\r * ODBC 10.0 和更低版本。\r * JDBC（JDBC 虽然支持 TDS 7.4，但不完全支持 TDS 重定向功能）\r * Tedious（适用于 Node.JS）\r \r 注释：上面的服务器 FDQN 修改可能还可用于应用 SQL Server 级别的审核策略，而无需在每个数据库中进行配置（临时缓解）。\r \r ## <a id=\"subheading-2\"></a>IP 终结点在启用审核时更改\r 请注意，启用表审核时，数据库的 IP 终结点将发生更改。 如果具有严格的防火墙设置，请相应地更新这些防火墙设置。\r \r 新的数据库 IP 终结点将取决于数据库区域：\r \r | 数据库区域 | 可能的 IP 终结点 |\r | --- | --- |\r | 中国北部  | 139.217.29.176, 139.217.28.254 |\r | 中国东部  | 42.159.245.65, 42.159.246.245 |"}