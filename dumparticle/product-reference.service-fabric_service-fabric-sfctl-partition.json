{"Title":"Azure Service Fabric CLI - sfctl partition","Description":"介绍 Service Fabric CLI sfctl partition 命令。","Content":"# <a name=\"sfctl-partition\"></a>sfctl partition\r 查询和管理任何服务的分区。\r \r ## <a name=\"commands\"></a>命令\r \r |命令|说明|\r | --- | --- |\r |    data-loss      | 此 API 造成指定的分区发生数据丢失。|\r |    data-loss-status  | 获取使用 StartDataLoss API 启动的分区数据丢失操作的进度。|\r |    health         | 获取指定 Service Fabric 分区的运行状况。|\r |    info           | 获取有关 Service Fabric 分区的信息。|\r |    list           | 获取 Service Fabric 服务的分区列表。|\r |    load           | 获取指定的 Service Fabric 分区的负载。|\r |    load-reset     | 重置 Service Fabric 分区的当前负载。|\r |    quorum-loss    | 造成给定的有状态服务分区发生仲裁丢失。|\r |    quorum-loss-status| 获取使用 StartQuorumLoss API 在分区上启动的仲裁丢失操作的进度。|\r |    recover        | 向 Service Fabric 群集指出应该尝试恢复当前停滞在仲裁丢失状态的特定分区。|\r |    recover-all    | 向 Service Fabric 群集指出应该尝试恢复当前停滞在仲裁丢失状态的所有服务（包括系统服务）。|\r |    report-health  | 发送有关 Service Fabric 分区的运行状况报告。|\r |    restart        | 此 API 重启指定分区的部分或所有副本或者实例。|\r |    restart-status | 获取使用 StartPartitionRestart 启动的 PartitionRestart 操作的进度。|\r |    svc-name       | 获取分区的 Service Fabric 服务名称。|\r \r ## <a name=\"sfctl-partition-health\"></a>sfctl partition health\r 获取指定 Service Fabric 分区的运行状况。\r \r 获取指定分区的运行状况信息。 使用 EventsHealthStateFilter 可以根据运行状态筛选针对服务报告的运行状况事件的集合。\r 使用 ReplicasHealthStateFilter 可以筛选分区上 ReplicaHealthState 对象的集合。 如果指定运行状况存储中不存在的分区，此 cmdlet 会返回错误。 上获取。\r \r ### <a name=\"arguments\"></a>参数\r \r |参数|说明|\r | --- | --- |\r | --partition-id      [必需]| 分区的标识。|\r | --events-health-state-filter  | 用于根据运行状态筛选返回的 HealthEvent 对象集合。 此参数的可能值包括以下运行状态之一的整数值。                仅返回与筛选器匹配的事件。 所有事件用于评估聚合运行状态。 如果未指定，则返回所有项。 状态值为基于标志的枚举，因此该值可是使用按位“OR”运算符获取的值的组合。 例如，如果提供的值为 6，则返回 HealthState 值为 OK (2) 和 Warning (4) 的所有事件。 - Default - 默认值。 匹配任何 HealthState。 值为 0。 - None - 不与任何 HealthState 值匹配的筛选器。 未返回有关给定状态集合的结果时使用。 值为 1。 - Ok - 与 HealthState 值为 OK 的输入匹配的筛选器。 值为 2。 - Warning - 与 HealthState 值为 Warning 的输入匹配的筛选器。 值为 4。 - Error - 与 HealthState 值为 Error 的输入匹配的筛选器。 值为 8。                - All - 与具有任意 HealthState 值的输入匹配的筛选器。                值为 65535。|\r |--exclude-health-statistics   | 指示是否作为查询结果的一部分返回运行状况统计数据。 默认值为 False。 统计信息显示处于 Ok、Warning 和 Error 运行状态的子实体数。|\r | --replicas-health-state-filter| 用于筛选分区上 ReplicaHealthState 对象的集合。 可从位运算的成员或 HealthStateFilter 的成员获取该值。 仅返回与筛选器匹配的副本。 所有副本用于评估聚合运行状态。 如果未指定，则返回所有项。 状态值为基于标志的枚举，因此该值可是使用按位“OR”运算符获取的值的组合。 例如，如果提供的值为 6，则返回 HealthState 值为 OK (2) 和 Warning (4) 的所有事件。 此参数的可能值包括以下运行状态之一的整数值。 - Default - 默认值。 匹配任何 HealthState。 值为 0。 - None - 不与任何 HealthState 值匹配的筛选器。 未返回有关给定状态集合的结果时使用。 值为 1。 - Ok - 与 HealthState 值为 OK 的输入匹配的筛选器。 值为 2。 - Warning - 与 HealthState 值为 Warning 的输入匹配的筛选器。 值为 4。 - Error - 与 HealthState 值为 Error 的输入匹配的筛选器。 值为 8。 - All - 与具有任意 HealthState 值的输入匹配的筛选器。 值为 65535。|\r | --timeout -t               | 服务器超时，以秒为单位。  默认值：60。|\r \r ### <a name=\"global-arguments\"></a>全局参数\r \r |参数|说明|\r | --- | --- |\r | --debug                    | 提高日志记录详细程度，以显示所有调试日志。|\r | --help -h                  | 显示此帮助消息并退出。|\r | --output -o                | 输出格式。  允许的值：json、jsonc、table、tsv。                默认值：json。|\r | --query                    | JMESPath 查询字符串。 有关详细信息和示例，请参阅 http://jmespath.org/。 |\r | --verbose                  | 提高日志记录详细程度。 使用 --debug 可获取完整调试日志。|\r \r ## <a name=\"sfctl-partition-info\"></a>sfctl partition info\r 获取有关 Service Fabric 分区的信息。\r \r Partitions 终结点返回有关指定的分区的信息。 响应包括分区 ID、分区方案信息、分区支持的密钥、状态、运行状况和有关分区的其他详细信息。\r \r ### <a name=\"arguments\"></a>参数\r \r |参数|说明|\r | --- | --- |\r | --partition-id [必需]| 分区的标识。|\r | --timeout -t          | 服务器超时，以秒为单位。  默认值：60。|\r \r ### <a name=\"global-arguments\"></a>全局参数\r \r |参数|说明|\r | --- | --- |\r | --debug               | 提高日志记录详细程度，以显示所有调试日志。|\r | --help -h             | 显示此帮助消息并退出。|\r | --output -o           | 输出格式。  允许的值：json、jsonc、table、tsv。  默认值：json。|\r | --query               | JMESPath 查询字符串。 有关详细信息和示例，请参阅 http://jmespath.org/。|\r | --verbose             | 提高日志记录详细程度。 使用 --debug 可获取完整调试日志。|\r \r ## <a name=\"sfctl-partition-list\"></a>sfctl partition list\r 获取 Service Fabric 服务的分区列表。\r \r 获取 Service Fabric 服务的分区列表。 分区 ID、分区方案信息、分区支持的密钥、状态、运行状况和有关分区的其他详细信息。\r \r ### <a name=\"arguments\"></a>参数\r \r |参数|说明|\r | --- | --- |\r | --service-id [必需]| 服务的标识。 这通常是不带“fabric:”URI 方案的服务全名。 从版本 6.0 开始，分层名称以“~”字符隔开。 例如，如果服务名称为“fabric://myapp/app1/svc1”，则 6.0 及更高版本中的服务标识为“myapp~app1~svc1”，在以前的版本中为“myapp/app1/svc1”。|\r | --continuation-token| 继续标记参数用于获取下一组结果。         如果单个响应无法容纳来自系统的结果，则 API 响应中包括含有非空值的继续标记。 当此值传递到下一个 API 调用时，API 返回下一组结果。 如果没有更多结果，则继续标记不包含值。 不应将此参数的值进行 URL 编码。|\r | --timeout -t        | 服务器超时，以秒为单位。  默认值：60。|\r \r ### <a name=\"global-arguments\"></a>全局参数\r \r |参数|说明|\r | --- | --- |\r | --debug             | 提高日志记录详细程度，以显示所有调试日志。|\r | --help -h           | 显示此帮助消息并退出。|\r | --output -o         | 输出格式。  允许的值：json、jsonc、table、tsv。  默认值：json。|\r | --query             | JMESPath 查询字符串。 有关详细信息和示例，请参阅 http://jmespath.org/。|\r | --verbose           | 提高日志记录详细程度。 使用 --debug 可获取完整调试日志。|\r \r ## <a name=\"sfctl-partition-load\"></a>sfctl partition load\r 获取指定的 Service Fabric 分区的负载。\r \r 返回有关指定的分区的信息。 响应包括负载信息列表。 每项信息包括负载指标名称、值以及上次报告时间 (UTC)。\r \r ### <a name=\"arguments\"></a>参数\r \r |参数|说明|\r | --- | --- |\r | --partition-id [必需]| 分区的标识。|\r | --timeout -t          | 服务器超时，以秒为单位。  默认值：60。|\r \r ### <a name=\"global-arguments\"></a>全局参数\r \r |参数|说明|\r | --- | --- |\r | --debug               | 提高日志记录详细程度，以显示所有调试日志。|\r | --help -h             | 显示此帮助消息并退出。|\r | --output -o           | 输出格式。  允许的值：json、jsonc、table、tsv。  默认值：json。|\r | --query               | JMESPath 查询字符串。 有关详细信息和示例，请参阅 http://jmespath.org/。|\r | --verbose             | 提高日志记录详细程度。 使用 --debug 可获取完整调试日志。|\r \r ## <a name=\"sfctl-partition-recover\"></a>sfctl partition recover\r 向 Service Fabric 群集指出应该尝试恢复当前停滞在仲裁丢失状态的特定分区。\r \r 向 Service Fabric 群集指出应该尝试恢复当前停滞在仲裁丢失状态的特定分区。 仅当确定已关闭的副本无法恢复时，才执行此操作。 不当地使用此 API 可能导致潜在的数据丢失。\r \r ### <a name=\"arguments\"></a>参数\r \r |参数|说明|\r | --- | --- |\r | --partition-id [必需]| 分区的标识。|\r | --timeout -t          | 服务器超时，以秒为单位。  默认值：60。|\r \r ### <a name=\"global-arguments\"></a>全局参数\r \r |参数|说明|\r | --- | --- |\r | --debug               | 提高日志记录详细程度，以显示所有调试日志。|\r | --help -h             | 显示此帮助消息并退出。|\r | --output -o           | 输出格式。  允许的值：json、jsonc、table、tsv。  默认值：json。|\r | --query               | JMESPath 查询字符串。 有关详细信息和示例，请参阅 http://jmespath.org/。|\r | --verbose             | 提高日志记录详细程度。 使用 --debug 可获取完整调试日志。|\r \r ## <a name=\"sfctl-partition-restart\"></a>sfctl partition restart\r 此 API 重启指定分区的部分或所有副本或者实例。\r \r 此 API 可用于测试故障转移。 如果用于针对无状态服务分区，RestartPartitionMode 必须是 AllReplicasOrInstances。 使用相同的 OperationId 调用 GetPartitionRestartProgress API 可获取进度。 上获取。\r \r ### <a name=\"arguments\"></a>参数\r \r |参数|说明|\r | --- | --- |\r | --operation-id           [必需]| 用于标识此 API 的调用的 GUID。  需将此参数传入相应的 GetProgress API。|\r | --partition-id           [必需]| 分区的标识。|\r | --restart-partition-mode [必需]| - Invalid - 保留值。  不传入 API。 - AllReplicasOrInstances - 重启分区中的所有副本或实例一次。 -OnlyActiveSecondaries - 仅重启辅助副本。 上获取。|\r | --service-id             [必需]| 服务的标识。 这通常是不带“fabric:”URI 方案的服务全名。 从版本 6.0 开始，分层名称以“~”字符隔开。 例如，如果服务名称为“fabric://myapp/app1/svc1”，则 6.0 及更高版本中的服务标识为“myapp~app1~svc1”，在以前的版本中为“myapp/app1/svc1”。|\r | --timeout -t                    | 服务器超时，以秒为单位。  默认值：60。|\r \r ### <a name=\"global-arguments\"></a>全局参数\r \r |参数|说明|\r | --- | --- |\r | --debug                         | 提高日志记录详细程度，以显示所有调试日志。|\r | --help -h                       | 显示此帮助消息并退出。|\r | --output -o                     | 输出格式。  允许的值：json、jsonc、table、tsv。                     默认值：json。|\r | --query                         | JMESPath 查询字符串。 有关详细信息和示例，请参阅 http://jmespath.org/。|\r | --verbose                       | 提高日志记录详细程度。 使用 --debug 可获取完整的调试日志。|\r \r ## <a name=\"next-steps\"></a>后续步骤\r - [安装](service-fabric-cli.md) Service Fabric CLI。\r - 了解如何通过[示例脚本](/service-fabric/scripts/sfctl-upgrade-application)使用 Service Fabric CLI。\r \r <!--Update_Description: new articles on service fabric sfctl partition -->"}