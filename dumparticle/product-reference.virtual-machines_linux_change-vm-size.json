{"Title":"使用 CLI 2.0 调整 Linux 虚拟机的大小","Description":"如何通过更改 VM 大小来增加或减少 Linux 虚拟机。","Content":"# <a name=\"resize-a-linux-virtual-machine-using-cli-20\"></a>使用 CLI 2.0 调整 Linux 虚拟机的大小\r \r 预配虚拟机 (VM) 后，可以通过更改 [VM 大小][vm-sizes]来扩展或缩减 VM。 在某些情况下，必须先解除分配 VM。 如果所需大小在托管 VM 的硬件群集上不可用，则需要解除分配 VM。 本文详细介绍了如何使用 Azure CLI 2.0 来调整 Linux VM 的大小。 还可以使用 [Azure CLI 1.0](change-vm-size-nodejs.md?toc=%2fvirtual-machines%2flinux%2ftoc.json) 执行这些步骤。\r \r ## <a name=\"resize-a-vm\"></a>调整 VM 的大小\r 若要调整 VM 的大小，需要最新的 [Azure CLI 2.0](https://docs.azure.cn/zh-cn/cli/install-az-cli2?view=azure-cli-latest) 并已使用 [az login](https://docs.azure.cn/zh-cn/cli/?view=azure-cli-latest#login) 登录到 Azure 帐户。\r \r [!INCLUDE [azure-cli-2-azurechinacloud-environment-parameter](../../../includes/azure-cli-2-azurechinacloud-environment-parameter.md)]\r \r 1. 使用 [az vm list-vm-resize-options](https://docs.azure.cn/zh-cn/cli/vm?view=azure-cli-latest#list-vm-resize-options) 查看托管 VM 的硬件群集上可用的 VM 大小的列表。 以下示例列出资源组 `myResourceGroup` 区域中名为 `myVM` 的 VM 的 VM 大小：\r \r     ```azurecli\r     az vm list-vm-resize-options --resource-group myResourceGroup --name myVM --output table\r     ```\r \r 2. 如果列出了所需的 VM 大小，则使用 [az vm resize](https://docs.azure.cn/zh-cn/cli/vm?view=azure-cli-latest#resize) 调整 VM 大小。 以下示例将名为 `myVM` 的 VM 调整为 `Standard_DS3_v2` 大小：\r \r     ```azurecli\r     az vm resize --resource-group myResourceGroup --name myVM --size Standard_DS3_v2\r     ```\r \r     在此过程中，VM 将重新启动。 重新启动后，现有 OS 和数据磁盘将重新映射。 临时磁盘上的所有内容将会丢失。\r \r 3. 如果所需的 VM 大小未列出，则需先使用 [az vm deallocate](https://docs.azure.cn/zh-cn/cli/vm?view=azure-cli-latest#deallocate)解除分配 VM。 此过程允许将 VM 调整为该区域支持的任何可用大小然后将其启动。 以下步骤会将名为 `myResourceGroup` 的资源组中名为 `myVM` 的 VM 解除分配、调整大小并启动：\r \r     ```azurecli\r     az vm deallocate --resource-group myResourceGroup --name myVM\r     az vm resize --resource-group myResourceGroup --name myVM --size Standard_DS3_v2\r     az vm start --resource-group myResourceGroup --name myVM\r     ```\r \r    > [!WARNING]\r    > 解除分配 VM 也会释放分配给该 VM 的所有动态 IP 地址。 OS 和数据磁盘不受影响。\r \r ## <a name=\"next-steps\"></a>后续步骤\r 若要提高可伸缩性，请运行多个 VM 实例并进行横向扩展。 \r \r <!-- links -->\r [boot-diagnostics]: https://azure.microsoft.com/blog/boot-diagnostics-for-virtual-machines-v2/\r [vm-sizes]:sizes.md\r "}