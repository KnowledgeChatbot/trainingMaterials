{"Title":"Azure 服务总线常见问题 (FAQ)","Description":"回答了一些关于 Azure 服务总线的常见问题。","Content":"# <a name=\"service-bus-faq\"></a>服务总线常见问题解答\r 本文讨论了一些关于 Microsoft Azure 服务总线的常见问题解答。 还可以访问 [Azure 支持常见问题解答](http://go.microsoft.com/fwlink/?LinkID=185083)了解常规的 Azure 定价和支持信息。\r \r ## <a name=\"general-questions-about-azure-service-bus\"></a>关于 Azure 服务总线的一般问题\r ### <a name=\"what-is-azure-service-bus\"></a>什么是 Azure 服务总线？\r [Azure 服务总线](service-bus-messaging-overview.md)是一个异步消息传送云平台，可允许在分离的系统之间发送数据。 Microsoft 以服务的形式提供此功能，这表示不需要托管任何自有硬件就能使用它。\r \r ### <a name=\"what-is-a-service-bus-namespace\"></a>什么是服务总线命名空间？\r [命名空间](service-bus-create-namespace-portal.md)提供了用于对应用程序中的服务总线资源进行寻址的范围容器。 必须创建命名空间才能使用服务总线，而且这也是开始使用的第一步。\r \r ### <a name=\"what-is-an-azure-service-bus-queue\"></a>什么是 Azure 服务总线队列？\r [服务总线队列](service-bus-queues-topics-subscriptions.md)是用于存储消息的实体。 有多个应用程序，或者有多个需要彼此通信的分布式应用程序部分时，队列特别有用。 队列和发行中心的相似之处在于，两者都会接收多个产品（消息），再从该处送出。\r \r ### <a name=\"what-are-azure-service-bus-topics-and-subscriptions\"></a>什么是 Azure 服务总线主题和订阅？\r 主题可被视为队列，使用多个订阅时，它成为更丰富的消息传送模型；实质上是一种一对多的通信工具。 此发布/订阅模型（或 pub/sub）启用了一个应用程序，该应用程序将消息发送到具有多个订阅的主题中，进而使多个应用程序接收到该消息。\r \r ### <a name=\"what-is-a-partitioned-entity\"></a>什么是分区实体？\r \r 传统的队列或主题由单个消息中转站进行处理并存储在一个消息存储中。 [分区队列或主题](./service-bus-partitioning.md)由多个消息中转站处理，并存储在多个消息传送存储中。 这意味着分区的队列或主题的总吞吐量不再受到单个消息中转站或消息存储的性能所限制。 此外，消息传送存储的临时中断不会导致分区队列或主题不可用。\r \r 请注意，使用分区实体时不保证排序。 如果某个分区不可用，仍可从其他分区发送和接收消息。\r \r ## <a name=\"best-practices\"></a>最佳实践\r ### <a name=\"what-are-some-azure-service-bus-best-practices\"></a>Azure 服务总线的最佳实践有哪些？\r 请参阅[使用服务总线改进性能的最佳做法][Best practices for performance improvements using Service Bus] - 本文介绍了如何在交换消息时优化性能。\r \r ### <a name=\"what-should-i-know-before-creating-entities\"></a>创建实体前的须知事项有哪些？\r 队列和主题的以下属性是固定不变的。 预配实体时，请考虑此限制，因为必须创建新的替代实体才可修改这些属性。\r \r -   大小\r \r -   分区\r \r -   会话\r \r -   重复检测\r \r -   快速实体\r \r ## <a name=\"service-bus-pricing\"></a> 定价\r 本部分回答了一些关于服务总线定价结构的常见问题。\r \r [服务总线定价和计费](./service-bus-pricing-billing.md)一文介绍了服务总线中的计费计量。有关服务总线定价选项的具体信息，请参阅[服务总线定价详细信息](https://www.azure.cn/pricing/details/messaging/)。\r \r \r ### <a name=\"how-do-you-charge-for-service-bus\"></a>服务总线如何收取费用？\r 有关服务总线定价的完整信息，请参阅[服务总线定价详细信息][Pricing overview]。 除标示的价格外，还需为在其中部署应用程序的数据中心之外的相关数据输出支付费用。\r \r ### <a name=\"what-usage-of-service-bus-is-subject-to-data-transfer-what-is-not\"></a>服务总线的哪些使用情况受数据传输限制？ 哪些不受其限制？\r 在给定 Azure 区域内的任何数据传输和入站数据传输均不收费。 \r \r ### <a name=\"does-service-bus-charge-for-storage\"></a>服务总线是否对存储收费？\r \r 否，服务总线不对存储收费。 但是，对每个队列/主题可以保留的数据最大量设有配额限制。 请参阅下一个常见问题。\r \r ## <a name=\"quotas\"></a>配额\r \r 有关服务总线限制和配额的列表，请参阅[服务总线配额概述][Quotas overview]。\r \r ### <a name=\"does-service-bus-have-any-usage-quotas\"></a>服务总线是否有任何使用率配额？\r 默认情况下，对于任何云服务，Azure 每月都会设置聚合的使用率配额，此配额基于客户的所有订阅进行计算。 如果需要这些限制之外的更多配额，可以随时联系客户服务，以便我们了解需求并相应地调整这些限制。 对于服务总线，总用量配额是每月 50 亿条消息。\r \r 虽然我们保留禁用在给定月份超过使用配额的客户帐户的权利，但我们仍然会在采取任何措施前发送电子邮件通知，并多次尝试与客户联系。 超过这些配额的客户仍需负责超出配额的费用。\r \r 至于 Azure 上的其他服务，服务总线会强制使用一组特定配额，以确保资源的公平使用。 可以在[服务总线配额概述][Quotas overview]中找到有关这些配额的更多详细信息。\r \r ## <a name=\"troubleshooting\"></a>故障排除\r ### <a name=\"what-are-some-of-the-exceptions-generated-by-azure-service-bus-apis-and-their-suggested-actions\"></a>Azure 服务总线 API 生成了哪些异常？建议采取什么操作？\r 有关可能的服务总线异常的列表，请参阅[异常概述][Exceptions overview]。\r \r ### <a name=\"what-is-a-shared-access-signature-and-which-languages-support-generating-a-signature\"></a>什么是共享访问签名？哪些语言支持生成签名？\r 共享访问签名是基于 SHA–256 安全哈希或 URI 的身份验证机制。 有关如何在 Node、PHP、Java 和 C\\# 中生成自有签名的信息，请参阅[共享访问签名][Shared Access Signatures]一文。\r \r ## <a name=\"subscription-and-namespace-management\"></a>订阅和命名空间管理\r ### <a name=\"how-do-i-migrate-a-namespace-to-another-azure-subscription\"></a>如何将命名空间迁移到另一个 Azure 订阅中？\r \r 可以使用 [Azure 门户](https://portal.azure.cn)或 PowerShell 命令，将命名空间从一个 Azure 订阅移到另一个 Azure 订阅。 若要执行此操作，命名空间必须已处于活动状态。 执行这些命令的用户必须是源订阅和目标订阅的管理员。\r \r #### <a name=\"portal\"></a>门户\r \r 若要使用 Azure 门户将服务总线命名空间迁移到其他订阅，可按照[此处](../azure-resource-manager/resource-group-move-resources.md#use-portal)的说明操作。 \r \r #### <a name=\"powershell\"></a>PowerShell\r \r 下面的 PowerShell 命令序列将命名空间从一个 Azure 订阅迁移到另一个 Azure 订阅。 若要执行此操作，命名空间必须已经处于活动状态，而且运行 PowerShell 命令的用户必须同时是源订阅和目标订阅的管理员。\r \r ```powershell\r # Create a new resource group in target subscription\r Select-AzureRmSubscription -SubscriptionId 'ffffffff-ffff-ffff-ffff-ffffffffffff'\r New-AzureRmResourceGroup -Name 'targetRG' -Location 'China East'\r \r # Move namespace from source subscription to target subscription\r Select-AzureRmSubscription -SubscriptionId 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'\r $res = Find-AzureRmResource -ResourceNameContains mynamespace -ResourceType 'Microsoft.ServiceBus/namespaces'\r Move-AzureRmResource -DestinationResourceGroupName 'targetRG' -DestinationSubscriptionId 'ffffffff-ffff-ffff-ffff-ffffffffffff' -ResourceId $res.ResourceId\r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r 若要了解有关服务总线的详细信息，请参阅以下文章：\r \r - [服务总线概述](./service-bus-messaging-overview.md)\r - [Azure 服务总线体系结构概述](./service-bus-fundamentals-hybrid-solutions.md)\r - [服务总线队列入门](./service-bus-dotnet-get-started-with-queues.md)\r \r [Best practices for performance improvements using Service Bus]: ./service-bus-performance-improvements.md\r [Best practices for insulating applications against Service Bus outages and disasters]: ./service-bus-outages-disasters.md\r [Pricing overview]: http://www.azure.cn/pricing/details/messaging\r [Quotas overview]: ./service-bus-quotas.md\r [Exceptions overview]: ./service-bus-messaging-exceptions.md\r [Shared Access Signatures]: ./service-bus-sas.md\r \r <!--Update_Description:update wording -->"}