{"Title":"Azure API 管理中的页模板","Description":"了解如何在 Azure API 管理中使用一组模板自定义开发人员门户页的内容。","Content":"# <a name=\"page-templates-in-azure-api-management\"></a>Azure API 管理中的页模板\r 通过 Azure API 管理，用户能够使用一组用于配置内容的模板自定义开发人员门户页的内容。 使用 [DotLiquid](http://dotliquidmarkup.org/) 语法和所选编辑器（例如 [DotLiquid for Designers](https://github.com/dotliquid/dotliquid/wiki/DotLiquid-for-Designers)），以及提供的一组本地化[字符串资源](./api-management-template-resources.md#strings)、[字形资源](./api-management-template-resources.md#glyphs)和[页面控件](./api-management-page-controls.md)，即可根据这些模板的使用需要非常灵活地配置页面内容。  \r   \r  本部分中的模板可用于自定义开发人员门户中的登录、注册和未找到页面的页面内容。  \r   \r -   [登录](#SignIn)  \r   \r -   [注册](#SignUp)  \r   \r -   [找不到页面](#PageNotFound)  \r   \r > [!NOTE]\r >  示例默认模板包含在后续文档中，但是会因持续改进而有所更改。 通过导航到所需单个模板，可在开发人员门户中查看实时的默认模板。 如需详细了解如何使用模板，请参阅[如何使用模板自定义 API 管理开发人员门户](./api-management-developer-portal-templates.md)。  \r   \r ##  <a name=\"SignIn\"></a> 登录  \r  **登录**模板用于自定义开发人员门户中的登录页面。  \r   \r  ![登录页](./media/api-management-page-templates/APIM-Sign-In-Page-Developer-Portal-Templates.png \"APIM 登录页开发人员门户模板\")  \r   \r ### <a name=\"default-template\"></a>默认模板  \r   \r ```xml  \r <h2 class=\"text-center\">{% localized \"SigninStrings|WebAuthenticationSigninTitle\" %}</h2>  \r {% if registrationEnabled == true %}  \r <p class=\"text-center\">{% localized \"SigninStrings|WebAuthenticationNotAMember\" %}</p>  \r {% endif %}  \r   \r <div class=\"row center-block ap-idp-container\">  \r   <div class=\"col-md-6\">  \r     {% if registrationEnabled == true %}  \r         <p>{% localized \"SigninStrings|WebAuthenticationSigininWithPassword\" %}</p>  \r     <basic-SignIn></basic-SignIn>  \r     {% endif %}  \r   </div>  \r   \r     {% if registrationEnabled != true and providers.size == 0 %}  \r         {% localized \"ProviderInfoStrings|TextboxExternalIdentitiesDisabled\" %}  \r   {% else %}  \r         {% if providers.size > 0 %}  \r       <div class=\"col-md-6\">  \r             <div class=\"providers-list\">  \r                 <p class=\"text-left\">  \r                 {% if registrationEnabled == true %}  \r                     {% localized \"ProviderInfoStrings|TextboxExternalIdentitiesSigninInvitation\" %}  \r                 {% else %}  \r                     {% localized \"ProviderInfoStrings|TextboxExternalIdentitiesSigninInvitationPrimary\" %}  \r                 {% endif %}  \r                 </p>  \r         <providers></providers>  \r             </div>  \r     </div>  \r         {% endif %}  \r     {% endif %}  \r   \r   {% if userRegistrationTermsEnabled == true %}  \r     <div class=\"col-md-6\">  \r         <div id=\"terms\" class=\"modal\" role=\"dialog\" tabindex=\"-1\">  \r             <div class=\"modal-dialog\">  \r                 <div class=\"modal-content\">  \r                     <div class=\"modal-header\">  \r                         <h4 class=\"modal-title\">{% localized \"SigninResources|DialogHeadingTermsOfUse\" %}</h4>  \r                     </div>  \r                     <div class=\"modal-body break-all\">{{userRegistrationTerms}}</div>  \r                     <div class=\"modal-footer\">  \r                         <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">{% localized \"CommonStrings|ButtonLabelClose\" %}</button>  \r                     </div>  \r                 </div>  \r             </div>  \r         </div>  \r         <p>{% localized \"SigninResources|TextblockUserRegistrationTermsProvided\" %}</p>  \r     </div>  \r     {% endif %}  \r </div>  \r ```  \r   \r ### <a name=\"controls\"></a>控制  \r  此模板可使用以下[页面控件](./api-management-page-controls.md)。  \r   \r -   [basic-signin](./api-management-page-controls.md#basic-signin)  \r   \r -   [providers](./api-management-page-controls.md#providers)  \r   \r ### <a name=\"data-model\"></a>数据模型  \r  [用户登录](./api-management-template-data-model-reference.md#UseSignIn)实体。  \r   \r ### <a name=\"sample-template-data\"></a>示例模板数据  \r   \r ```json  \r {  \r     \"Email\": null,  \r     \"Password\": null,  \r     \"ReturnUrl\": null,  \r     \"RememberMe\": false,  \r     \"RegistrationEnabled\": true,  \r     \"DelegationEnabled\": false,  \r     \"DelegationUrl\": null,  \r     \"SsoSignUpUrl\": null,  \r     \"AuxServiceUrl\": \"https://manage.windowsazure.cn/#Workspaces/ApiManagementExtension/service/contoso5/dashboard\",  \r     \"Providers\": [  \r         {  \r             \"Properties\": {  \r                 \"AuthenticationType\": \"Aad\",  \r                 \"Caption\": \"Azure Active Directory\"  \r             },  \r             \"AuthenticationType\": \"Aad\",  \r             \"Caption\": \"Azure Active Directory\"  \r         }  \r     ],  \r     \"UserRegistrationTerms\": null,  \r     \"UserRegistrationTermsEnabled\": false  \r }  \r ```  \r   \r ##  <a name=\"SignUp\"></a> 注册  \r  **注册**模板用于自定义开发人员门户中的注册页面。  \r   \r  ![注册页](./media/api-management-page-templates/APIM-Sign-Up-Page-Developer-Portal-Templates.png \"APIM 注册页开发人员门户模板\")  \r   \r ### <a name=\"default-template\"></a>默认模板  \r   \r ```xml  \r <h2 class=\"text-center\">{% localized \"SignupStrings|PageTitleSignup\" %}</h2>  \r <p class=\"text-center\">  \r   {% localized \"SignupStrings|WebAuthenticationAlreadyAMember\" %} <a href=\"/signin\">{% localized \"SignupStrings|WebAuthenticationSigninNow\" %}</a>  \r </p>  \r   \r <div class=\"row center-block ap-idp-container\">  \r   <div class=\"col-md-6\">  \r     <p>{% localized \"SignupStrings|WebAuthenticationCreateNewAccount\" %}</p>  \r     <sign-up></sign-up>  \r   </div>  \r </div>  \r ```  \r   \r ### <a name=\"controls\"></a>控制  \r  此模板可使用以下[页面控件](./api-management-page-controls.md)。  \r   \r -   [sign-up](./api-management-page-controls.md#sign-up)  \r   \r ### <a name=\"data-model\"></a>数据模型  \r  [用户注册](./api-management-template-data-model-reference.md#UserSignUp)实体。  \r   \r ### <a name=\"sample-template-data\"></a>示例模板数据  \r   \r ```json  \r {  \r     \"PasswordConfirm\": null,  \r     \"Password\": null,  \r     \"PasswordVerdictLevel\": 0,  \r     \"UserRegistrationTerms\": null,  \r     \"UserRegistrationTermsOptions\": 0,  \r     \"ConsentAccepted\": false,  \r     \"Email\": null,  \r     \"FirstName\": null,  \r     \"LastName\": null,  \r     \"UserData\": null,  \r     \"NameIdentifier\": null,  \r     \"ProviderName\": null  \r }  \r ```  \r   \r ##  <a name=\"PageNotFound\"></a> 找不到页面  \r  **找不到页面**模板用于自定义开发人员门户中的“找不到页面”页。  \r   \r  ![找不到页面](./media/api-management-page-templates/APIM-Not-Found-Page-Developer-Portal-Templates.png \"APIM 找不到页面开发人员门户模板\")  \r   \r ### <a name=\"default-template\"></a>默认模板  \r   \r ```xml  \r <h2>{% localized \"NotFoundStrings|PageTitleNotFound\" %}</h2>  \r   \r <h3>{% localized \"NotFoundStrings|TitlePotentialCause\" %}</h3>  \r <ul>  \r   <li>{% localized \"NotFoundStrings|TextblockPotentialCauseOldLink\" %}</li>  \r   <li>{% localized \"NotFoundStrings|TextblockPotentialCauseMisspelledUrl\" %}</li>  \r </ul>  \r   \r <h3>{% localized \"NotFoundStrings|TitlePotentialSolution\" %}</h3>  \r <ul>  \r   <li>{% localized \"NotFoundStrings|TextblockPotentialSolutionRetype\" %}</li>  \r   <li>  \r     {% capture textPotentialSolutionStartOver %}{% localized \"NotFoundStrings|TextblockPotentialSolutionStartOver\" %}{% endcapture %}  \r     {% capture homeLink %}<a href=\"/\">{% localized \"NotFoundStrings|LinkLabelHomePage\" %}</a>{% endcapture %}  \r     {% assign replaceString = '{0}' %}  \r   \r     {{ textPotentialSolutionStartOver | replace : replaceString, homeLink }}  \r   </li>  \r </ul>  \r   \r <p>  \r   {% capture textReportProblem %}{% localized \"NotFoundStrings|TextReportProblem\" %}{% endcapture %}  \r   {% capture emailLink %}<a href=\"mailto:apimgmt@microsoft.com\" target=\"_self\" title=\"API Management Support\">{% localized \"NotFoundStrings|LinkLabelSendUsEmail\" %}</a>{% endcapture %}  \r   {% assign replaceString = '{0}' %}  \r   \r   {{ textReportProblem | replace : replaceString, emailLink }}  \r </p>  \r ```  \r   \r ### <a name=\"controls\"></a>控制  \r  此模板可能不使用任何[页面控件](./api-management-page-controls.md)。  \r   \r ### <a name=\"data-model\"></a>数据模型  \r   \r |属性|类型|说明|  \r |--------------|----------|-----------------|  \r |referenceCode|字符串|因内部错误显示此页时生成的代码。|  \r |errorCode|字符串|因内部错误显示此页时生成的代码。|  \r |emailBody|字符串|因内部错误显示此页时生成的电子邮件正文。|  \r |requestedUrl|字符串|找不到页面时请求的 URL。|  \r |referrerUrl|字符串|所请求的 URL 的引用 URL。|  \r   \r ### <a name=\"sample-template-data\"></a>示例模板数据  \r   \r ```json  \r {  \r     \"referenceCode\": null,  \r     \"errorCode\": null,  \r     \"emailBody\": null,  \r     \"requestedUrl\": \"https://contoso5.portal.azure-api.cn:443/NotFoundPage?startEditTemplate=NotFoundPage\",  \r     \"referrerUrl\": \"https://contoso5.portal.azure-api.cn/signup?startEditTemplate=SignUpTemplate\"  \r }  \r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r 如需详细了解如何使用模板，请参阅[如何使用模板自定义 API 管理开发人员门户](./api-management-developer-portal-templates.md)。"}