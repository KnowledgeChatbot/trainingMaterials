{"Title":"Azure CLI 脚本示例 - 在批处理中添加应用程序","Description":"Azure CLI 脚本示例 - 在批处理中添加应用程序","Content":"# <a name=\"adding-applications-to-azure-batch-with-azure-cli\"></a>使用 Azure CLI 将应用程序添加到 Azure Batch\r \r 此脚本演示如何设置要与 Azure Batch 池或任务配合使用的应用程序。 若要设置应用程序，请将可执行文件与所有依赖文件一起打包为 .zip 文件。 在此示例中，可执行 zip 文件名为“my-application-exe.zip”。\r \r ## <a name=\"prerequisites\"></a>先决条件\r \r - 按照 [Azure CLI 安装指南](/cli/install-azure-cli)中提供的说明安装 Azure CLI（如果尚未这样做）。\r - 创建 Batch 帐户（如果还没有帐户）。 有关创建帐户的示例脚本，请参阅[使用 Azure CLI 创建 Batch 帐户](/batch/scripts/batch-cli-sample-create-account/)。\r \r ## <a name=\"sample-script\"></a>示例脚本\r \r ```azurecli\r #!/bin/bash\r \r # Authenticate CLI session.\r az login\r \r # Create a new application.\r az batch application create \\\r     --resource-group myresourcegroup \\\r     --name mybatchaccount \\\r     --application-id myapp \\\r     --display-name \"My Application\"\r \r # An application can reference multiple application executable packages\r # of different versions. The executables and any dependencies will need\r # to be zipped up for the package. Once uploaded, the CLI will attempt\r # to activate the package so that it's ready for use.\r az batch application package create \\\r     --resource-group myresourcegroup \\\r     --name mybatchaccount \\\r     --application-id myapp \\\r     --package-file my-application-exe.zip \\\r     --version 1.0\r \r # We will update our application to assign the newly added application\r # package as the default version.\r az batch application set \\\r     --resource-group myresourcegroup \\\r     --name mybatchaccount \\\r     --application-id myapp \\\r     --default-version 1.0\r ```\r \r ## <a name=\"clean-up-application\"></a>清除应用程序\r \r 运行上述示例脚本后，可运行以下命令以删除应用程序及其已上传的应用程序包。\r \r ```azurecli\r az batch application package delete -g myresourcegroup -n mybatchaccount --application-id myapp --version 1.0 --yes\r az batch application delete -g myresourcegroup -n mybatchaccount --application-id myapp --yes\r ```\r \r ## <a name=\"script-explanation\"></a>脚本说明\r \r 此脚本使用以下命令创建应用程序并上传应用程序包。\r 表中的每条命令均链接到特定于命令的文档。\r \r | 命令 | 说明 |\r |---|---|\r | [az batch application create](/cli/batch/application#create) | 创建应用程序。  |\r | [az batch application set](/cli/batch/application#set) | 更新应用程序的属性。  |\r | [az batch application package create](/cli/batch/application/package#create) | 将应用程序包添加到指定的应用程序。  |\r \r ## <a name=\"next-steps\"></a>后续步骤\r \r 有关 Azure CLI 的详细信息，请参阅 [Azure CLI 文档](/cli/overview)。\r \r 可以在 [Azure Batch CLI 文档](../batch-cli-samples.md)中找到其他批处理 CLI 脚本示例。\r \r "}