{"Title":"SQL Server 如何将数据库备份到 Azure Storage","Description":"SQL Server 如何将数据库备份到 Azure Storage","Content":"\r # SQL Server 如何将数据库备份到 Azure Storage\r \r 打开本地的 SQL Server Management Studio。首先创建 Credentials。命令如下：\r \r     IF NOT EXISTS\r     (SELECT * FROM sys.credentials\r     WHERE credential_identity = 'BackupDBtoAzureStorageCredential')\r     CREATE CREDENTIAL BackupDBtoAzureStora\r     geCredential WITH IDENTITY = '[存储账号名称]'\r     ,SECRET = '[存储账号密钥]' ;\r \r 如果需要删除 Credential，我们可以通过命令：\r \r     DROP CREDENTIAL [CredentialName]\r \r 可用如下两种方法实现：\r \r 1. 执行以下 T-SQL 语句，如下:\r \r         declare @url varchar(256)\r         set @url= 'https://xxxxx.blob.core.chinacloudapi.cn/dbcontainer/'+ CONVERT(nvarchar(8), GETDATE(), 112)+ '-AdventureWorks2008.bak'\r         BACKUP DATABASE testDB\r         TO URL = @url\r             WITH CREDENTIAL = 'BackupDBtoAzureStorageCredential'\r             ,COMPRESSION\r             ,STATS = 5;\r \r 2. 利用 SSMS 中 “Back Up Database”\r \r     右击数据库，在任务中选择 “Back Up Database”,选择您创建的 credentials，修改 globalUrl 为存储容器 URL,结果如下图：\r \r     ![backup](./media/aog-virtual-machines-windows-sql-server-howto-backup-database-in-storage/backup.png)"}