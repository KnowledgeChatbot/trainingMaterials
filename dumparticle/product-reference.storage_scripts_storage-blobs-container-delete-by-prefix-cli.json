{"Title":"Azure CLI 脚本示例 - 根据前缀删除容器","Description":"根据容器名称前缀删除 Azure 存储 blob 容器。","Content":"# <a name=\"delete-containers-based-on-container-name-prefix\"></a>根据容器名称前缀删除容器\r \r 此脚本首先会在 Azure Blob 存储中创建几个示例容器，然后根据容器名称的前缀删除一些容器。\r \r [!INCLUDE [sample-cli-install](../../../includes/sample-cli-install.md)]\r \r [!INCLUDE [quickstarts-free-trial-note](../../../includes/quickstarts-free-trial-note.md)]\r \r ## <a name=\"sample-script\"></a>示例脚本\r \r ```azurecli\r #!/bin/bash\r export AZURE_STORAGE_ACCOUNT=<storage-account-name>\r export AZURE_STORAGE_ACCESS_KEY=<storage-account-key>\r \r # Create a resource group\r az group create --name myResourceGroup --location chinaeast\r \r # Create some test containers\r az storage container create --name test-container-001\r az storage container create --name test-container-002\r az storage container create --name production-container-001\r \r # List only the containers with a specific prefix\r az storage container list --prefix \"test-\" --query \"[*].[name]\" --output tsv\r \r echo \"Deleting test- containers...\"\r \r # Delete \r for container in `az storage container list --prefix \"test-\" --query \"[*].[name]\" --output tsv`; do\r     az storage container delete --name $container\r done\r \r echo \"Remaining containers:\"\r az storage container list --output table\r ```\r \r ## <a name=\"clean-up-deployment\"></a>清理部署 \r \r 运行以下命令，删除资源组、其余容器和所有相关资源。\r \r ```azurecli\r az group delete --name myResourceGroup\r ```\r \r ## <a name=\"script-explanation\"></a>脚本说明\r \r 此脚本使用以下命令根据容器名称前缀删除容器。 表中的每一项均链接到命令特定的文档。\r \r | 命令 | 说明 |\r |---|---|\r | [az group create](https://docs.azure.cn/cli/group#create) | 创建用于存储所有资源的资源组。 |\r | [az storage account create](https://docs.azure.cn/cli/storage/account#create) | 在指定资源组中创建 Azure 存储帐户。 |\r | [az storage container create](https://docs.azure.cn/cli/storage/container#create) | 在 Azure Blob 存储中创建容器。 |\r | [az storage container list](https://docs.azure.cn/cli/storage/container#list) | 列出 Azure 存储帐户中的容器。 |\r | [az storage container delete](https://docs.azure.cn/cli/storage/container#delete) | 删除 Azure 存储帐户中的容器。 |\r \r ## <a name=\"next-steps\"></a>后续步骤\r \r 有关 Azure CLI 的详细信息，请参阅 [Azure CLI 文档](https://docs.azure.cn/cli/overview)。\r \r 可以在 [Azure 存储的 Azure CLI 示例](../blobs/storage-samples-blobs-cli.md)中找到其他存储 CLI 脚本示例。\r "}