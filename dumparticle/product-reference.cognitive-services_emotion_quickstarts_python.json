{"Title":"情感 API Python 快速入门","Description":"获取信息和代码示例，帮助自己快速开始使用认知服务中的情感 API 和 Python。","Content":"# <a name=\"emotion-api-python-quick-start\"></a>情感 API Python 快速入门\r 本文提供信息和代码示例，帮助读者快速开始使用[情感 API 识别方法](https://dev.cognitive.azure.cn/docs/services/5639d931ca73072154c1ce89/operations/563b31ea778daf121cc3a5fa)与 Python 来识别图像中一个或多个人员表达的情感。 \r \r ## <a name=\"prerequisite\"></a>先决条件\r - 从 [Azure 门户](https://portal.azure.cn)获取订阅密钥\r \r ## <a name=\"recognize-emotions-python-example-request\"></a>识别情感 Python 示例请求\r \r 复制 Python 版本的相应部分，并将其保存到某个文件，例如 `test.py`。 将“Ocp-Apim-Subscription-Key”值替换为有效的订阅密钥，将名人照片的 URL 添加到 `body` 变量，并更改 REST URL 以使用订阅密钥的获取区域。\r \r ```python\r ########### Python 2.7 #############\r import httplib, urllib, base64\r \r headers = {\r     # Request headers. Replace the placeholder key below with your subscription key.\r     'Content-Type': 'application/json',\r     'Ocp-Apim-Subscription-Key': '13hc77781f7e4b19b5fcdd72a8df7156',\r }\r \r params = urllib.urlencode({\r })\r \r # Replace the example URL below with the URL of the image you want to analyze.\r body = \"{ 'url': 'http://example.com/picture.jpg' }\"\r \r try:\r     conn = httplib.HTTPSConnection('api.cognitive.azure.cn')\r     conn.request(\"POST\", \"/emotion/v1.0/recognize?%s\" % params, body, headers)\r     response = conn.getresponse()\r     data = response.read()\r     print(data)\r     conn.close()\r except Exception as e:\r     print(\"[Errno {0}] {1}\".format(e.errno, e.strerror))\r \r ####################################\r \r ########### Python 3.2 #############\r import http.client, urllib.request, urllib.parse, urllib.error, base64, sys\r \r headers = {\r     # Request headers. Replace the placeholder key below with your subscription key.\r     'Content-Type': 'application/json',\r     'Ocp-Apim-Subscription-Key': '13hc77781f7e4b19b5fcdd72a8df7156',\r }\r \r params = urllib.parse.urlencode({\r })\r \r # Replace the example URL below with the URL of the image you want to analyze.\r body = \"{ 'url': 'http://example.com/picture.jpg' }\"\r \r try:\r     conn = http.client.HTTPSConnection('api.cognitive.azure.cn')\r     conn.request(\"POST\", \"/emotion/v1.0/recognize?%s\" % params, body, headers)\r     response = conn.getresponse()\r     data = response.read()\r     print(data)\r     conn.close()\r except Exception as e:\r     print(e.args)\r ####################################\r ```\r \r ## <a name=\"recognize-emotions-sample-response\"></a>识别情感示例响应\r 成功调用返回人脸条目及其关联情感评分的数组，返回的内容已按人脸矩形大小的降序排序。 空响应表示未检测到任何人脸。 情感条目包含以下字段：\r - faceRectangle - 人脸在图像中的矩形位置。\r - scores - 图像中每张人脸的情感评分。 \r \r ```json\r application/json \r [\r   {\r     \"faceRectangle\": {\r       \"left\": 68,\r       \"top\": 97,\r       \"width\": 64,\r       \"height\": 97\r     },\r     \"scores\": {\r       \"anger\": 0.00300731952,\r       \"contempt\": 5.14648448E-08,\r       \"disgust\": 9.180124E-06,\r       \"fear\": 0.0001912825,\r       \"happiness\": 0.9875571,\r       \"neutral\": 0.0009861537,\r       \"sadness\": 1.889955E-05,\r       \"surprise\": 0.008229999\r     }\r   }\r ]\r \r \r "}