{"Title":"使用模板创建 Azure 事件中心命名空间和使用者组","Description":"使用 Azure Resource Manager 模板创建包含事件中心和使用者组的事件中心命名空间","Content":"# <a name=\"create-an-event-hubs-namespace-with-event-hub-and-consumer-group-using-an-azure-resource-manager-template\"></a>使用 Azure Resource Manager 模板创建包含事件中心和使用者组的事件中心命名空间\r \r 本文介绍如何使用 Azure Resource Manager 模板创建包含一个事件中心和一个使用者组的事件中心类型的命名空间。 本文介绍如何定义要部署的资源以及如何定义执行部署时指定的参数。 可将此模板用于自己的部署，或自定义此模板以满足要求\r \r 有关创建模板的详细信息，请参阅 [创作 Azure Resource Manager 模板][Authoring Azure Resource Manager templates]。\r \r 有关完整的模板，请参阅 GitHub 上的[事件中心和使用者组模板][Event Hub and consumer group template]。\r \r > [!NOTE]\r > 若要检查最新模板，请访问 [Azure 快速启动模板][Azure Quickstart Templates] 库并搜索事件中心。\r > \r > \r \r ## <a name=\"what-will-you-deploy\"></a>将部署什么内容？\r \r 使用此模板，将部署包含事件中心和使用者组的事件中心命名空间。\r \r [事件中心](event-hubs-what-is-event-hubs.md)是一种事件处理服务，用于向 Azure 提供大规模的事件与遥测数据入口，并且具有较低的延迟和较高的可靠性。\r \r 若要自动运行部署，请单击以下按钮：\r \r [![部署到 Azure](./media/event-hubs-resource-manager-namespace-event-hub/deploybutton.png)](https://portal.azure.cn/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2F201-event-hubs-create-event-hub-and-consumer-group%2Fazuredeploy.json)\r \r ## <a name=\"parameters\"></a>Parameters\r \r 使用 Azure Resource Manager，可以定义在部署模板时想要指定的值的参数。 该模板具有一个名为 `Parameters` 的部分，其中包含所有参数值。 应为随着要部署的项目或要部署到的环境而变化的值定义参数。 不要为永远保持不变的值定义参数。 模板中的每个参数值定义所部署的资源。\r \r 模板定义以下参数：\r \r ### <a name=\"eventhubnamespacename\"></a>eventHubNamespaceName\r \r 要创建的事件中心命名空间的名称。\r \r ```json\r \"eventHubNamespaceName\": {\r \"type\": \"string\"\r }\r ```\r \r ### <a name=\"eventhubname\"></a>eventHubName\r \r 在事件中心命名空间中创建的事件中心的名称。\r \r ```json\r \"eventHubName\": {\r \"type\": \"string\"\r }\r ```\r \r ### <a name=\"eventhubconsumergroupname\"></a>eventHubConsumerGroupName\r \r 为事件中心创建的使用者组的名称。\r \r ```json\r \"eventHubConsumerGroupName\": {\r \"type\": \"string\"\r }\r ```\r \r ### <a name=\"apiversion\"></a>apiVersion\r \r 模板的 API 版本。\r \r ```json\r \"apiVersion\": {\r \"type\": \"string\"\r }\r ```\r \r ## <a name=\"resources-to-deploy\"></a>要部署的资源\r \r 创建包含一个事件中心和一个使用者组的 **EventHubs** 类型的命名空间。\r \r ```json\r \"resources\":[  \r       {  \r          \"apiVersion\":\"[variables('ehVersion')]\",\r          \"name\":\"[parameters('namespaceName')]\",\r          \"type\":\"Microsoft.EventHub/namespaces\",\r          \"location\":\"[variables('location')]\",\r          \"sku\":{  \r             \"name\":\"Standard\",\r             \"tier\":\"Standard\"\r          },\r          \"resources\":[  \r             {  \r                \"apiVersion\":\"[variables('ehVersion')]\",\r                \"name\":\"[parameters('eventHubName')]\",\r                \"type\":\"EventHubs\",\r                \"dependsOn\":[  \r                   \"[concat('Microsoft.EventHub/namespaces/', parameters('namespaceName'))]\"\r                ],\r                \"properties\":{  \r                   \"path\":\"[parameters('eventHubName')]\"\r                },\r                \"resources\":[  \r                   {  \r                      \"apiVersion\":\"[variables('ehVersion')]\",\r                      \"name\":\"[parameters('consumerGroupName')]\",\r                      \"type\":\"ConsumerGroups\",\r                      \"dependsOn\":[  \r                         \"[parameters('eventHubName')]\"\r                      ],\r                      \"properties\":{  \r \r                      }\r                   }\r                ]\r             }\r          ]\r       }\r    ],\r ```\r \r ## <a name=\"commands-to-run-deployment\"></a>运行部署的命令\r \r [!INCLUDE [app-service-deploy-commands](../../includes/app-service-deploy-commands.md)]\r \r ## <a name=\"powershell\"></a>PowerShell\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName \\<resource-group-name\\> -TemplateFile https://raw.githubusercontent.com/azure/azure-quickstart-templates/master/201-event-hubs-create-event-hub-and-consumer-group/azuredeploy.json\r ```\r \r ## <a name=\"azure-cli\"></a>Azure CLI\r \r ```azurecli\r azure config mode arm\r \r azure group deployment create \\<my-resource-group\\> \\<my-deployment-name\\> --template-uri [https://raw.githubusercontent.com/azure/azure-quickstart-templates/master/201-event-hubs-create-event-hub-and-consumer-group/azuredeploy.json][]\r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r 访问以下链接可以了解有关事件中心的详细信息：\r \r * [事件中心概述](event-hubs-what-is-event-hubs.md)\r * [创建事件中心](event-hubs-create.md)\r * [事件中心常见问题](event-hubs-faq.md)\r \r [Authoring Azure Resource Manager templates]: ../azure-resource-manager/resource-group-authoring-templates.md\r [Azure Quickstart Templates]:  https://github.com/Azure/azure-quickstart-templates/?term=event+hubs\r [Using Azure PowerShell with Azure Resource Manager]: ../powershell-azure-resource-manager.md\r [Using the Azure CLI for Mac, Linux, and Windows with Azure Resource Management]: ../azure-resource-manager/xplat-cli-azure-resource-manager.md\r [Event Hub and consumer group template]: https://github.com/Azure/azure-quickstart-templates/blob/master/201-event-hubs-create-event-hub-and-consumer-group/\r \r <!--Update_Description: update meta properties, wording update -->"}