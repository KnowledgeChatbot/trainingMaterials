{"Title":"使用软件部署工具为 Azure Site Recovery 自动安装移动服务","Description":"本文可帮助用户使用软件部署工具（例如 System Center Configuration Manager）自动执行移动服务安装。","Content":"# <a name=\"automate-mobility-service-installation-by-using-software-deployment-tools\"></a>使用软件部署工具自动执行移动服务安装\r \r >[!IMPORTANT]\r 本文档假定使用的是版本 **9.9.4510.1** 或更高版本。\r \r 本文提供如何使用 System Center Configuration Manager 在数据中心内部署 Azure Site Recovery 移动服务的示例。 使用 Configuration Manager 等软件部署工具具有以下优势：\r * 计划全新安装和升级的部署，在计划维护时段内进行软件更新\r * 将部署规模扩大为同时部署数百台服务器\r \r > [!NOTE]\r > 本文使用 System Center Configuration Manager 2012 R2 来演示部署活动。 用户还可以使用 [Azure 自动化和 Desired State Configuration](site-recovery-automate-mobility-service-install.md) 自动安装移动服务。\r \r ## <a name=\"prerequisites\"></a>先决条件\r 1. 已在环境中部署的软件部署工具，例如 Configuration Manager。\r   创建两个[设备集合](https://technet.microsoft.com/library/gg682169.aspx)，一个用于要使用 Site Recovery 保护的所有“Windows 服务器” ，另一个用于要保护的所有“Linux 服务器”。\r 3. 已向 Site Recovery 注册的配置服务器。\r 4. 可通过 Configuration Manager 服务器访问的安全网络文件共享（服务器消息块共享）。\r \r ## <a name=\"deploy-mobility-service-on-computers-running-windows\"></a>在运行 Windows 的计算机上部署移动服务\r > [!NOTE]\r > 本文假设配置服务器的 IP 地址为 192.168.3.121，且安全网络文件共享为 \\\\\\ContosoSecureFS\\MobilityServiceInstallers。\r \r ### <a name=\"step-1-prepare-for-deployment\"></a>步骤 1：准备部署\r 1. 在网络共享上创建一个文件夹，并将其命名为“MobSvcWindows”。\r 2. 登录配置服务器，并打开管理命令提示符。\r 3. 运行以下命令，生成密码文件：\r \r     `cd %ProgramData%\\ASR\\home\\svsystems\\bin`\r \r     `genpassphrase.exe -v > MobSvc.passphrase`\r 4. 将“MobSvc.passphrase”文件复制到网络共享上的“MobSvcWindows”文件夹。\r 5. 运行以下命令，浏览到配置服务器上的安装程序存储库：\r \r    `cd %ProgramData%\\ASR\\home\\svsystems\\puhsinstallsvc\\repository`\r \r 6. 将 **Microsoft-ASR\\_UA\\_*version*\\_Windows\\_GA\\_*date*\\_Release.exe** 复制到网络共享上的“MobSvcWindows”文件夹。\r 7. 复制以下代码，并将它作为“install.bat”保存到“MobSvcWindows”文件夹。\r \r    > [!NOTE]\r    > 将此脚本中的 [CSIP] 占位符替换为配置服务器的实际 IP 地址值。\r \r ```DOS\r Time /t >> C:\\Temp\\logfile.log\r REM ==================================================\r REM ==== Clean up the folders ========================\r RMDIR /S /q %temp%\\MobSvc\r MKDIR %Temp%\\MobSvc\r MKDIR C:\\Temp\r REM ==================================================\r \r REM ==== Copy new files ==============================\r COPY M*.* %Temp%\\MobSvc\r CD %Temp%\\MobSvc\r REN Micro*.exe MobSvcInstaller.exe\r REM ==================================================\r \r REM ==== Extract the installer =======================\r MobSvcInstaller.exe /q /x:%Temp%\\MobSvc\\Extracted\r REM ==== Wait 10s for extraction to complete =========\r TIMEOUT /t 10\r REM =================================================\r \r REM ==== Perform installation =======================\r REM =================================================\r \r CD %Temp%\\MobSvc\\Extracted\r whoami >> C:\\Temp\\logfile.log\r SET PRODKEY=HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\r REG QUERY %PRODKEY%\\{275197FC-14FD-4560-A5EB-38217F80CBD1}\r IF NOT %ERRORLEVEL% EQU 0 (\r     echo \"Product is not installed. Goto INSTALL.\" >> C:\\Temp\\logfile.log\r     GOTO :INSTALL\r ) ELSE (\r     echo \"Product is installed.\" >> C:\\Temp\\logfile.log\r \r     echo \"Checking for Post-install action status.\" >> C:\\Temp\\logfile.log\r     GOTO :POSTINSTALLCHECK\r )\r \r :POSTINSTALLCHECK\r     REG QUERY \"HKLM\\SOFTWARE\\Wow6432Node\\InMage Systems\\Installed Products\\5\" /v \"PostInstallActions\" | Find \"Succeeded\"\r     If %ERRORLEVEL% EQU 0 (\r         echo \"Post-install actions succeeded. Checking for Configuration status.\" >> C:\\Temp\\logfile.log\r         GOTO :CONFIGURATIONCHECK\r     ) ELSE (\r         echo \"Post-install actions didn't succeed. Goto INSTALL.\" >> C:\\Temp\\logfile.log\r         GOTO :INSTALL\r     )\r \r :CONFIGURATIONCHECK\r     REG QUERY \"HKLM\\SOFTWARE\\Wow6432Node\\InMage Systems\\Installed Products\\5\" /v \"AgentConfigurationStatus\" | Find \"Succeeded\"\r     If %ERRORLEVEL% EQU 0 (\r         echo \"Configuration has succeeded. Goto UPGRADE.\" >> C:\\Temp\\logfile.log\r         GOTO :UPGRADE\r     ) ELSE (\r         echo \"Configuration didn't succeed. Goto CONFIGURE.\" >> C:\\Temp\\logfile.log\r         GOTO :CONFIGURE\r     )\r \r :INSTALL\r     echo \"Perform installation.\" >> C:\\Temp\\logfile.log\r     UnifiedAgent.exe /Role MS /InstallLocation \"C:\\Program Files (x86)\\Azure Site Recovery\" /Platform \"VmWare\" /Silent\r     IF %ERRORLEVEL% EQU 0 (\r         echo \"Installation has succeeded.\" >> C:\\Temp\\logfile.log\r         (GOTO :CONFIGURE)\r     ) ELSE (\r         echo \"Installation has failed.\" >> C:\\Temp\\logfile.log\r         GOTO :ENDSCRIPT\r     )\r \r :CONFIGURE\r     echo \"Perform configuration.\" >> C:\\Temp\\logfile.log\r     cd \"C:\\Program Files (x86)\\Azure Site Recovery\\agent\"\r     UnifiedAgentConfigurator.exe  /CSEndPoint \"[CSIP]\" /PassphraseFilePath %Temp%\\MobSvc\\MobSvc.passphrase\r     IF %ERRORLEVEL% EQU 0 (\r         echo \"Configuration has succeeded.\" >> C:\\Temp\\logfile.log\r     ) ELSE (\r         echo \"Configuration has failed.\" >> C:\\Temp\\logfile.log\r     )\r     GOTO :ENDSCRIPT\r \r :UPGRADE\r     echo \"Perform upgrade.\" >> C:\\Temp\\logfile.log\r     UnifiedAgent.exe /Platform \"VmWare\" /Silent\r     IF %ERRORLEVEL% EQU 0 (\r         echo \"Upgrade has succeeded.\" >> C:\\Temp\\logfile.log\r     ) ELSE (\r         echo \"Upgrade has failed.\" >> C:\\Temp\\logfile.log\r     )\r     GOTO :ENDSCRIPT\r \r :ENDSCRIPT\r     echo \"End of script.\" >> C:\\Temp\\logfile.log\r \r ```\r \r ### <a name=\"step-2-create-a-package\"></a>步骤 2：创建包\r \r 1. 登录 Configuration Manager 控制台。\r 2. 浏览到“软件库” > “应用程序管理” > “包”。\r 3. 右键单击“包”，然后选择“创建包”。\r 4. 提供“名称”、“说明”、“制造商”、“语言”和“版本”的值。\r 5. 选中“此包包含源文件”复选框。\r 6. 单击“浏览”，然后选择存储安装程序的网络共享 (\\\\\\ContosoSecureFS\\MobilityServiceInstaller\\MobSvcWindows)。\r \r     ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/create_sccm_package.png)\r \r 7. 在“选择要创建的程序类型”页上，选择“标准程序”，然后单击“下一步”。\r \r     ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-standard-program.png)\r \r 8. 在“指定此标准程序的相关信息”页上，提供以下输入，然后单击“下一步”。 （其他输入可以使用其默认值。）\r \r | **参数名称** | **值** |\r |--|--|\r | 名称 | 安装 Azure 移动服务 (Windows) |\r | 命令行 | install.bat |\r | 程序可运行 | 用户是否已登录 |\r \r     ![Screenshot of Create Package and Program wizard](./media/site-recovery-install-mobility-service-using-sccm/sccm-program-properties.png)\r \r 9. 在下一页中，选择目标操作系统。 移动服务只能安装在 Windows Server 2012 R2、Windows Server 2012 和 Windows Server 2008 R2 上。\r \r     ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-program-properties-page2.png)\r \r 10. 要完成向导，请单击“下一步”两次。\r \r > [!NOTE]\r > 脚本支持移动服务代理的全新安装和已安装代理的更新。\r \r ### <a name=\"step-3-deploy-the-package\"></a>步骤 3：部署包\r 1. 在 Configuration Manager 控制台中，右键单击包，然后选择“分发内容”。\r     ![Configuration Manager 控制台的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm_distribute.png)\r 2. 选择包应复制到的“分发点”**[](https://technet.microsoft.com/library/gg712321.aspx#BKMK_PlanForDistributionPoints)**。\r 3. 完成该向导。 包随后开始复制到指定的分发点。\r 4. 完成包分发后，右键单击包，然后选择“部署”。\r     ![Configuration Manager 控制台的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm_deploy.png)\r 5. 选择在先决条件部分中创建的 Windows Server 设备集合作为部署的目标集合。\r \r     ![部署软件向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-select-target-collection.png)\r \r 6. 在“指定内容目标”页上，选择“分发点”。\r 7. 在“指定设置以控制此软件的部署方式”页上，确保目的为“必需”。\r \r     ![部署软件向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-deploy-select-purpose.png)\r \r 8. 在“为此部署指定计划”页中，指定计划。 有关详细信息，请参阅[计划包](https://technet.microsoft.com/library/gg682178.aspx)。\r 9. 在“分发点”页上，根据数据中心的需求配置属性。 然后完成向导。\r \r > [!TIP]\r > 为了避免不必要的重新启动，请在每月的维护时段或软件更新时段计划包安装。\r \r 可以使用 Configuration Manager 控制台监视部署进度。 转到“监视” > “部署” > “[包名称]”。\r \r   ![用于监视部署的 Configuration Manager 选项的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/report.PNG)\r \r ## <a name=\"deploy-mobility-service-on-computers-running-linux\"></a>在运行 Linux 操作系统的计算机上部署移动服务\r > [!NOTE]\r > 本文假设配置服务器的 IP 地址为 192.168.3.121，且安全网络文件共享为 \\\\\\ContosoSecureFS\\MobilityServiceInstallers。\r \r ### <a name=\"step-1-prepare-for-deployment\"></a>步骤 1：准备部署\r 1. 在网络共享上创建一个文件夹，并将其命名为“MobSvcLinux”。\r 2. 登录配置服务器，并打开管理命令提示符。\r 3. 运行以下命令，生成密码文件：\r \r     `cd %ProgramData%\\ASR\\home\\svsystems\\bin`\r \r     `genpassphrase.exe -v > MobSvc.passphrase`\r 4. 将“MobSvc.passphrase” 文件复制到网络共享上的“MobSvcLinux”文件夹。\r 5. 运行以下命令，浏览到配置服务器上的安装程序存储库：\r \r     `cd %ProgramData%\\ASR\\home\\svsystems\\puhsinstallsvc\\repository`\r \r 6. 将以下文件复制到网络共享上的“MobSvcLinux”文件夹：\r     * Microsoft-ASR\\_UA\\*RHEL6-64*release.tar.gz\r     * Microsoft-ASR\\_UA\\*RHEL7-64\\*release.tar.gz\r     * Microsoft-ASR\\_UA\\*SLES11-SP3-64\\*release.tar.gz\r     * Microsoft-ASR\\_UA\\*SLES11-SP4-64\\*release.tar.gz\r     * Microsoft-ASR\\_UA\\*OL6-64\\*release.tar.gz\r     * Microsoft-ASR\\_UA\\*UBUNTU-14.04-64\\*release.tar.gz\r \r 7. 复制以下代码，并将它作为“install_linux.sh” 保存到“MobSvcLinux”文件夹。\r    > [!NOTE]\r    > 将此脚本中的 [CSIP] 占位符替换为配置服务器的实际 IP 地址值。\r \r ```Bash\r #!/usr/bin/env bash\r \r rm -rf /tmp/MobSvc\r mkdir -p /tmp/MobSvc\r INSTALL_DIR='/usr/local/ASR'\r VX_VERSION_FILE='/usr/local/.vx_version'\r \r echo \"=============================\" >> /tmp/MobSvc/sccm.log\r echo `date` >> /tmp/MobSvc/sccm.log\r echo \"=============================\" >> /tmp/MobSvc/sccm.log\r \r if [ -f /etc/oracle-release ] && [ -f /etc/redhat-release ]; then\r     if grep -q 'Oracle Linux Server release 6.*' /etc/oracle-release; then\r         if uname -a | grep -q x86_64; then\r             OS=\"OL6-64\"\r             echo $OS >> /tmp/MobSvc/sccm.log\r             cp *OL6*.tar.gz /tmp/MobSvc\r         fi\r     fi\r elif [ -f /etc/redhat-release ]; then\r     if grep -q 'Red Hat Enterprise Linux Server release 6.* (Santiago)' /etc/redhat-release || \\\r         grep -q 'CentOS Linux release 6.* (Final)' /etc/redhat-release || \\\r         grep -q 'CentOS release 6.* (Final)' /etc/redhat-release; then\r         if uname -a | grep -q x86_64; then\r             OS=\"RHEL6-64\"\r             echo $OS >> /tmp/MobSvc/sccm.log\r             cp *RHEL6*.tar.gz /tmp/MobSvc\r         fi\r     elif grep -q 'Red Hat Enterprise Linux Server release 7.* (Maipo)' /etc/redhat-release || \\\r         grep -q 'CentOS Linux release 7.* (Core)' /etc/redhat-release; then\r         if uname -a | grep -q x86_64; then\r             OS=\"RHEL7-64\"\r             echo $OS >> /tmp/MobSvc/sccm.log\r             cp *RHEL7*.tar.gz /tmp/MobSvc\r                 fi\r     fi\r elif [ -f /etc/SuSE-release ] && grep -q 'VERSION = 11' /etc/SuSE-release; then\r     if grep -q \"SUSE Linux Enterprise Server 11\" /etc/SuSE-release && grep -q 'PATCHLEVEL = 3' /etc/SuSE-release; then\r         if uname -a | grep -q x86_64; then\r             OS=\"SLES11-SP3-64\"\r             echo $OS >> /tmp/MobSvc/sccm.log\r             cp *SLES11-SP3*.tar.gz /tmp/MobSvc\r         fi\r     elif grep -q \"SUSE Linux Enterprise Server 11\" /etc/SuSE-release && grep -q 'PATCHLEVEL = 4' /etc/SuSE-release; then\r         if uname -a | grep -q x86_64; then\r             OS=\"SLES11-SP4-64\"\r             echo $OS >> /tmp/MobSvc/sccm.log\r             cp *SLES11-SP4*.tar.gz /tmp/MobSvc\r         fi\r     fi\r elif [ -f /etc/lsb-release ] ; then\r     if grep -q 'DISTRIB_RELEASE=14.04' /etc/lsb-release ; then\r        if uname -a | grep -q x86_64; then\r            OS=\"UBUNTU-14.04-64\"\r            echo $OS >> /tmp/MobSvc/sccm.log\r            cp *UBUNTU-14*.tar.gz /tmp/MobSvc\r        fi\r     fi\r else\r     exit 1\r fi\r \r if [ -z \"$OS\" ]; then\r     exit 1\r fi\r \r Install()\r {\r     echo \"Perform Installation.\" >> /tmp/MobSvc/sccm.log\r     ./install -q -d ${INSTALL_DIR} -r MS -v VmWare\r     RET_VAL=$?\r     echo \"Installation Returncode: $RET_VAL\" >> /tmp/MobSvc/sccm.log\r     if [ $RET_VAL -eq 0 ]; then\r         echo \"Installation has succeeded. Proceed to configuration.\" >> /tmp/MobSvc/sccm.log\r         Configure\r     else\r         echo \"Installation has failed.\" >> /tmp/MobSvc/sccm.log\r         exit $RET_VAL\r     fi\r }\r \r Configure()\r {\r     echo \"Perform configuration.\" >> /tmp/MobSvc/sccm.log\r     ${INSTALL_DIR}/Vx/bin/UnifiedAgentConfigurator.sh -i [CSIP] -P MobSvc.passphrase\r     RET_VAL=$?\r     echo \"Configuration Returncode: $RET_VAL\" >> /tmp/MobSvc/sccm.log\r     if [ $RET_VAL -eq 0 ]; then\r         echo \"Configuration has succeeded.\" >> /tmp/MobSvc/sccm.log\r     else\r         echo \"Configuration has failed.\" >> /tmp/MobSvc/sccm.log\r         exit $RET_VAL\r     fi\r }\r \r Upgrade()\r {\r     echo \"Perform Upgrade.\" >> /tmp/MobSvc/sccm.log\r     ./install -q -v VmWare\r     RET_VAL=$?\r     echo \"Upgrade Returncode: $RET_VAL\" >> /tmp/MobSvc/sccm.log\r     if [ $RET_VAL -eq 0 ]; then\r         echo \"Upgrade has succeeded.\" >> /tmp/MobSvc/sccm.log\r     else\r         echo \"Upgrade has failed.\" >> /tmp/MobSvc/sccm.log\r         exit $RET_VAL\r     fi\r }\r \r cp MobSvc.passphrase /tmp/MobSvc\r cd /tmp/MobSvc\r \r tar -zxvf *.tar.gz\r \r if [ -e ${VX_VERSION_FILE} ]; then\r     echo \"${VX_VERSION_FILE} exists. Checking for configuration status.\" >> /tmp/MobSvc/sccm.log\r     agent_configuration=$(grep ^AGENT_CONFIGURATION_STATUS \"${VX_VERSION_FILE}\" | cut -d\"=\" -f2 | tr -d \" \")\r     echo \"agent_configuration=$agent_configuration\" >> /tmp/MobSvc/sccm.log\r      if [ \"$agent_configuration\" == \"Succeeded\" ]; then\r         echo \"Agent is already configured. Proceed to Upgrade.\" >> /tmp/MobSvc/sccm.log\r         Upgrade\r     else\r         echo \"Agent is not configured. Proceed to Configure.\" >> /tmp/MobSvc/sccm.log\r         Configure\r     fi\r else\r     Install\r fi\r \r cd /tmp\r \r ```\r \r ### <a name=\"step-2-create-a-package\"></a>步骤 2：创建包\r \r 1. 登录 Configuration Manager 控制台。\r 2. 浏览到“软件库” > “应用程序管理” > “包”。\r 3. 右键单击“包”，然后选择“创建包”。\r 4. 提供“名称”、“说明”、“制造商”、“语言”和“版本”的值。\r 5. 选中“此包包含源文件”复选框。\r 6. 单击“浏览”，然后选择存储安装程序的网络共享(\\\\\\ContosoSecureFS\\MobilityServiceInstaller\\MobSvcLinux)。\r \r     ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/create_sccm_package-linux.png)\r \r 7. 在“选择要创建的程序类型”页上，选择“标准程序”，然后单击“下一步”。\r \r     ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-standard-program.png)\r \r 8. 在“指定此标准程序的相关信息”页上，提供以下输入，然后单击“下一步”。 （其他输入可以使用其默认值。）\r \r | **参数名称** | **值** |\r |--|--|\r | 名称 | 安装 Azure 移动服务 (Linux) |\r | 命令行 | ./install_linux.sh |\r | 程序可运行 | 用户是否已登录 |\r \r ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-program-properties-linux.png)\r \r 9. 在下一页中，选择“此程序可以在任何平台上运行”。\r   ![创建包和程序向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-program-properties-page2-linux.png)\r \r 10. 要完成向导，请单击“下一步”两次。\r \r > [!NOTE]\r > 脚本支持移动服务代理的全新安装和已安装代理的更新。\r \r ### <a name=\"step-3-deploy-the-package\"></a>步骤 3：部署包\r 1. 在 Configuration Manager 控制台中，右键单击包，然后选择“分发内容”。\r     ![Configuration Manager 控制台的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm_distribute.png)\r 2. 选择包应复制到的“分发点”**[](https://technet.microsoft.com/library/gg712321.aspx#BKMK_PlanForDistributionPoints)**。\r 3. 完成该向导。 包随后开始复制到指定的分发点。\r 4. 完成包分发后，右键单击包，然后选择“部署”。\r     ![Configuration Manager 控制台的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm_deploy.png)\r 5. 选择在先决条件部分中创建的 Linux Server 设备集合作为部署的目标集合。\r \r     ![部署软件向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-select-target-collection-linux.png)\r \r 6. 在“指定内容目标”页上，选择“分发点”。\r 7. 在“指定设置以控制此软件的部署方式”页上，确保目的为“必需”。\r \r     ![部署软件向导的屏幕截图](./media/site-recovery-install-mobility-service-using-sccm/sccm-deploy-select-purpose.png)\r 8. 在“为此部署指定计划”页中，指定计划。 有关详细信息，请参阅[计划包](https://technet.microsoft.com/library/gg682178.aspx)。\r 9. 在“分发点”页上，根据数据中心的需求配置属性。 然后完成向导。\r \r 移动服务将根据配置的计划安装在 Linux 服务器设备集合上。\r \r ## <a name=\"other-methods-to-install-mobility-service\"></a>安装移动服务的其他方法\r 以下是用于安装移动服务的一些其他选项：\r * [使用 GUI 手动安装](http://aka.ms/mobsvcmanualinstall)\r * [使用命令行手动安装](http://aka.ms/mobsvcmanualinstallcli)\r * [使用配置服务器推送安装](http://aka.ms/pushinstall)\r * [使用 Azure 自动化和 Desired State Configuration 自动安装](http://aka.ms/mobsvcdscinstall)\r \r ## <a name=\"uninstall-mobility-service\"></a>卸载移动服务\r 可以创建用于卸载移动服务的 Configuration Manager 包。 使用以下脚本执行相关操作：\r \r ```\r Time /t >> C:\\logfile.log\r REM ==================================================\r REM ==== Check if Mob Svc is already installed =======\r REM ==== If not installed no operation required ========\r REM ==== Else run uninstall command =====================\r REM ==== {275197FC-14FD-4560-A5EB-38217F80CBD1} is ====\r REM ==== guid for Mob Svc Installer ====================\r whoami >> C:\\logfile.log\r NET START | FIND \"InMage Scout Application Service\"\r IF  %ERRORLEVEL% EQU 1 (GOTO :INSTALL) ELSE GOTO :UNINSTALL\r :NOOPERATION\r                 echo \"No Operation Required.\" >> c:\\logfile.log\r                 GOTO :ENDSCRIPT\r :UNINSTALL\r                 echo \"Uninstall\" >> C:\\logfile.log\r                 MsiExec.exe /qn /x {275197FC-14FD-4560-A5EB-38217F80CBD1} /L+*V \"C:\\ProgramData\\ASRSetupLogs\\UnifiedAgentMSIUninstall.log\"\r :ENDSCRIPT\r \r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r 现在，可为虚拟机 [启用保护](/site-recovery/site-recovery-vmware-to-azure#step-6-replicate-applications)。\r \r <!--Update_Description: update meta properties-->"}