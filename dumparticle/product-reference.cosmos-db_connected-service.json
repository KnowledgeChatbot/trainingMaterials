{"Title":"Azure Cosmos DB 的 Visual Studio 连接服务","Description":"可让开发人员轻松连接其 Azure Cosmos DB 帐户，并通过 Visual Studio 连接服务管理资源","Content":"# <a name=\"azure-cosmos-db-visual-studio-connected-service-preview\"></a>Azure Cosmos DB：Visual Studio 连接服务（预览）\r \r Visual Studio 连接服务可让开发人员轻松连接其 Azure Cosmos DB 帐户并管理其资源。\r \r 还可以使用连接服务中的数据资源管理器创建存储过程、UDF 和触发器以执行服务器端业务逻辑。 数据资源管理器公开 API 中提供的所有内置编程数据访问，但可以使用它轻松访问数据。\r \r ## <a name=\"prerequisites\"></a>先决条件\r \r 确保具有以下内容：\r \r * 有效的 Azure 帐户。 如果没有，可以注册[试用帐户](https://www.azure.cn/pricing/1rmb-trial/)。 \r * 一个 Azure Cosmos DB 帐户。 如果没有帐户，请遵循[创建 Azure Cosmos DB 帐户](create-documentdb-dotnet.md)中的步骤在 Azure 门户中创建一个帐户，或参阅[在连接服务工具中创建 Azure Cosmos DB 帐户](#Create-an-Azure-Cosmo-DB-account-in-Connected-Service-tool)。 \r * 如果想要出于开发目的使用本地环境，可以使用 [Azure Cosmos DB 模拟器](local-emulator.md)。 该环境可以模拟 Azure Cosmos DB 服务。\r * [Visual Studio](http://www.visualstudio.com/)。\r * 最新的 Azure Cosmos DB 连接服务软件。 可按以下屏幕截图所示，从 Visual Studio Marketplace 下载 Azure Cosmos DB 连接服务。 在计算机中打开 **Visual Studio**。 在“工具”菜单中选择“扩展和更新...”，再选择“联机” / “Visual Studio Marketplace”。 输入 **cosmosdb** 搜索该软件。\r \r     也可以从 [Visual Studio Marketplace](https://go.microsoft.com/fwlink/?linkid=858709) 安装 Azure Cosmos DB 连接服务。\r \r     ![连接服务下载软件的屏幕截图 (.png)](./media/connected-service/connected-service-downloadbits.png) \r \r ## <a id=\"SetupVS\"></a>设置 Visual Studio 解决方案\r 1. 在计算机上打开 Visual Studio。\r 2. 在“文件”菜单中，依次选择“新建”、“项目”。\r 3. 在“新建项目”对话框中，选择“Visual C#” / “控制台应用(.NET Framework)”或选择“WPF 应用(.NET Framework)”，为项目命名，单击“确定”。\r \r     ![“新建项目”窗口屏幕截图](./media/connected-service/connected-service-new-project.png)\r \r ## <a name=\"add-connected-service-and-add-account\"></a>添加连接服务和帐户\r 1. 在解决方案资源管理器中，右键单击项目节点，选择“添加” / “连接服务”。 或者单击“项目”菜单，选择“添加连接服务”。\r \r     ![“添加连接服务”窗口的屏幕截图](./media/connected-service/connected-service-add-connectedservice-rightclick.png)\r 2. 在“连接服务”页中，单击“连接服务” / “Azure Cosmos DB”打开“Azure Cosmos DB”页。\r \r     ![“Azure Cosmos DB”窗口的屏幕截图](./media/connected-service/connected-service-choose-azure-cosmosdb.png)\r 3. 单击向下箭头进行首次登录或添加帐户。 登录后，空白区域中会显示所有 Azure Cosmos DB 帐户。 选择一个要添加到项目中的 Azure Cosmos DB 帐户。\r \r     ![登录选项和列出的数据库帐户窗口屏幕截图](./media/connected-service/connected-service-add-db-account.png)\r 4. 添加 Azure Cosmos DB 帐户后，会在项目中添加一个 Azure Cosmos DB 帐户连接服务文件夹。 可以重复步骤 1 到 3 添加多个 Azure Cosmos DB 帐户。\r \r     ![连接服务文件夹窗口的屏幕截图](./media/connected-service/connected-service-add-connectedservice-folder.png)\r \r 5. 添加 Azure Cosmos DB 连接服务后，请修改项目，以便能够通过以下方式之一访问 Azure Cosmos DB：\r \r     * 已安装 Azure Cosmos DB 客户端所需的某些 Nuget 包。 可以在包配置文件中看到这些包。 \r \r         ![新的 Azure Cosmos DB 包配置](./media/connected-service/connected-service-packages-config.png)   \r \r     * Azure Cosmos DB 连接 URI 和密钥已添加到项目配置文件（在本例中为 App.config）。 \r \r         ![新的 Azure Cosmos DB 应用配置](./media/connected-service/connected-service-app-config.png) \r \r ## <a name=\"open-azure-cosmos-db-explorer\"></a>打开 Azure Cosmos DB 资源管理器\r 1. 右键单击项目节点，选择“打开 Cosmos DB 资源管理器...”。\r \r     ![尝试打开数据资源管理器窗口的屏幕截图](./media/connected-service/connected-service-right-click-open-data-exporer.png)\r 2. 在“选择 Cosmos DB 帐户”页中，单击下拉列表选择一个 Azure Cosmos DB 帐户。\r \r     ![“已添加帐户连接服务”窗口的屏幕截图](./media/connected-service/connected-service-open-explorer.png)\r 3. 单击“打开”，随即会显示数据资源管理器窗口。\r \r ## <a id=\"Create-an-Azure-Cosmo-DB-account-in-Connected-Service-tool\"></a>在连接服务工具中创建 Azure Cosmos DB 帐户\r 1. 在“连接服务”页上的窗格左下角，单击“创建新的 Cosmos DB 帐户”打开“创建 Cosmos DB 帐户”页。\r \r     ![打开“创建 Azure Cosmos DB 帐户”入口点窗口的屏幕截图](./media/connected-service/connected-service-click-new-db-account.png)\r 2. 在“创建 Cosmos DB 帐户”页上，为此 Azure Cosmos DB 帐户指定所需的配置。\r \r     参考以下屏幕截图中的信息，填写“创建 Cosmos DB 帐户”页上的字段。 \r \r     ![新 Azure Cosmos DB 页](./media/connected-service/connected-service-create-new-account.png)        \r 3. 单击“创建”  以创建帐户。\r \r ## <a name=\"use-data-explorer\"></a>使用数据资源管理器\r \r 打开数据资源管理器后，可执行以下操作：\r * 创建和删除数据库\r * 创建和删除集合\r * 创建、删除和筛选文档\r * 创建和删除存储过程\r * 创建和删除触发器与用户定义的函数以执行服务器端业务逻辑。 \r \r ![新 Azure Cosmos DB 页](./media/connected-service/connected-service-dataexplorerui.png)\r <!-- Not Availble on ## <a name=\"demo\"></a>演示-->\r <!-- Not Available on [在 Visual Studio 中使用 Azure Cosmos DB 连接服务](https://go.microsoft.com/fwlink/?linkid=858711) -->\r \r ## <a name=\"next-steps\"></a>后续步骤\r 本文档已介绍以下操作：\r \r > [!div class=\"checklist\"]\r > * 创建 Azure Cosmos DB 帐户\r > * 添加连接服务和帐户\r > * 打开 Azure Cosmos DB 资源管理器\r > * 使用数据资源管理器\r \r 使用 Azure Cosmos DB 帐户启动并运行连接服务后，请继续阅读以下教程之一，以开始开发解决方案：\r \r * [在 .NET 中使用 DocumentDB API 进行开发](tutorial-develop-documentdb-dotnet.md)。\r * [Azure Cosmos DB：DocumentDB API 入门教程](documentdb-get-started.md)。\r * 希望使用 Azure Cosmos DB 执行规模和性能测试？ 请参阅[使用 Azure Cosmos DB 执行性能和缩放测试](performance-testing.md)。\r * 了解如何[监视 Azure Cosmos DB 帐户](monitor-accounts.md)。\r \r <!--Update_Description: new articles on cosmosdb connected service-->\r \r "}