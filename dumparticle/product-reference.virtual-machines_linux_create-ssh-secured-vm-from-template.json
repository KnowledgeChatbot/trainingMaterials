{"Title":"如何使用 Azure Resource Manager 模板创建 Linux 虚拟机","Description":"如何使用 Azure CLI 2.0 基于 Resource Manager 模板创建 Linux VM","Content":"# <a name=\"how-to-create-a-linux-virtual-machine-with-azure-resource-manager-templates\"></a>如何使用 Azure Resource Manager 模板创建 Linux 虚拟机\r 本文介绍了如何使用 Azure Resource Manager 模板和 Azure CLI 2.0 快速部署 Linux 虚拟机 (VM)。 也可以使用 [Azure CLI 1.0](create-ssh-secured-vm-from-template-nodejs.md) 执行这些步骤。\r \r ## <a name=\"templates-overview\"></a>模板概述\r Azure Resource Manager 模板是 JSON 文件，其中定义了 Azure 解决方案的基础结构和配置。 使用模板可以在解决方案的整个生命周期内重复部署该解决方案，确保以一致的状态部署资源。 若要详细了解模板的格式及其构造方法，请参阅[创建第一个 Azure Resource Manager 模板](../../azure-resource-manager/resource-manager-create-first-template.md)。\r \r ## <a name=\"create-resource-group\"></a>创建资源组\r Azure 资源组是在其中部署和管理 Azure 资源的逻辑容器。 必须在创建虚拟机前创建资源组。 以下示例在 *chinaeast* 区域中创建名为 *myResourceGroupVM* 的资源组：\r \r [!INCLUDE [azure-cli-2-azurechinacloud-environment-parameter](../../../includes/azure-cli-2-azurechinacloud-environment-parameter.md)]\r \r ```azurecli\r az group create --name myResourceGroup --location chinaeast\r ```\r \r ## <a name=\"create-virtual-machine\"></a>创建虚拟机\r 以下示例使用 [az group deployment create](https://docs.azure.cn/zh-cn/cli/group/deployment?view=azure-cli-latest#create) 基于[此 Azure Resource Manager 模板](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-sshkey/azuredeploy.json)创建 VM。 提供自己的 SSH 公钥的值，例如 *~/.ssh/id_rsa.pub* 的内容。 如果需要创建 SSH 密钥对，请参阅[如何为 Azure 中的 Linux VM 创建和使用 SSH 密钥对](mac-create-ssh-keys.md)。\r \r ```azurecli\r az group deployment create --resource-group myResourceGroup \\\r   --template-uri https://raw.githubusercontent.com/azure/azure-quickstart-templates/master/101-vm-sshkey/azuredeploy.json \\\r   --parameters '{\"sshKeyData\": {\"value\": \"ssh-rsa AAAAB3N{snip}B9eIgoZ\"}}'\r ```\r \r 在此示例中，指定了 GitHub 中存储的一个模板。 也可以下载或创建模板并使用同一 `--template-file` 参数指定本地路径。\r \r 若要通过 SSH 连接到 VM，请使用 [az network public-ip show](https://docs.azure.cn/zh-cn/cli/network/public-ip?view=azure-cli-latest#show) 获取公共 IP 地址：\r \r ```azurecli\r az network public-ip show \\\r     --resource-group myResourceGroup \\\r     --name sshPublicIP \\\r     --query [ipAddress] \\\r     --output tsv\r ```\r \r 然后，可以通过 SSH 照常连接到 VM。 在上述命令中提供自己的公共 IP 地址：\r \r ```bash\r ssh azureuser@<ipAddress>\r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r 在此示例中，创建了一个基本的 Linux VM。 若要获取包括应用程序框架或创建更复杂环境的 Resource Manager 模板，请浏览 [Azure 快速入门模板库](https://github.com/Azure/azure-quickstart-templates/)。\r \r <!--Update_Description: update meta properties， update link-->\r "}