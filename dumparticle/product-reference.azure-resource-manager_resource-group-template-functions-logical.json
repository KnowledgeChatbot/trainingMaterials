{"Title":"Azure 资源管理器模板函数 - 逻辑","Description":"介绍 Azure 资源管理器模板中用于确定逻辑值的函数。","Content":"# <a name=\"logical-functions-for-azure-resource-manager-templates\"></a>用于 Azure 资源管理器模板的逻辑函数\r \r Resource Manager 提供了多个用于在模板中进行比较的函数。\r \r * [and](#and)\r * [bool](#bool)\r * [if](#if)\r * [not](#not)\r * [or](#or)\r \r ## <a name=\"and\"></a>and\r `and(arg1, arg2)`\r \r 检查两个参数值是否均为 true。\r \r ### <a name=\"parameters\"></a>parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |布尔值 |第一个值，需检查其是否为 true。 |\r | arg2 |是 |布尔值 |第二个值，需检查其是否为 true。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 如果两个值均为 true，则返回 True；否则返回 False。\r \r ### <a name=\"examples\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/andornot.json)演示如何使用逻辑函数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"resources\": [ ],\r     \"outputs\": {\r         \"andExampleOutput\": {\r             \"value\": \"[and(bool('true'), bool('false'))]\",\r             \"type\": \"bool\"\r         },\r         \"orExampleOutput\": {\r             \"value\": \"[or(bool('true'), bool('false'))]\",\r             \"type\": \"bool\"\r         },\r         \"notExampleOutput\": {\r             \"value\": \"[not(bool('true'))]\",\r             \"type\": \"bool\"\r         }\r     }\r }\r ```\r \r 前述示例的输出为：\r \r | Name | 类型 | 值 |\r | ---- | ---- | ----- |\r | andExampleOutput | Bool | False |\r | orExampleOutput | Bool | True |\r | notExampleOutput | Bool | False |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r ```\r \r ## <a name=\"bool\"></a>bool\r `bool(arg1)`\r \r 将参数转换为布尔值。\r \r ### <a name=\"parameters\"></a>参数\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |字符串或整数 |要转换为布尔值的值。 |\r \r ### <a name=\"return-value\"></a>返回值\r 转换后的值的布尔值。\r \r ### <a name=\"examples\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/bool.json)演示如何对字符串或整数使用 bool。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"resources\": [],\r     \"outputs\": {\r         \"trueString\": {\r             \"value\": \"[bool('true')]\",\r             \"type\" : \"bool\"\r         },\r         \"falseString\": {\r             \"value\": \"[bool('false')]\",\r             \"type\" : \"bool\"\r         },\r         \"trueInt\": {\r             \"value\": \"[bool(1)]\",\r             \"type\" : \"bool\"\r         },\r         \"falseInt\": {\r             \"value\": \"[bool(0)]\",\r             \"type\" : \"bool\"\r         }\r     }\r }\r ```\r \r 上述示例中使用默认值的输出为：\r \r | 名称 | 类型 | 值 |\r | ---- | ---- | ----- |\r | trueString | Bool | True |\r | falseString | Bool | False |\r | trueInt | Bool | True |\r | falseInt | Bool | False |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/bool.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/bool.json\r ```\r \r ## <a name=\"if\"></a>if\r `if(condition, trueValue, falseValue)`\r \r 根据条件为 true 或 false 返回值。\r \r ### <a name=\"parameters\"></a>Parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | 条件 |是 |布尔值 |要检查是否为 true 的值。 |\r | trueValue |是 | 字符串、int、对象或数组 |条件为 true 时返回的值。 |\r | falseValue |是 | 字符串、int、对象或数组 |条件为 false 时返回的值。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 如果第一个参数为 True，则返回第二个参数；否则返回第三个参数。\r \r ### <a name=\"remarks\"></a>备注\r \r 此函数可用于有条件地设置资源属性。 下面的示例并不是完整的模板，但它显示了有条件地设置可用性集的相关部分。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"parameters\": {\r         ...\r         \"availabilitySet\": {\r             \"type\": \"string\",\r             \"allowedValues\": [\r                 \"yes\",\r                 \"no\"\r             ]\r         }\r     },\r     \"variables\": {\r         ...\r         \"availabilitySetName\": \"availabilitySet1\",\r         \"availabilitySet\": {\r             \"id\": \"[resourceId('Microsoft.Compute/availabilitySets',variables('availabilitySetName'))]\"\r         }\r     },\r     \"resources\": [\r         {\r             \"condition\": \"[equals(parameters('availabilitySet'),'yes')]\",\r             \"type\": \"Microsoft.Compute/availabilitySets\",\r             \"name\": \"[variables('availabilitySetName')]\",\r             ...\r         },\r         {\r             \"apiVersion\": \"2016-03-30\",\r             \"type\": \"Microsoft.Compute/virtualMachines\",\r             \"properties\": {\r                 \"availabilitySet\": \"[if(equals(parameters('availabilitySet'),'yes'), variables('availabilitySet'), json('null'))]\",\r                 ...\r             }\r         },\r         ...\r     ],\r     ...\r }\r ```\r \r ### <a name=\"examples\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/if.json)演示如何使用 `if` 函数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"yesOutput\": {\r             \"type\": \"string\",\r             \"value\": \"[if(equals('a', 'a'), 'yes', 'no')]\"\r         },\r         \"noOutput\": {\r             \"type\": \"string\",\r             \"value\": \"[if(equals('a', 'b'), 'yes', 'no')]\"\r         }\r     }\r }\r ```\r \r 前述示例的输出为：\r \r | Name | 类型 | 值 |\r | ---- | ---- | ----- |\r | yesOutput | String | 是 |\r | noOutput | String | 否 |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/if.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/if.json\r ```\r \r ## <a name=\"not\"></a>not\r `not(arg1)`\r \r 将布尔值转换为其相反值。\r \r ### <a name=\"parameters\"></a>parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |布尔值 |要转换的值。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 参数为 False 时返回 True。 参数为 True 时返回 False。\r \r ### <a name=\"examples\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/andornot.json)演示如何使用逻辑函数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"resources\": [ ],\r     \"outputs\": {\r         \"andExampleOutput\": {\r             \"value\": \"[and(bool('true'), bool('false'))]\",\r             \"type\": \"bool\"\r         },\r         \"orExampleOutput\": {\r             \"value\": \"[or(bool('true'), bool('false'))]\",\r             \"type\": \"bool\"\r         },\r         \"notExampleOutput\": {\r             \"value\": \"[not(bool('true'))]\",\r             \"type\": \"bool\"\r         }\r     }\r }\r ```\r \r 前述示例的输出为：\r \r | Name | 类型 | 值 |\r | ---- | ---- | ----- |\r | andExampleOutput | Bool | False |\r | orExampleOutput | Bool | True |\r | notExampleOutput | Bool | False |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r ```\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/not-equals.json)结合使用 not 和 [equals](resource-group-template-functions-comparison.md#equals)。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"resources\": [\r     ],\r     \"outputs\": {\r         \"checkNotEquals\": {\r             \"type\": \"bool\",\r             \"value\": \"[not(equals(1, 2))]\"\r         }\r     }\r ```\r \r 前述示例的输出为：\r \r | Name | 类型 | 值 |\r | ---- | ---- | ----- |\r | checkNotEquals | Bool | True |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/not-equals.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/not-equals.json\r ```\r \r ## <a name=\"or\"></a>或\r `or(arg1, arg2)`\r \r 检查其中任一参数值是否为 true。\r \r ### <a name=\"parameters\"></a>parameters\r \r | 参数 | 必选 | 类型 | 说明 |\r |:--- |:--- |:--- |:--- |\r | arg1 |是 |布尔值 |第一个值，需检查其是否为 true。 |\r | arg2 |是 |布尔值 |第二个值，需检查其是否为 true。 |\r \r ### <a name=\"return-value\"></a>返回值\r \r 如果任一值为 true，则返回 True；否则返回 False。\r \r ### <a name=\"examples\"></a>示例\r \r 以下[示例模板](https://github.com/Azure/azure-docs-json-samples/blob/master/azure-resource-manager/functions/andornot.json)演示如何使用逻辑函数。\r \r ```json\r {\r     \"$schema\": \"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#\",\r     \"contentVersion\": \"1.0.0.0\",\r     \"resources\": [ ],\r     \"outputs\": {\r         \"andExampleOutput\": {\r             \"value\": \"[and(bool('true'), bool('false'))]\",\r             \"type\": \"bool\"\r         },\r         \"orExampleOutput\": {\r             \"value\": \"[or(bool('true'), bool('false'))]\",\r             \"type\": \"bool\"\r         },\r         \"notExampleOutput\": {\r             \"value\": \"[not(bool('true'))]\",\r             \"type\": \"bool\"\r         }\r     }\r }\r ```\r \r 前述示例的输出为：\r \r | Name | 类型 | 值 |\r | ---- | ---- | ----- |\r | andExampleOutput | Bool | False |\r | orExampleOutput | Bool | True |\r | notExampleOutput | Bool | False |\r \r 要使用 Azure CLI 部署此示例模板，请使用：\r \r ```azurecli\r az group deployment create -g functionexamplegroup --template-uri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r ```\r \r 要使用 PowerShell 部署此示例模板，请使用：\r \r ```powershell\r New-AzureRmResourceGroupDeployment -ResourceGroupName functionexamplegroup -TemplateUri https://raw.githubusercontent.com/Azure/azure-docs-json-samples/master/azure-resource-manager/functions/andornot.json\r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r * 有关 Azure Resource Manager 模板中各部分的说明，请参阅 [Authoring Azure Resource Manager templates](resource-group-authoring-templates.md)（创作 Azure Resource Manager 模板）。\r * 若要合并多个模板，请参阅[将链接的模板与 Azure Resource Manager 配合使用](resource-group-linked-templates.md)。\r * 若要在创建资源类型时迭代指定的次数，请参阅[在 Azure Resource Manager 中创建多个资源实例](resource-group-create-multiple.md)。\r * 若要查看如何部署已创建的模板，请参阅[使用 Azure Resource Manager 模板部署应用程序](resource-group-template-deploy.md)。\r \r <!--Update_Description: update meta properties, add azure cli and powershell command example block-->"}