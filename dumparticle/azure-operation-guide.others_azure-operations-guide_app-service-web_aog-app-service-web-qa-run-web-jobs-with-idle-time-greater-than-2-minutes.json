{"Title":"如何运行 idle 时间大于 2 分钟的计划作业","Description":"当 WebJobs 空闲时间超过 2min，Azure 将会中止运行的工作进程，导致 WebJobs 运行失败","Content":"\r # 如何运行 idle 时间大于 2 分钟的计划作业\r \r ## 问题描述\r \r 当 WebJobs 空闲时间超过 2min，Azure 将会中止运行的工作进程，导致 WebJobs 运行失败。\r \r ## 解决方案\r \r 在 [Azure 门户](https://portal.azure.cn)中修改 **WEBJOBS_IDLE_TIMEOUT** 设置并开启了“**始终可用**”。\r \r 默认的 **WEBJOBS_IDLE_TIMEOUT** 为 120 秒，WebJobs 空闲时间超过了此数值，将会被中止工作进程，导致 WebJobs 运行失败。\r \r > [!NOTE]\r > 空闲时间指的是 WebJobs 在 2min 内，没有 CPU 时间或者 output 输出，长时间在等待请求，没有任何的数据交互。\r \r 可以通过以下的内容来修改 **WEBJOBS_IDLE_TIMEOUT**，保证 WebJobs 正常运行。\r \r 在应用程序设置中修改 **WEBJOBS_IDLE_TIMEOUT** 的配置（此处修改的时间为 20 分钟）:\r \r ![WebJob_idle_timeout](./media/aog-app-service-web-qa-run-web-jobs-with-idle-time-greater-than-2-minutes/webjobs_idle_timeout.png)\r \r 开启“**始终可用**”功能 :\r \r ![alwayson](./media/aog-app-service-web-qa-run-web-jobs-with-idle-time-greater-than-2-minutes/alwayson.png)\r \r ## 参考链接\r \r [Kudu - WebJobs](https://github.com/projectkudu/kudu/wiki/WebJobs)"}