{"Title":"使用 PowerShell cmdlet 创建 Azure IoT 中心","Description":"如何使用 PowerShell cmdlet 创建 IoT 中心。","Content":"# <a name=\"create-an-iot-hub-using-the-new-azurermiothub-cmdlet\"></a>使用 New-AzureRmIotHub cmdlet 创建 IoT 中心\r \r [!INCLUDE [iot-hub-resource-manager-selector](../../includes/iot-hub-resource-manager-selector.md)]\r \r ## <a name=\"introduction\"></a>介绍\r \r 可以使用 Azure PowerShell cmdlet 创建和管理 Azure IoT 中心。 本教程介绍如何使用 PowerShell 创建 IoT 中心。\r \r > [!NOTE]\r > Azure 提供了用于创建和使用资源的两个不同部署模型：[Azure Resource Manager 模型和经典模型](../azure-resource-manager/resource-manager-deployment-model.md)。  本文介绍了如何使用 Azure Resource Manager 部署模型。\r \r 要完成本教程，需要具备以下先决条件：\r \r * 有效的 Azure 帐户。 <br/>如果没有帐户，可以创建一个[试用帐户][lnk-free-trial]，只需几分钟即可完成。\r * [Azure PowerShell cmdlet][lnk-powershell-install]。\r \r ## <a name=\"connect-to-your-azure-subscription\"></a>连接到 Azure 订阅\r 在 PowerShell 命令提示符中，输入以下命令以登录 Azure 订阅：\r \r ```powershell\r Login-AzureRmAccount -Environment $(Get-AzureRmEnvironment -Name AzureChinaCloud)\r ```\r \r 如果有多个 Azure 订阅，则访问 Azure 即有权访问与凭据关联的所有 Azure 订阅。 使用以下命令，列出可供使用的 Azure 订阅：\r \r ```powershell\r Get-AzureRMSubscription\r ```\r \r 使用以下命令，选择想要用于运行命令以创建 IoT 中心的订阅。 可使用上一命令输出中的订阅名称或 ID：\r \r ```powershell\r Select-AzureRMSubscription `\r     -SubscriptionName \"{your subscription name}\"\r ```\r \r ## <a name=\"create-resource-group\"></a>创建资源组\r \r 需要一个资源组来部署 IoT 中心。 可以使用现有资源组，也可以创建新组。\r \r 可以使用以下命令来搜索可以部署 IoT 中心的位置：\r \r ```powershell\r ((Get-AzureRmResourceProvider `\r   -ProviderNamespace Microsoft.Devices).ResourceTypes `\r   | Where-Object ResourceTypeName -eq IoTHubs).Locations\r ```\r \r 若要在 IoT 中心的其中一个支持位置中为 IoT 中心创建资源组，请使用以下命令。 此示例在“中国东部”区域中创建名为 **MyIoTRG1** 的资源组：\r \r ```powershell\r New-AzureRmResourceGroup -Name MyIoTRG1 -Location \"China East\"\r ```\r \r ## <a name=\"create-an-iot-hub\"></a>创建 IoT 中心\r \r 若要在上一步创建的资源组中创建 IoT 中心，请使用以下命令。 此示例在“中国东部”区域中创建名为 **MyTestIoTHub** 的 **S1** 中心：\r \r ```powershell\r New-AzureRmIotHub `\r     -ResourceGroupName MyIoTRG1 `\r     -Name MyTestIoTHub `\r     -SkuName S1 -Units 1 `\r     -Location \"China East\"\r ```\r \r IoT 中心的名称必须是唯一的。\r \r [!INCLUDE [iot-hub-pii-note-naming-hub](../../includes/iot-hub-pii-note-naming-hub.md)]\r \r \r 可以使用以下命令列出订阅中的所有 IoT 中心：\r \r ```powershell\r Get-AzureRmIotHub\r ```\r \r 上一个示例添加向你计费的 S1 标准 IoT 中心。 可以使用以下命令删除 IoT 中心：\r \r ```powershell\r Remove-AzureRmIotHub `\r     -ResourceGroupName MyIoTRG1 `\r     -Name MyTestIoTHub\r ```\r \r 或者，可以使用以下命令删除资源组及其包含的所有资源：\r \r ```powershell\r Remove-AzureRmResourceGroup -Name MyIoTRG1\r ```\r \r ## <a name=\"next-steps\"></a>后续步骤\r \r 现在，已使用 PowerShell cmdlet 部署了 IoT 中心，接下来可以进一步进行探索：\r \r * 发现其他[可用于 IoT 中心的 PowerShell cmdlet][lnk-iothub-cmdlets]。\r * 阅读了解 [IoT 中心资源提供程序 REST API][lnk-rest-api] 的相关功能。\r \r 若要详细了解如何开发 IoT 中心，请参阅以下文章：\r \r * [C SDK 简介][lnk-c-sdk]\r * [Azure IoT SDK][lnk-sdks]\r \r 若要进一步探索 IoT 中心的功能，请参阅：\r \r * [使用 Azure IoT Edge 将 AI 部署到边缘设备][lnk-iotedge]\r \r <!-- Links -->\r [lnk-free-trial]: https://www.azure.cn/pricing/1rmb-trial/\r [lnk-powershell-install]: ../powershell-install-configure.md\r [lnk-iothub-cmdlets]: https://docs.microsoft.com/powershell/module/azurerm.iothub/\r [lnk-rest-api]: https://docs.microsoft.com/rest/api/iothub/iothubresource\r \r [lnk-c-sdk]: ./iot-hub-device-sdk-c-intro.md\r [lnk-sdks]: ./iot-hub-devguide-sdks.md\r \r [lnk-iotedge]: ./iot-hub-linux-iot-edge-simulated-device.md\r \r <!--Update_Description: update meta data and wording-->\r "}