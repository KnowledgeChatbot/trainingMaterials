{"Title":"Web 应用中如何设置静态文件缓存过期时间","Description":"Web 应用中如何设置静态文件缓存过期时间","Content":"\r # Web 应用中如何设置静态文件缓存过期时间\r \r ## **问题描述**\r \r 在使用 Azure Web 应用时，如何设置静态文件缓存过期时间。\r \r ## **问题分析**\r \r 目前， Azure Web 应用都是基于 IIS 转发的，我们可以在 wwwroot 中配置 web.config 来设置缓存过期时间。\r \r ## **解决办法**\r \r IIS 可以基于不同的文件夹来进行配置规则，例如，设置 Scripts 文件夹中的静态文件的缓存过期时间为 60 天，其他静态文件过期时间为 30 天，则需要配置规则如下：\r \r ![script](./media/aog-app-service-web-how-to-configure-local-cache-expire-time/script.jpg)\r \r ```XML\r <configuration>\r   <system.webServer>\r         <staticContent> \r          <!-- Set expire headers to 30 days for static content-->\r          <clientCache cacheControlCustom=\"public\" cacheControlMode=\"UseMaxAge\" cacheControlMaxAge=\"30.00:00:00\" />\r          <mimeMap fileExtension=\".json\" mimeType=\"application/x-javascript\" />\r         </staticContent> \r   </system.webServer>\r \r    <location path=\"Scripts\">\r     <system.webServer>\r       <staticContent>\r         <clientCache cacheControlCustom=\"public\" cacheControlMode=\"UseMaxAge\" cacheControlMaxAge=\"60.00:00:00\" />\r       </staticContent>\r     </system.webServer>\r   </location>\r </configuration>\r ```\r \r 这样 Scirpts 文件夹中静态资源的缓存缓存时间为 60 天。\r \r ![cache2](./media/aog-app-service-web-how-to-configure-local-cache-expire-time/cache2.jpg)\r \r 其余静态资源的缓存时间为 30 天。\r \r ![cache2](./media/aog-app-service-web-how-to-configure-local-cache-expire-time/cache1.jpg)\r \r ## **参考文档**\r \r 关于 IIS 配置缓存规则，请参考 IIS 官网文档：[Client Cache](https://docs.microsoft.com/iis/configuration/system.webserver/staticcontent/clientcache)。"}