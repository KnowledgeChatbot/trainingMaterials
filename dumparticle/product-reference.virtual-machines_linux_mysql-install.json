{"Title":"如何在 Azure 上安装 MySQL","Description":"了解如何在 Azure 中的 Linux 虚拟机（Ubuntu 或 RedHat 系列 OS）上安装 MySQL 堆栈","Content":"# <a name=\"how-to-install-mysql-on-azure\"></a>如何在 Azure 上安装 MySQL\r 本文介绍如何在运行 Linux 的 Azure 虚拟机上安装和配置 MySQL。\r \r [!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-both-include.md)]\r \r ## <a name=\"install-mysql-on-your-virtual-machine\"></a>在虚拟机上安装 MySQL\r > [!NOTE]\r > 必须已经有一个运行 Linux 的 Azure 虚拟机，才能完成本教程。 继续操作前，请参阅 [Azure Linux VM 教程](quick-create-cli.md?toc=%2fvirtual-machines%2flinux%2ftoc.json)创建并设置一个 Linux VM，其中 `mysqlnode` 为 VM 名称，`azureuser` 为用户。\r > \r > \r \r 在此情况下，请使用 3306 端口作为 MySQL 端口。  \r \r 通过 putty 连接到创建的 Linux VM。 首次使用 Azure Linux VM，请参阅[此处](mac-create-ssh-keys.md?toc=%2fvirtual-machines%2flinux%2ftoc.json)了解如何使用 putty 连接到 Linux VM。\r \r 我们将使用存储库包来安装 MySQL5.6，作为本文中的示例。 实际上，MySQL5.6 在性能上相对于 MySQL5.5 而言有更大的改进。  单击[此处](http://www.mysqlperformanceblog.com/2013/02/18/is-mysql-5-6-slower-than-mysql-5-5/)查看详细信息。\r \r ### <a name=\"how-to-install-mysql56-on-ubuntu\"></a>如何在 Ubuntu 上安装 MySQL5.6\r 此处将使用 Azure 中的 Linux VM（Ubuntu）。\r \r * 步骤 1：安装 MySQL Server 5.6   切换到 `root` 用户：\r \r             #[azureuser@mysqlnode:~]sudo su -\r \r     安装 mysql-server 5.6：\r \r             #[root@mysqlnode ~]# apt-get update\r             #[root@mysqlnode ~]# apt-get -y install mysql-server-5.6\r \r     在安装过程中，会看到如下所示的对话窗口弹出，要求设置 MySQL 根密码。需要在此处设置该密码。\r \r     ![图像](./media/mysql-install/virtual-machines-linux-install-mysql-p1.png)\r \r     再次输入密码进行确认。\r \r     ![图像](./media/mysql-install/virtual-machines-linux-install-mysql-p2.png)\r \r * 步骤 2：登录 MySQL Server\r \r     MySQL Server 安装完成后，将自动启动 MySQL 服务。 可以使用 `root` 用户登录 MySQL Server。\r     使用以下命令登录并输入密码。\r \r              #[root@mysqlnode ~]# mysql -uroot -p\r * 步骤 3：管理正在运行的 MySQL 服务\r \r     (a) 获取 MySQL 服务的状态\r \r              #[root@mysqlnode ~]# service mysql status\r \r     (b) 启动 MySQL 服务\r \r              #[root@mysqlnode ~]# service mysql start\r \r     (c) 停止 MySQL 服务\r \r              #[root@mysqlnode ~]# service mysql stop\r \r     (d) 重启 MySQL 服务\r \r              #[root@mysqlnode ~]# service mysql restart\r \r ### <a name=\"how-to-install-mysql-on-red-hat-os-family-like-centos-oracle-linux\"></a>如何在 Red Hat OS 系列（例如 CentOS、Oracle Linux）上安装 MySQL\r 此处会将 Linux VM 与 CentOS 或 Oracle Linux 一起使用。\r \r * 步骤 1：添加 MySQL Yum 存储库   切换到 `root` 用户：\r \r             #[azureuser@mysqlnode:~]sudo su -\r \r     下载并安装 MySQL 发行包：\r \r             #[root@mysqlnode ~]# wget http://repo.mysql.com/mysql-community-release-el6-5.noarch.rpm\r             #[root@mysqlnode ~]# yum localinstall -y mysql-community-release-el6-5.noarch.rpm\r * 步骤 2：编辑以下文件，允许 MySQL 存储库下载 MySQL5.6 程序包。\r \r             #[root@mysqlnode ~]# vim /etc/yum.repos.d/mysql-community.repo\r \r     将此文件的每个值更新为下面的值：\r \r         \\# *Enable to use MySQL 5.6*\r \r         [mysql56-community]\r         name=MySQL 5.6 Community Server\r \r         baseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/6/$basearch/\r \r         enabled=1\r \r         gpgcheck=1\r \r         gpgkey=file:/etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\r * 第 3 步：从 MySQL 存储库“安装 MySQL”   安装 MySQL：\r \r            #[root@mysqlnode ~]#yum install mysql-community-server\r \r     将安装 MySQL RPM 程序包和所有相关的程序包。\r * 步骤 4：管理正在运行的 MySQL 服务\r \r     (a) 检查 MySQL Server 的服务状态：\r \r            #[root@mysqlnode ~]#service mysqld status\r \r     (b) 检查 MySQL Server 的默认端口是否正在运行：\r \r            #[root@mysqlnode ~]#netstat  -tunlp|grep 3306\r \r     (c) 启动 MySQL Server：\r \r            #[root@mysqlnode ~]#service mysqld start\r \r     (d) 停止 MySQL Server：\r \r            #[root@mysqlnode ~]#service mysqld stop\r \r     (e) 将 MySQL 设置为在系统启动时启动：\r \r            #[root@mysqlnode ~]#chkconfig mysqld on\r \r ### <a name=\"how-to-install-mysql-on-suse-linux\"></a>如何在 SUSE Linux 上安装 MySQL\r 此处会将 OpenSUSE 与 Linux VM 一起使用。\r \r * 步骤 1：下载并安装 MySQL Server\r \r     通过以下命令切换到 `root` 用户：  \r \r            #sudo su -\r \r     下载并安装 MySQL 程序包：\r \r            #[root@mysqlnode ~]# zypper update\r \r            #[root@mysqlnode ~]# zypper install mysql-server mysql-devel mysql\r * 步骤 2：管理正在运行的 MySQL 服务\r \r     (a) 检查 MySQL Server 的状态：\r \r            #[root@mysqlnode ~]# rcmysql status\r \r     (b) 检查 MySQL Server 的默认端口是否正在运行：\r \r            #[root@mysqlnode ~]# netstat  -tunlp|grep 3306\r \r     (c) 启动 MySQL Server：\r \r            #[root@mysqlnode ~]# rcmysql start\r \r     (d) 停止 MySQL Server：\r \r            #[root@mysqlnode ~]# rcmysql stop\r \r     (e) 将 MySQL 设置为在系统启动时启动：\r \r            #[root@mysqlnode ~]# insserv mysql\r \r ### <a name=\"next-step\"></a>后续步骤\r 在[此处](https://www.mysql.com/)查找更多有关 MySQL 的使用方法和信息。\r "}