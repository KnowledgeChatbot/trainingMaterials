{"Title":"Hadoop 组件和版本 - Azure HDInsight","Description":"了解 HDInsight 中的 Hadoop 组件和版本，以及 Hortonworks 数据平台的此云分发版中可用的服务级别。","Content":"# <a name=\"what-are-the-hadoop-components-and-versions-available-with-hdinsight\"></a>HDInsight 提供了哪些 Hadoop 组件和版本？\r \r 了解 Azure HDInsight 中的 Hadoop 生态系统组件和版本。 另外，还将了解如何检查 HDInsight 中的 Hadoop 组件版本。 \r \r [!INCLUDE [hdinsight-linux-acn-version.md](../../includes/hdinsight-linux-acn-version.md)]\r \r 每个 HDInsight 版本都是某个版本的 Hortonworks 数据平台 (HDP) 的云分发版。\r \r ## <a name=\"hadoop-components-available-with-different-hdinsight-versions\"></a>可与不同 HDInsight 版本使用的 Hadoop 组件\r Azure HDInsight 支持多个可随时部署的 Hadoop 群集版本。 每个版本选项创建 HDP 分发版的一个特定版本和该分发版内包含的一组组件。 从 2017 年 2 月 17 日起，Azure HDInsight 使用的默认群集版本是 3.5 并基于 HDP 2.5。\r \r 下表中列出了与 HDInsight 群集版本关联的组件版本。 \r \r > [!NOTE]\r > HDInsight 服务的默认版本可能会更改，不会另行通知。 如果依赖某个版本，建议在使用 .NET SDK 以及 Azure PowerShell 和 Azure CLI 创建群集时指定 HDInsight 版本。\r \r | 组件 | HDInsight 3.6（默认） | HDInsight 3.5 | HDInsight 3.4 | HDInsight 3.3 | HDInsight 3.2 | HDInsight 3.1 | HDInsight 3.0 |\r | --- | --- | --- | --- | --- | --- | --- |--- |\r | Hortonworks 数据平台 |2.6 |2.5 |2.4 |2.3 |2.2 |2.1.7 |2.0 |\r | Apache Hadoop 和 YARN |2.7.3 |2.7.3 |2.7.1 |2.7.1 |2.6.0 |2.4.0 |2.2.0 |\r | Apache Tez |0.7.0 |0.7.0 |0.7.0 |0.7.0 |0.5.2 |0.4.0 |-|\r | Apache Pig |0.16.0 |0.16.0 |0.15.0 |0.15.0 |0.14.0 |0.12.1 |0.12.0 |\r | Apache Hive 和 HCatalog |1.2.1 |1.2.1 |1.2.1 |1.2.1 |0.14.0 |0.13.1 |0.12.0 |\r | Apache Hive2 | 2.1.0 |-|-|-|-|-|-|\r | Apache Tez Hive2 | 0.8.4 |-|-|-|-|-|-|\r | Apache Ranger | 0.7.0 |0.6.0 |-|-|-|-|-|\r | Apache HBase |1.1.2 |1.1.2 |1.1.2 |1.1.1 |0.98.4 |0.98.0 |-|\r | Apache Sqoop |1.4.6 |1.4.6 |1.4.6 |1.4.6 |1.4.5 |1.4.4 |1.4.4 |\r | Apache Oozie |4.2.0 |4.2.0 |4.2.0 |4.2.0 |4.1.0 |4.0.0 |4.0.0 |\r | Apache Zookeeper |3.4.6 |3.4.6 |3.4.6 |3.4.6 |3.4.6 |3.4.5 |3.4.5 |\r | Apache Storm |1.1.0 |1.0.1 |0.10.0 |0.10.0 |0.9.3 |0.9.1 |-|\r | Apache Mahout |0.9.0+ |0.9.0+ |0.9.0+ |0.9.0+ |0.9.0 |0.9.0 |-|\r | Apache Phoenix |4.7.0 |4.7.0 |4.4.0 |4.4.0 |4.2.0 |4.0.0.2.1.7.0-2162 |-|\r | Apache Spark |2.1.0（仅限 Linux） |1.6.2 + 2.0（仅限 Linux） |1.6.0（仅限 Linux） |1.5.2（仅限 Linux 实验性内部版本） |1.3.1（仅限 Windows） |-|-|\r | Apache Kafka | 0.10.0 | 0.10.0 | 0.9.0 |-|-|-|-|\r | Apache Ambari | 2.5.0 | 2.4.0 | 2.2.1 | 2.1.0 |-|-|-|\r | Apache Zeppelin | 0.7.0 |-|-|-|-|-|-|\r | Mono |4.2.1 |4.2.1 |3.2.8 |-|-|-|\r \r ## <a name=\"check-for-current-hadoop-component-version-information\"></a>检查当前的 Hadoop 组件版本信息\r \r 与 HDInsight 群集版本关联的组件版本可能会随 HDInsight 的更新而更改。 若要检查 Hadoop 组件并验证正在为群集使用哪些版本，请使用 Ambari REST API。 **GetComponentInformation** 命令检索有关服务组件的信息。 有关详细信息，请参阅 [Ambari 文档][ambari-docs]。\r \r 对于 Windows 群集，检查组件版本的另一种方法是使用远程桌面登录到群集并检查 C:\\apps\\dist\\ 目录的内容。\r \r > [!IMPORTANT]\r > Linux 是 HDInsight 3.4 或更高版本上使用的唯一操作系统。 有关详细信息，请参阅 [HDInsight 上的 Windows 停用](#hdinsight-windows-retirement)。\r \r ### <a name=\"release-notes\"></a>发行说明\r \r 请参阅 [HDInsight 发行说明](hdinsight-release-notes.md)，了解 HDInsight 最新版本的更多发行说明。\r \r ## <a name=\"supported-hdinsight-versions\"></a>支持的 HDInsight 版本\r 下表列出当前可用的 HDInsight 版本以及它们使用的相应 Hortonworks 数据平台版本。 请注意以下版本信息：\r > [!NOTE]\r > 在对某个版本的支持到期后，不能通过 Microsoft Azure 经典门户获得该版本。 但是，可继续使用 Windows PowerShell [New-AzureRmHDInsightCluster](https://msdn.microsoft.com/library/mt619331.aspx) 命令中的 `Version` 参数和 .NET SDK 获取群集版本，直到版本停用的那天为止。\r > \r > 对于 HDInsight 2.1 和更高版本，默认情况下会集部署具有两个头节点的高度可用群集。 它们不适用于 HDInsight 1.6 版本的群集。\r \r | HDInsight 版本 | HDP 版本 | VM OS | 高可用性 | 在 Azure 门户上的可用性 |\r | --- | --- | --- | --- | --- |\r | HDI 3.6 |HDP 2.6 |Ubuntu 16 |是 |是 |\r | HDI 3.5 |HDP 2.5 |Ubuntu 16 |是 |是 |\r | HDI 3.4 |HDP 2.4 |Ubuntu 14.0.4 LTS |是 |是 |\r | HDI 3.3 |HDP 2.3 |Windows Server 2012R2 |是 |是 |\r | HDI 3.2 |HDP 2.2 |Windows Server 2012R2 |是 |否 |\r | HDI 3.1 |HDP 2.1 |Windows Server 2012R2 |是 |否 |\r | HDI 3.0 |HDP 2.0 |Windows Server 2012R2 |是 |否 |\r | HDI 2.1 |HDP 1.3 |Windows Server 2012R2 |是 |否 |\r | HDI 1.6 |HDP 1.1 | |否 |否 |\r \r ## <a name=\"hdinsight-windows-retirement\"></a>HDInsight Windows 停用\r \r Azure HDInsight (HDI) 版本 3.3 是 Windows 上的最后一个 HDInsight 版本，将在 2018 年 7 月 31 日停用。 如果目前在 Windows 上运行任何 HDI 群集（3.3 或更低版本），必须在 2018 年 7 月 31 日之前迁移到 HDInsight on Linux（HDI 3.5 或更高版本）才能继续创建或调整 HDI 群集。 对 HDI 3.3 on Windows 的支持已在 2017 年 6 月 12 日终止。 \r \r 从 HDInsight 版本 3.4 开始，Microsoft 仅在 Linux OS 上发行了 HDInsight。 因此，HDInsight 中的某些组件仅可供 Linux 使用。 这些组件包括 Apache Ranger、Kafka、Interactive Hive、Spark 和 HDInsight 应用程序。 HDInsight 的将来版本仅在 Linux OS 上可用。 Windows 上的 HDInsight 将不会有任何将来版本。 \r \r ## <a name=\"faqs\"></a>常见问题\r \r ### <a name=\"what-is-the-timeline-for-retiring-hdinsight-on-windows\"></a>停用 Windows 上的 HDInsight 的日程表是怎样的？\r Windows 上的 HDInsight 的停用日期是 2018 年 7 月 31 日。 如果针对你的区域计划的停用日期不同，则你会单独收到通知。 \r \r ### <a name=\"what-is-the-impact-of-retiring-hdinsight-on-windows-for-existing-customers\"></a>停用 Windows 上的 HDInsight 对现有客户有何影响？\r * 停用后，无法在 Windows 群集上创建新的 HDI。\r * 停用后，无法调整现有 HDInsight on Windows 群集的大小。 \r  * 将来的 HDInsight 版本只能在 Linux OS 上使用。 将来不会发布任何适用于 Windows OS 的 HDInsight 版本。\r * 请注意，对 HDInsight 3.3 的支持已在 2017 年 6 月 12 日终止。 因此，我们不会针对 HDInsight 3.3 或更低版本提供支持或 bug 修复。 \r \r ### <a name=\"which-versions-of-hdinsight-on-windows-are-affected\"></a>Windows 上的哪些 HDInsight 版本会受影响？\r Azure HDInsight 版本 3.3 是适用于 Windows 的最后 HDInsight 版本。 在 Windows 上的 HDInsight 停用之前，必须将所有 HDInsight Windows 3.3 或更低版本的群集迁移到 Linux 上的 HDInsight 版本 3.5 或更高版本。 将群集迁移到 Linux 上的 HDInsight 后，将仍然能够创建新群集或调整现有群集的大小。 \r \r ### <a name=\"what-do-i-need-to-do\"></a>我需要做什么？\r 在 2018 年 7 月 31 日之前，将你的 HDInsight Windows 群集迁移到受支持的 HDInsight Linux 群集。 可以在 [HDInsight 迁移文档](/hdinsight/hdinsight-migrate-from-windows-to-linux)中了解详细信息。 有关 Azure HDInsight 版本的详细信息，请参阅[支持的版本](/hdinsight/hdinsight-component-versioning#supported-hdinsight-versions)列表。 \r \r ### <a name=\"where-do-i-find-the-cluster-os-type\"></a>可以在哪里找到群集 OS 类型？\r 在 Azure 门户中，转到 HDInsight 群集概述页，然后在“概要”下找到“群集类型”。 该页上列出了群集 OS 类型。 \r \r ### <a name=\"i-cant-migrate-to-an-hdinsight-linux-cluster-by-july-31-2018-what-is-the-impact-to-my-hdinsight-windows-cluster\"></a>无法在 2018 年 7 月 31 日之前迁移到 HDInsight Linux 群集。 这对我的 HDInsight Windows 群集有何影响？\r HDInsight Windows 群集将按现样运行，但是你将无法创建新的 HDInsight Windows 群集，也无法调整现有 HDInsight Windows 群集的大小。 \r \r ### <a name=\"my-cluster-has-a-net-dependency-how-do-i-resolve-this-dependency-on-linux\"></a>我的群集具有 .NET 依赖项。 在 Linux 上如何解决此依赖关系？\r 可以使用 [Mono 项目](http://www.mono-project.com/)解决 Linux 群集依赖关系。 .NET 的此开源实现可用于 HDInsight Linux 群集。 可以在 [HDInsight 迁移文档](/hdinsight/hdinsight-migrate-from-windows-to-linux)中了解详细信息。 \r \r ### <a name=\"im-a-new-customer-for-hdinsight-on-windows-how-can-i-create-an-hdinsight-windows-cluster\"></a>我是 Windows 上的 HDInsight 的新客户。 如何创建 HDInsight Windows 群集？\r 从 2017 年 7 月 3 日起，只有现有 HDInsight Windows 客户可以创建新的 HDInsight Windows 群集。 新客户无法使用 PowerShell 或 SDK 在 Azure 门户中创建 HDInsight Windows 群集。 我们建议新客户创建 Linux HDInsight 群集。 现有客户仍然可以创建新的 HDInsight Windows 群集，直到 Windows 上的 HDInsight 停用的那一天。 \r \r ### <a name=\"is-there-a-pricing-impact-associated-with-moving-from-hdinsight-on-windows-to-hdinsight-on-linux\"></a>从 Windows 上的 HDInsight 迁移到 Linux 上的 HDInsight 是否会有相关的定价影响？\r 没有，两种 OS 上的 HDInsight 的定价是相同的。 \r \r ### <a name=\"what-are-the-customer-advantages-associated-with-the-move-to-only-using-hdinsight-on-linux\"></a>迁移后仅使用 Linux 上的 HDInsight 对客户有什么好处？\r * 可以通过 HDInsight 服务加快开源大数据技术的上市时间\r * 由大型社区和生态系统提供支持\r * 能够利用 Hadoop 和其他大数据技术的开源社区练习主动开发\r \r ### <a name=\"does-hdinsight-on-linux-provide-additional-functionality-beyond-what-is-available-in-hdinsight-on-windows\"></a>Linux 上的 HDInsight 是否比 Windows 上的 HDInsight 提供了更多的功能？\r 从 HDInsight 版本 3.4 开始，Microsoft 仅在 Linux OS 上发行了 HDInsight。 因此，HDInsight 中的某些组件仅可供 Linux 使用。 这些组件包括 Apache Ranger、Kafka、Interactive Hive、Spark 和 HDInsight 应用程序。 \r \r ## <a name=\"service-level-agreement-for-hdinsight-cluster-versions\"></a>HDInsight 群集版本的服务级别协议\r 服务级别协议 (SLA) 是按“支持窗口”定义的。 支持窗口是 HDInsight 群集版本受 Azure 客户服务和支持部门支持的时间段。 如果版本的“支持到期日期”已过，则 HDInsight 处于支持窗口外。 有关支持的版本的详细信息，请参阅[支持的 HDInsight 群集版本](./hdinsight-migrate-from-windows-to-linux.md)列表。 指定的 HDInsight 版本 X 的支持到期日期（在提供更新的 X+1 版本后）为按以下公式计算所得时间的较晚者：  \r \r * 公式 1：发布 HDInsight 群集版本 X 的日期加 180 天。\r * 公式 2：HDInsight 群集版本 X+1（X 之后的后续版本）在门户中可用的日期加 90 天。\r \r _停用日期_是指在此后不能在 HDInsight 上创建此群集版本的日期。 从 2017 年 7 月 31 日开始，无法在停用日期后调整 HDInsight 群集的大小。 \r \r > [!NOTE]\r > HDInsight Windows 群集（包括版本 2.1、3.0、3.1, 3.2 和 3.3）在 Azure 来宾 OS 系列版本 4 上运行，该版本使用 64 位版本的 Windows Server 2012 R2。 Azure 来宾 OS 系列版本 4 支持 .NET Framework 版本 4.0、4.5、4.5.1 和 4.5.2。\r >\r >\r \r ## <a name=\"hortonworks-release-notes-associated-with-hdinsight-versions\"></a>与 HDInsight 版本相关的 Hortonworks 发行说明\r \r 本部分提供了与 HDInsight 一起使用的 Hortonworks 数据平台分发版和 Apache 组件的发行说明的链接。\r * HDInsight 群集版本 3.6 使用基于 [Hortonworks 数据平台 2.6](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.6.0/bk_release-notes/content/ch_relnotes.html) 的 Hadoop 分发版。 \r * HDInsight 群集版本 3.5 使用基于 [Hortonworks 数据平台 2.5](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.5.0/bk_release-notes/content/ch_relnotes_v250.html) 的 Hadoop 分发版。 HDInsight 群集版本 3.5 是在 Azure 门户中创建的“默认”Hadoop 群集。\r * HDInsight 群集版本 3.4 使用基于 [Hortonworks 数据平台 2.4](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.4.0/bk_HDP_RelNotes/content/ch_relnotes_v240.html) 的 Hadoop 分发版。 \r * HDInsight 群集版本 3.3 使用基于 [Hortonworks 数据平台 2.3](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.3.0/bk_HDP_RelNotes/content/ch_relnotes_v230.html) 的 Hadoop 分发版。\r \r * Apache 网站上提供了 [Apache Storm 发行说明](https://storm.apache.org/2015/11/05/storm0100-released.html)。\r * Apache 网站上提供了 [Apache Hive 发行说明](https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12332384&styleName=Text&projectId=12310843)。\r * HDInsight 群集版本 3.2 使用基于 [Hortonworks 数据平台 2.2][hdp-2-2] 的 Hadoop 分发版。  \r \r * 具体 Apache 组件的发行说明提供如下：[Hive 0.14](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310843&version=12326450)、[Pig 0.14](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310730&version=12326954)、[HBase 0.98.4](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310753&version=12326810)、[Phoenix 4.2.0](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12315120&version=12327581)、[M/R 2.6](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310941&version=12327180)、[HDFS 2.6](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310942&version=12327181)、[YARN 2.6](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12313722&version=12327197)、[Common](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12310240&version=12327179)、[Tez 0.5.2](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12314426&version=12328742)、[Ambari 2.0](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12312020&version=12327486)、[Storm 0.9.3](https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12314820&version=12327112) 和 [Oozie 4.1.0](https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12324960&projectId=12311620)。\r * HDInsight 群集版本 3.1 使用基于 [Hortonworks 数据平台 2.1.7][hdp-2-1-7] 的 Hadoop 分发版。 在 2014 年 11 月 7 日之前创建的 HDInsight 3.1 群集基于 [Hortonworks 数据平台 2.1.1][hdp-2-1-1]。\r * HDInsight 群集版本 3.0 使用基于 [Hortonworks 数据平台 2.0][hdp-2-0-8] 的 Hadoop 分发版。\r * HDInsight 群集版本 2.1 使用基于 [Hortonworks 数据平台 1.3][hdp-1-3-0]的 Hadoop 分发版。\r * HDInsight 群集版本 1.6 使用基于 [Hortonworks 数据平台 1.1][hdp-1-1-0]的 Hadoop 分发版。\r \r ### <a name=\"pricing-and-sla\"></a>定价和 SLA\r 有关 HDInsight 的定价和 SLA 的信息，请参阅 [HDInsight 定价](https://www.azure.cn/pricing/details/hdinsight/)。\r \r ## <a name=\"default-node-configuration-and-virtual-machine-sizes-for-clusters\"></a>群集的默认节点配置和虚拟机大小\r 下表列出了 HDInsight 群集的默认虚拟机 (VM) 大小。\r \r > [!IMPORTANT]\r > 如果需要在群集中使用 32 个以上的辅助角色节点，则必须选择至少具有 8 个核心和 14 GB RAM 的头节点大小。\r >\r >\r | 群集类型 | Hadoop | HBase | Storm | Spark |\r | --- | --- | --- | --- | --- |\r | 头：默认 VM 大小 |D3 v2 |D3 v2 |A3 |D12 v2 |\r | 头：建议的 VM 大小 |D3 v2、D4 v2、D12 v2 |D3 v2、D4 v2、D12 v2 |A3、A4、A5 |D12 v2、D13 v2、D14 v2 |\r | 辅助角色：默认 VM 大小 |D3 v2 |D3 v2 |D3 v2 |Windows：D12 v2；Linux：D4 v2 |\r | 辅助角色：建议的 VM 大小 |D3 v2、D4 v2、D12 v2 |D3 v2、D4 v2、D12 v2 |D3 v2、D4 v2、D12 v2 |Windows：D12 v2、D13 v2、D14 v2；Linux：D4 v2、D12 v2、D13 v2、D14 v2 |\r | Zookeeper：默认 VM 大小 | |A3 |A2 | |\r | Zookeeper：建议的 VM 大小 | |A3、A4、A5 |A2、A3、A4 | |\r \r > [!NOTE]\r > - 头称为 Storm 群集类型的 *Nimbus* 。\r > - 对于 Storm 群集类型，辅助角色称为“主管”。\r > - 对于 HBase 群集类型，辅助角色称为“区域”。\r \r ## <a name=\"next-steps\"></a>后续步骤\r - [适用于 HDInsight 上的 Hadoop、Spark 等的群集安装](hdinsight-hadoop-provision-linux-clusters.md)\r - [在 Windows 电脑中操作 Hadoop on HDInsight](hdinsight-hadoop-windows-tools.md)\r \r [Supported HDInsight versions]:(#supported-hdinsight-versions)\r \r [image-hdi-versioning-versionscreen]: ./media/hdinsight-component-versioning/hdi-versioning-version-screen.png\r \r [wa-forums]: https://www.azure.cn/support/forums/\r \r [connect-excel-with-hive-ODBC]: hadoop/apache-hadoop-connect-excel-hive-odbc-driver.md\r \r [hdp-2-2]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.2.0/HDP_2.2.0_Release_Notes_20141202_version/index.html\r \r [hdp-2-1-7]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.7-Win/bk_releasenotes_HDP-Win/content/ch_relnotes-HDP-2.1.7.html\r \r [hdp-2-1-1]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.1.1/bk_releasenotes_hdp_2.1/content/ch_relnotes-hdp-2.1.1.html\r \r [hdp-2-0-8]: http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.0.8.0/bk_releasenotes_hdp_2.0/content/ch_relnotes-hdp2.0.8.0.html\r \r [hdp-1-3-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-1.3.0/bk_releasenotes_hdp_1.x/content/ch_relnotes-hdp1.3.0_1.html\r \r [hdp-1-1-0]: http://docs.hortonworks.com/HDPDocuments/HDP1/HDP-Win-1.1/bk_releasenotes_HDP-Win/content/ch_relnotes-hdp-win-1.1.0_1.html\r \r [ambari-docs]: https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md\r \r [zookeeper]: http://zookeeper.apache.org/\r \r <!--Update_Description: update wording and link references-->"}