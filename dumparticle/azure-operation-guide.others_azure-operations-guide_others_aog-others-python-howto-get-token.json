{"Title":"如何通过 Python 获取 Token 操作资源","Description":"如何通过 Python 获取 Token 操作资源","Content":"# 如何通过 Python 获取 Token 操作资源\r \r 在使用 Python SDK 操作 Azure 资源时，首先需要获取认证的 Token，然后才能对资源的做进一步的操作。本文分别介绍了基于 Azure AD 和 Azure 账户名和密码两种获取 Token 的方式，实现 managerClient 对象的创建，进而操作 Azure 资源。\r \r ## Azure AD 方式\r \r ```\r import azure.mgmt.resource\r import azure.mgmt.network\r from msrestazure.azure_active_directory import AADTokenCredentials, ServicePrincipalCredentials\r \r GROUP_NAME = 'yutaopythonresourcetest1'\r REGION = 'chinanorth' #option value: chinaeast, chinanorth\r \r client_id = '16a94c84-c6ba-4f19-aa48-3353f8ffe18e'\r client_secret = '123456'\r tenant_id = 'b388b808-0ec9-4a09-a414-a7cbbd8b711b'\r subscription_id = 'e0fbea86-6cf2-4b2d-81e2-9c59f4f96b33'\r \r credentials = ServicePrincipalCredentials(client_id,client_secret,tenant=tenant_id,china='true')\r \r resource_client = azure.mgmt.resource.ResourceManagementClient(credentials, subscription_id,base_url='https://management.chinacloudapi.cn')\r \r resource_group_params = {'location':REGION}\r \r # create a resource group\r result = resource_client.resource_groups.create_or_update(\r     GROUP_NAME,\r     resource_group_params\r )\r ```\r \r ## 账户名--密码方式\r \r ```\r from azure.common.credentials import UserPassCredentials\r from azure.mgmt.resource import ResourceManagementClient\r \r credentials = UserPassCredentials('test@microsoftinternal.partner.onmschina.cn', '123456',china = 'true')\r subscription_id = 'e0fbea86-6cf2-4b2d-81e2-9c59f4f96b33'\r \r resource_client = ResourceManagementClient(credentials, subscription_id,base_url='https://management.chinacloudapi.cn')\r \r resource_group_name = 'my_resource_group'\r \r resource_client.resource_groups.create_or_update(\r     resource_group_name,\r     {\r         'location':'chinanorth'\r     }\r )\r ```\r \r ## 更多信息参考链接\r \r - [Azure SDK for Python](http://azure-sdk-for-python.readthedocs.io/en/latest/)\r - [Azure SDK for Python - GitHub](https://github.com/Azure/azure-sdk-for-python)\r "}