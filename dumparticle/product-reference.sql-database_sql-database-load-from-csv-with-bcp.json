{"Title":"将数据从 CSV 文件载入 Azure SQL 数据库 (bcp)","Description":"对于较小的数据，请使用 bcp 将数据导入到 Azure SQL 数据库。","Content":"# <a name=\"load-data-from-csv-into-azure-sql-database-flat-files\"></a>将数据从 CSV 加载到 Azure SQL 数据库（平面文件）\r 可以使用 bcp 命令行实用程序将数据从 CSV 文件导入 Azure SQL 数据库。\r \r ## <a name=\"before-you-begin\"></a>开始之前\r ### <a name=\"prerequisites\"></a>先决条件\r 若要完成本文中的步骤，需要：\r \r * Azure SQL 数据库逻辑服务器和数据库\r * 已安装 bcp 命令行实用工具\r * 已安装 sqlcmd 命令行实用工具\r \r 可以从 [Microsoft 下载中心][Microsoft Download Center]下载 bcp 和 sqlcmd 实用程序。\r \r ### <a name=\"data-in-ascii-or-utf-16-format\"></a>采用 ASCII 或 UTF-16 格式的数据\r 如果使用自己的数据尝试学习本教程，则数据需要使用 ASCII 或 UTF-16 编码，因为 bcp 不支持 UTF-8。 \r \r ## <a name=\"1-create-a-destination-table\"></a>1.创建目标表\r 将 SQL 数据库中的某个表定义为目标表。 该表中的列必须对应于数据文件每一行中的数据。\r \r 若要创建表，请打开命令提示符并使用 sqlcmd.exe 运行以下命令：\r \r ```sql\r sqlcmd.exe -S <server name> -d <database name> -U <username> -P <password> -I -Q \"\r     CREATE TABLE DimDate2\r     (\r         DateId INT NOT NULL,\r         CalendarQuarter TINYINT NOT NULL,\r         FiscalQuarter TINYINT NOT NULL\r     )\r     ;\r \"\r ```\r \r ## <a name=\"2-create-a-source-data-file\"></a>2.创建源数据文件\r 打开记事本，将以下几行数据复制到新文本文件，然后将此文件保存到本地临时目录 C:\\Temp\\DimDate2.txt。 此数据采用 ASCII 格式。\r \r ```\r 20150301,1,3\r 20150501,2,4\r 20151001,4,2\r 20150201,1,3\r 20151201,4,2\r 20150801,3,1\r 20150601,2,4\r 20151101,4,2\r 20150401,2,4\r 20150701,3,1\r 20150901,3,1\r 20150101,1,3\r ```\r \r （可选）若要从 SQL Server 数据库导出自己的数据，请打开命令提示符并运行以下命令。 将 TableName、ServerName、DatabaseName、Username 和 Password 替换成自己的信息。\r \r ```bcp\r bcp <TableName> out C:\\Temp\\DimDate2_export.txt -S <ServerName> -d <DatabaseName> -U <Username> -P <Password> -q -c -t , \r ```\r \r ## <a name=\"3-load-the-data\"></a>3.加载数据\r 要加载数据，请打开命令提示符并运行以下命令，请注意将 Server Name、Database Name、Username 和 Password 替换为你自己的信息。\r \r ```bcp\r bcp DimDate2 in C:\\Temp\\DimDate2.txt -S <ServerName> -d <DatabaseName> -U <Username> -P <password> -q -c -t  ,\r ```\r \r 使用此命令来验证是否已正确加载数据\r \r ```bcp\r sqlcmd.exe -S <server name> -d <database name> -U <username> -P <password> -I -Q \"SELECT * FROM DimDate2 ORDER BY 1;\"\r ```\r \r 结果应如下所示：\r \r | DateId | CalendarQuarter | FiscalQuarter |\r | --- | --- | --- |\r | 20150101 |1 |3 |\r | 20150201 |1 |3 |\r | 20150301 |1 |3 |\r | 20150401 |2 |4 |\r | 20150501 |2 |4 |\r | 20150601 |2 |4 |\r | 20150701 |3 |1 |\r | 20150801 |3 |1 |\r | 20150801 |3 |1 |\r | 20151001 |4 |2 |\r | 20151101 |4 |2 |\r | 20151201 |4 |2 |\r \r ## <a name=\"next-steps\"></a>后续步骤\r 若要迁移 SQL Server 数据库，请参阅 [SQL Server 数据库迁移](sql-database-cloud-migrate.md)。\r \r <!--MSDN references-->\r [bcp]: https://msdn.microsoft.com/library/ms162802.aspx\r [CREATE TABLE syntax]: https://msdn.microsoft.com/library/mt203953.aspx\r \r <!--Other Web references-->\r [Microsoft Download Center]: https://www.microsoft.com/download/details.aspx?id=36433\r <!--Update_Description: update metadata-->"}