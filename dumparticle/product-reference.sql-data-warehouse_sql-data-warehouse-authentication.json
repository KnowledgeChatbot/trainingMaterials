{"Title":"对 Azure SQL 数据仓库进行身份验证","Description":"对 Azure SQL 数据仓库进行的 Azure Active Directory (AAD) 和 SQL Server 身份验证。","Content":"# <a name=\"authentication-to-azure-sql-data-warehouse\"></a>对 Azure SQL 数据仓库进行身份验证\r \r > [!div class=\"op_single_selector\"]\r > * [安全性概述](sql-data-warehouse-overview-manage-security.md)\r > * [身份验证](sql-data-warehouse-authentication.md)\r > * [加密（门户）](sql-data-warehouse-encryption-tde.md)\r > * [加密 (T-SQL)](sql-data-warehouse-encryption-tde-tsql.md)\r > \r > \r \r 若要连接到 SQL 数据仓库，必须传入安全凭据进行身份验证。 建立连接时，特定的连接设置已配置为建立查询会话的一部分。  \r \r 若要深入了解安全性以及如何启用与数据仓库的连接，请参阅[保护 SQL 数据仓库中的数据库][Secure a database in SQL Data Warehouse]。\r \r ## <a name=\"sql-authentication\"></a>SQL 身份验证\r 若要连接到 SQL 数据仓库，必须提供以下信息：\r \r * 完全限定的服务器名称\r * 指定 SQL 身份验证\r * 用户名\r * 密码\r * 默认数据库（可选）\r \r 默认情况下，连接连接到 master 数据库而不是用户数据库。 若要连接到用户数据库，可以选择执行以下两项操作之一：\r \r * 在 SSDT、SSMS 或应用程序连接字符串中将服务器注册到 SQL Server 对象资源管理器时指定默认数据库。 例如，包含 ODBC 连接的 InitialCatalog 参数。\r * 在 SSDT 中创建会话之前先突出显示用户数据库。\r \r > [!NOTE]\r > 不支持使用 Transact-SQL 语句 **USE MyDatabase;** 更改连接的数据库。 有关使用 SSDT 连接到 SQL 数据仓库的指南，请参阅[使用 Visual Studio 进行查询][Query with Visual Studio]一文。\r > \r > \r \r ## <a name=\"azure-active-directory-aad-authentication\"></a>Azure Active Directory (AAD) 身份验证\r \r [Azure Active Directory][What is Azure Active Directory] 身份验证是使用 Azure Active Directory (Azure AD) 中的标识连接到 Azure SQL 数据仓库的一种机制。 通过 Azure Active Directory 身份验证，可以在一个中心位置中集中管理数据库用户和其他 Microsoft 服务的标识。 集中 ID 管理提供单一位置用于管理 SQL 数据仓库用户，并简化权限管理。 \r \r ### <a name=\"benefits\"></a>优点\r \r Azure Active Directory 的优点包括：\r \r * 提供一个 SQL Server 身份验证的替代方法。\r * 帮助阻止用户标识在数据库服务器之间激增。\r * 允许在单一位置中轮换密码\r * 使用外部 (AAD) 组管理数据库权限。\r * 通过启用集成的 Windows 身份验证和 Azure Active Directory 支持的其他形式的身份验证来消除存储密码。\r * 使用包含的数据库用户在数据库级别对标识进行身份验证。\r * 支持对连接到 SQL 数据仓库的应用程序进行基于令牌的身份验证。\r * 支持通过用于 SQL Server Management Studio 的 Active Directory 通用身份验证进行多重身份验证。 如需多重身份验证的说明，请参阅 [SSMS support for Azure AD MFA with SQL Database and SQL Data Warehouse](../sql-database/sql-database-ssms-mfa-authentication.md)（SQL 数据库和 SQL 数据仓库针对 Azure AD MFA 的 SSMS 支持）。\r \r > [!NOTE]\r > Azure Active Directory 仍然相对较新，具有某些限制。 若要确保 Azure Active Directory 适用于当前环境，请参阅 [Azure AD 功能和限制][Azure AD features and limitations]，尤其是那些需要额外考虑的内容。\r > \r > \r \r ### <a name=\"configuration-steps\"></a>配置步骤\r \r 按照这些步骤配置 Azure Active Directory 身份验证。\r \r 1. 创建并填充 Azure Active Directory\r 2. 可选：关联或更改当前与 Azure 订阅关联的活动目录\r 3. 为 Azure SQL 数据仓库创建 Azure Active Directory 管理员。\r 4. 配置客户端计算机\r 5. 在映射到 Azure AD 标识的数据库中创建包含的数据库用户\r 6. 使用 Azure AD 标识连接到数据仓库\r \r 目前，Azure Active Directory 用户不会显示在 SSDT 对象资源管理器中。 解决方法是在 [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx) 中查看这些用户。\r \r ### <a name=\"find-the-details\"></a>查看详细信息\r * 配置和使用 Azure Active Directory 身份验证的步骤与适用于 Azure SQL 数据库和 Azure SQL 数据仓库的步骤几乎完全相同。 请遵循主题 [使用 Azure Active Directory 身份验证连接到 SQL 数据库或 SQL 数据仓库](../sql-database/sql-database-aad-authentication.md)中的详细步骤。\r * 创建自定义数据库角色，并向角色添加用户。 然后授予角色具体权限。 有关详细信息，请参阅 [数据库引擎权限入门](https://msdn.microsoft.com/library/mt667986.aspx)。\r \r ## <a name=\"next-steps\"></a>后续步骤\r \r 若要开始使用 Visual Studio 和其他应用程序查询数据仓库，请参阅 [使用 Visual Studio 进行查询][Query with Visual Studio]。\r \r <!-- Article references -->\r [Secure a database in SQL Data Warehouse]: ./sql-data-warehouse-overview-manage-security.md\r [Query with Visual Studio]: ./sql-data-warehouse-query-visual-studio.md\r [What is Azure Active Directory]: ../active-directory/active-directory-whatis.md\r [Azure AD features and limitations]: ../sql-database/sql-database-aad-authentication.md#azure-ad-features-and-limitations\r \r <!--Update_Description: wording update-->"}